(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[204,332],{7313:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var a=n(3433),r=n(9439),s=n(2791),i=n(4165),o=n(5861),c=n(4569),l=n.n(c),u=n(184),d=function(e){var t=e.delay;return(0,u.jsx)("div",{className:"placeholder",style:{animationDelay:"".concat(t,"ms")},onClick:function(e){return e.stopPropagation()}})},m=n(6355),p=n(458),f=n(3676),g=n(1784),_=n(3224),h=n(1879),v=(0,s.lazy)((function(){return Promise.resolve().then(n.bind(n,5850))}));var x=function(e){e.activeProfile;var t=e.spotifyToken,n=e.genreDetails,c=e.playTrack,x=e.currentTrack,j=e.setGameDetails,w=e.resumePlayback,A=e.pausePlayback,b=e.isPlaying,N=e.currentGameOpen,y=e.closeGameWindow,k=e.openGame,S=e.updateGameStatus,P=e.setNotification,Z=e.loading,C=e.hoverGame,E=e.hoverAway,I=e.currentHover,G=e.currentCollection,T=e.gameStatus,M=(0,s.useState)(null),D=(0,r.Z)(M,2),L=D[0],R=D[1],O="https://gameflix.up.railway.app",F=(0,s.useState)([]),B=(0,r.Z)(F,2),U=B[0],q=B[1],z=(0,s.useState)(!1),Y=(0,r.Z)(z,2),Q=Y[0],V=Y[1],H=(0,s.useState)(!1),J=(0,r.Z)(H,2),K=J[0],W=J[1],X=(0,s.useState)(!1),$=(0,r.Z)(X,2),ee=$[0],te=$[1],ne=n[0][0],ae=n[0][1],re=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return R(null),P("ERROR","Please connect to Spotify through the nav dropdown!"),e.abrupt("return");case 4:return e.prev=4,te(!0),e.next=8,l().get("".concat(O,"/app/spotify_album"),{params:{game:n.name,token:t,baseURL:O}});case 8:if("OK"===(a=e.sent).data.status){e.next=14;break}console.log(a.data),te(!1),e.next=19;break;case 14:return R(n.id),q(a.data.tracks),V(!0),te(!1),e.abrupt("return",a.data.tracks);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(4),console.log(e.t0),te(!1),e.abrupt("return",e.t0);case 26:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(t){return e.apply(this,arguments)}}(),se=function(e){return G.some((function(t){return t.id===e.id}))?(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){return S("REMOVE",e)},children:[(0,u.jsx)(m.kty,{className:"blur_item_icon"}),(0,u.jsx)("p",{children:"Remove"})]}):(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){return S("ADD",e)},children:[(0,u.jsx)(m.ymq,{className:"blur_item_icon"}),(0,u.jsx)("p",{children:"Add"})]})},ie=function(e){if(!e||!e.age_ratings)return(0,u.jsx)("img",{className:"row__poster__esrb_img",src:h});var t=null===e||void 0===e?void 0:e.age_ratings.filter((function(e){return 1==e.category||2==e.category}));if(0==t.length||!e.age_ratings)return(0,u.jsx)("img",{className:"row__poster__esrb_img",src:h});switch(t[0].rating){case 1:case 2:case 8:case 9:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb E rating",src:f});case 3:case 4:case 10:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb T rating",src:g});case 5:case 11:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb M rating",src:_});default:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb RP rating",src:h})}};return(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("h2",{className:"row__title",children:ne}),(0,u.jsxs)("div",{className:"row__posters",children:[ae.map((function(e){var t,n;return void 0!==e.cover&&(0,u.jsx)(s.Fragment,{children:!Z&&(0,u.jsxs)("div",{className:"row__poster_wrapper ".concat(N==e.id&&"viewing_game"),style:{zIndex:N!==e.id&&null!==N&&"-1"},onMouseOver:function(){return C(e.id)},onMouseLeave:function(){return Q?C(e.id):E()},children:[I==e.id&&!N&&(0,u.jsxs)("div",{className:"row__blur_wrapper ".concat("error"==T?"blur_error":"success"==T?"blur_success":""),children:[ee?(0,u.jsxs)("div",{className:"playlist_loading",children:[(0,u.jsx)("div",{className:"playlist_loading_dot"}),(0,u.jsx)("div",{className:"playlist_loading_dot"}),(0,u.jsx)("div",{className:"playlist_loading_dot"})]}):(0,u.jsxs)("div",{className:"row__blur_details",style:{display:L==e.id&&"none"},children:[se(e),(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){!function(e){y(),j(e)}(e)},children:[(0,u.jsx)(p.QEt,{className:"blur_item_icon more"}),(0,u.jsx)("p",{children:"Details"})]}),(0,u.jsxs)("div",{onClick:function(t){return function(e,t){e.stopPropagation(),y(),R(t.id),re(t)}(t,e)},className:"row__blur_item",children:[(0,u.jsx)(m.HcQ,{className:"blur_item_icon music"}),(0,u.jsx)("p",{children:"Soundtrack"})]}),(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){return k(e)},children:[(0,u.jsx)(m.iVx,{className:"blur_item_icon"}),(0,u.jsx)("p",{children:"View Case"})]})]}),Q&&L==e.id&&(0,u.jsxs)("div",{className:"soundtrack_container",children:[(0,u.jsx)("span",{onClick:function(e){return function(e){e.stopPropagation(),R(null),V(!1)}(e)},children:"\u2190"}),(0,u.jsx)("h3",{children:"Spotify OST"}),(0,u.jsx)("ul",{className:"soundtracks",children:null===U||void 0===U?void 0:U.map((function(e){return(0,u.jsxs)("li",{onClick:function(e){return e.stopPropagation()},className:"soundtrack",children:[(0,u.jsx)("p",{style:{color:null!==x&&x.name==e.name?"green":"white",fontWeight:null!==x&&x.name==e.name?"600":"400"},children:(t=e.name,t.split("-")[0].split("(")[0])}),null!==x&&x.name!==e.name||!b?(0,u.jsx)(m.gmG,{onClick:function(t){return function(e,t){e.stopPropagation(),null!==x&&t.name==x.name&&w(),c(t)}(t,e)}}):(0,u.jsx)(m.Wh,{onClick:function(e){return A()}})]},e.id);var t}))})]})]}),(0,u.jsx)("div",{className:"row__poster_container",children:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"row__poster_front",style:{transformStyle:N&&"revert"},children:(0,u.jsx)("img",{loading:"lazy",className:"row__poster",src:"https://images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(t=e.cover)||void 0===t?void 0:t.image_id,".jpg"),alt:e.name+" cover image"})})})}),N===e.id&&(0,u.jsx)(s.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:(0,u.jsx)(v,{game:e,gameCover:"https://images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(null===(n=e.cover)||void 0===n?void 0:n.image_id,".jpg"),ratingImage:ie(e),viewingPreview:K,openGame:function(){return W(!0)},closeGame:function(){return W(!1)}})})]})},e.id)})),Z&&(0,u.jsx)("div",{className:"row__loading_container",children:(0,a.Z)(Array(10)).map((function(e,t){return(0,u.jsx)("div",{className:"row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))})]})]})},j=n(7692),w=function(){var e=(0,s.useState)(!1),t=(0,r.Z)(e,2),n=t[0],a=t[1],c=(0,s.useState)([]),u=(0,r.Z)(c,2),d=u[0],m=u[1],p=(0,s.useState)(""),f=(0,r.Z)(p,2),g=f[0],_=f[1],h=(0,s.useState)(null),v=(0,r.Z)(h,2),x=v[0],j=v[1],w=localStorage.getItem("twitch_auth"),A=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,l().post("".concat("https://gameflix.up.railway.app","/app/fetch_banner_list"),{token:w});case 4:return t=e.sent,n=t.data[Math.floor(Math.random()*t.data.length-1)],m(t.data),_(n),a(!1),e.abrupt("return",g);case 12:return e.prev=12,e.t0=e.catch(1),console.log(e.t0),j(e.t0),a(!1),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){!w||d.length>0||A()}),[w]);return{isLoading:n,serverError:x,currentGame:g,displayNewBanner:function(){var e=d[Math.floor(Math.random()*d.length-1)];return e?void _(e):void _(d[Math.floor(Math.random()*d.length-1)])}}};var A=function(e){var t,n,a,r,s=e.setGameDetails,i=e.addGame,o=e.activeProfile,c=w();if(c.isLoading||!c.currentGame)return(0,u.jsx)("div",{className:"banner__loading",children:(0,u.jsx)("div",{className:"banner__spinner"})});var l,d,m=void 0!==c.currentGame.artworks,p=o.collection&&o.collection.some((function(e){var t;return(null===e||void 0===e?void 0:e.id)===(null===(t=c.currentGame)||void 0===t?void 0:t.id)}));return(0,u.jsxs)("header",{className:"banner",children:[(0,u.jsx)("div",{className:"banner__img",style:{backgroundSize:"cover",backgroundImage:"url(//images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(m?null===(t=c.currentGame.artworks[0])||void 0===t?void 0:t.image_id:null===(n=c.currentGame.cover)||void 0===n?void 0:n.image_id,".jpg)"),backgroundPosition:"center center"}}),(0,u.jsxs)("div",{className:"banner__contents",children:[(0,u.jsx)("h1",{className:"banner__title",children:null===(a=c.currentGame)||void 0===a?void 0:a.name}),(0,u.jsxs)("div",{className:"banner__buttons",children:[(0,u.jsx)("button",{className:"banner__button",onClick:function(){return s(c.currentGame)},children:"See Details"}),!p&&(0,u.jsx)("button",{className:"banner__button",onClick:function(){return i(c.currentGame)},children:"Add to Collection"})]}),(0,u.jsx)("h1",{className:"banner__description",children:(l=null===(r=c.currentGame)||void 0===r?void 0:r.summary,d=150,(null===l||void 0===l?void 0:l.length)>d?l.substr(0,d-1)+"...":l)})]}),(0,u.jsx)("div",{className:"banner--fadeBottom"}),(0,u.jsx)(j.t5J,{size:35,className:"banner__refresh_icon",onClick:c.displayNewBanner})]},c.currentGame.id)},b=n(6475),N=(n(7762),n(1087)),y=n(71),k=n(6856),S="https://accounts.spotify.com/authorize?client_id=".concat("05e6f02e47724a63b635cfdac09fc991","&response_type=code&redirect_uri=").concat("https://gameflix.up.railway.app","&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state"),P=function(e){var t=e.allProfiles;(0,s.useEffect)((function(){var t=function(t){27===t.keyCode&&e.closeNavDropdown()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]);return t.sort((function(e,t){return e.name-t.name?1:-1})),(0,u.jsxs)("div",{className:"dropdown",children:[(0,u.jsx)(m.h3_,{className:"dropdown__arrow"}),(0,u.jsx)("div",{className:"dropdown__profiles",children:(0,u.jsxs)("ul",{className:"dropdown__profiles_list",children:[t.map((function(t){if(t.name!==e.activeProfile.name)return(0,u.jsxs)("li",{className:"dropdown__profiles_item",onClick:function(){return function(t){e.changeProfile(t)}(t)},children:[(0,u.jsx)("img",{src:t.avatar,className:"dropdown__profile_icon",alt:"".concat(t.name," avatar icon")}),(0,u.jsx)("p",{className:"dropdown__profile_name",children:t.name})]},t.name)})),(0,u.jsxs)("li",{className:"dropdown__profiles_item",onClick:e.toProfilePage,children:[(0,u.jsx)("span",{className:"dropdown__profiles_manage",children:(0,u.jsx)(k.zmo,{size:22})}),(0,u.jsx)("p",{className:"dropdown__profile_name",children:"Manage Profiles"})]})]})}),(0,u.jsxs)("div",{className:"dropdown__settings",children:[(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:function(){return e.editProfile()},children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.dfI,{size:18})}),(0,u.jsx)("p",{children:"My Profile"})]}),(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:function(){return e.viewCollection()},children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.iVx,{size:18})}),(0,u.jsx)("p",{children:"My Collection"})]}),(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:e.editAccount,children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(y.Fuo,{size:18})}),(0,u.jsx)("p",{children:"Account Settings"})]})]}),(0,u.jsx)("div",{className:"dropdown__settings",children:(0,u.jsxs)("a",{href:S,className:"dropdown__settings_item",children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.l4C,{size:18,style:{color:e.spotifyToken?"#1DB954":"#FFF"}})}),(0,u.jsx)("p",{children:"Spotify Authentication"})]})}),(0,u.jsx)("div",{className:"dropdown__settings_links",children:(0,u.jsx)(N.rU,{to:"/login",className:"dropdown__settings_link",onClick:e.logoutHandler,children:"Sign out of GameFlix"})})]})},Z=n(6797),C=n(8820),E=function(e){var t=e.closeAccountSettings,n=e.setLoggedUser,a=e.currentUser,c="https://gameflix.up.railway.app",d=(0,s.useState)(!1),m=(0,r.Z)(d,2),p=m[0],f=m[1],g=(0,s.useState)(""),_=(0,r.Z)(g,2),h=_[0],v=_[1],x=(0,s.useState)(a.email),j=(0,r.Z)(x,2),w=j[0],A=j[1],b=(0,s.useState)(""),N=(0,r.Z)(b,2),y=N[0],k=N[1],S=(0,s.useState)(!1),P=(0,r.Z)(S,2),Z=P[0],E=P[1],I=(0,s.useState)(a.password),G=(0,r.Z)(I,2),T=G[0],M=G[1],D=(0,s.useState)(!0),L=(0,r.Z)(D,2),R=L[0],O=L[1],F=(0,s.useState)(""),B=(0,r.Z)(F,2),U=B[0],q=B[1],z=(0,s.useState)(!1),Y=(0,r.Z)(z,2),Q=Y[0],V=Y[1];(0,s.useEffect)((function(){if(R){var e=a.password.replace(/./gi,"*");M(e)}else M(a.password)}),[R]);var H=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(""),e.prev=1,e.next=4,l().post("".concat(c,"/app/update_user_email"),{originalEmail:a.email,newEmail:t});case 4:(r=e.sent).data.status<400?(n(r.data.user),v({type:"success",message:r.data.message}),A(r.data.user.email),k(""),E(!1)):(v({type:"error",message:r.data.message}),k("")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().delete("".concat(c,"/app/delete_account"),{data:{id:a._id}});case 3:window.location="/",localStorage.removeItem("user"),localStorage.removeItem("profile"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:"profile_edit__container",children:[(0,u.jsx)("div",{className:"profile_edit__header",children:(0,u.jsx)("h3",{children:"GAMEFLIX"})}),(0,u.jsxs)("div",{className:"profile_edit__form_wrapper",style:{height:"350px"},children:[(0,u.jsx)("h3",{children:"Account Settings"}),(0,u.jsx)("div",{className:"form_container",children:(0,u.jsxs)("form",{className:"account_edit__form",children:[(0,u.jsxs)("div",{className:"account_email_container",children:["error"==h.type?(0,u.jsx)("p",{className:"account_email_error",children:h.message}):(0,u.jsx)("p",{className:"account_email_success",children:h.message}),(0,u.jsx)("h4",{style:{color:"white",fontSize:"2rem",marginLeft:"2px"},children:"Email"}),(0,u.jsx)("input",{className:"account_email_input",onChange:function(e){return A(e.target.value)},value:w}),Z&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{className:"account_email_input",onChange:function(e){return k(e.target.value)},value:y,placeholder:"Enter new email",autoFocus:!0}),(0,u.jsx)("button",{type:"button",onClick:function(){k(""),E(!1)},className:"account_email_save_btn",children:"Cancel"})]}),(0,u.jsx)("button",{type:"button",onClick:function(){Z?""!==y?H(y):(E(!1),k("")):(E(!0),V(!1))},className:"save_btn",children:Z?"Save Email":"Change Email"})]}),(0,u.jsxs)("div",{className:"account_password_container",children:[(0,u.jsx)("h4",{style:{color:"white",fontSize:"2rem",marginLeft:"2px"},children:"Password"}),(0,u.jsx)("input",{className:"account_password_input",onChange:function(e){return M(e.target.value)},value:T}),(0,u.jsx)("span",{className:"account_password_visible_icon",onClick:function(){return O(!R)},children:R?(0,u.jsx)(C.p3W,{}):(0,u.jsx)(C.w8I,{})}),Q&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{className:"account_password_input",onChange:function(e){return q(e.target.value)},value:U,placeholder:"Enter new password",autoFocus:!0}),(0,u.jsx)("button",{type:"button",onClick:function(){q(""),V(!1)},className:"account_password_save_btn",children:"Cancel"})]}),(0,u.jsx)("button",{type:"button",onClick:function(){Q?""!==U?y:(V(!1),q("")):(V(!0),E(!1))},className:"save_btn",children:Q?"Save Password":"Change Password"})]})]})}),(0,u.jsxs)("div",{className:"form_actions",style:{justifyContent:"space-between"},children:[(0,u.jsx)("button",{className:"cancel_btn",onClick:t,children:"Back"}),(0,u.jsx)("button",{className:"delete_account_btn",onClick:function(){return f(!0)},children:"Delete Account"})]})]}),p&&(0,u.jsx)("div",{className:"delete_account_modal",children:(0,u.jsxs)("div",{className:"delete_account_modal_content",children:[(0,u.jsx)("h4",{children:"Are you sure you want to delete your account?"}),(0,u.jsxs)("div",{className:"delete_account_modal_actions",children:[(0,u.jsxs)("div",{className:"modal_action_option",children:[(0,u.jsx)("p",{children:"Yes"}),(0,u.jsx)("span",{className:"video-game-button",onClick:J,children:"A"})]}),(0,u.jsxs)("div",{className:"modal_action_option",children:[(0,u.jsx)("p",{children:"No"}),(0,u.jsx)("span",{className:"video-game-button",onClick:function(){return f(!1)},children:"B"})]})]})]})})]})};var I=function(e){var t=(0,s.useState)(!1),n=(0,r.Z)(t,2),a=n[0],i=n[1],o=(0,s.useState)(!1),c=(0,r.Z)(o,2),l=c[0],d=c[1],p=(0,s.useState)(!1),f=(0,r.Z)(p,2),g=f[0],_=f[1],h=(0,s.useRef)(""),v=(0,s.useState)(!1),x=(0,r.Z)(v,2),j=x[0],w=x[1],A=(0,s.useState)(!1),N=(0,r.Z)(A,2),y=N[0],k=N[1],S=e.activeProfile;(0,s.useEffect)((function(){var e=function(){window.addEventListener("scroll",(function(){window.scrollY>100?i(!0):i(!1)}))};return e(),function(){window.removeEventListener("scroll",e)}}),[]);var C=function(){document.body.style.overflowY="scroll",w(!1),k(!1)};return(0,s.useEffect)((function(){var e=function(e){27===e.keyCode&&_(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,u.jsxs)("div",{className:"nav ".concat(a&&"nav__hide"),children:[j&&(0,u.jsx)("div",{className:"nav_edit_profile",children:(0,u.jsx)(Z.Z,{currentProfile:S,userEmail:e.currentUser.email,viewAllProfiles:C,saveEdit:function(){e.saveEdit(),w(!1)},getProfile:function(t){return e.selectProfile(t)},twitchToken:e.twitchToken})}),y&&(0,u.jsxs)("div",{className:"nav_edit_profile",children:[" ",(0,u.jsx)(E,{closeAccountSettings:C,setLoggedUser:function(t){return e.setLoggedUser(t)},currentUser:e.currentUser})," "]}),(0,u.jsx)("img",{className:"nav__logo",src:"data:image/png;base64,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",alt:"GameFlix Logo",onClick:function(){return window.location="/"}}),(0,u.jsxs)("div",{className:"nav__right",children:[(0,u.jsxs)("div",{className:"nav__search",children:[g&&(0,u.jsx)("form",{className:"nav__search_form",onSubmit:function(t){t.preventDefault();var n=h.current.value.trim();0!=n.length&&e.fetchSubmittedGame(n)},children:(0,u.jsx)("input",{ref:h,autoFocus:!0,type:"text",placeholder:"Titles, publishers, genres",defaultValue:e.searchedGame?"".concat(e.searchedGame.name):"",onBlur:function(){h.current.value.length>0||_(!1)}})}),(0,u.jsx)(m.Ozl,{className:"nav__search_icon ".concat(g&&"search_active"),onClick:function(){return _(!g)}})]}),(0,u.jsxs)("div",{className:"nav__actions",onMouseLeave:function(){return d(!1)},children:[(0,u.jsx)("div",{className:"nav__avatar_container",onMouseOver:function(){return d(!0)},children:(0,u.jsx)("img",{className:"nav__avatar",src:S.avatar?S.avatar:b,alt:"User's avatar"})}),(0,u.jsx)(m.$Pg,{className:"nav__avatar_arrow",style:{transform:"".concat(l?"rotate(180deg)":"rotate(0deg)")}}),l&&(0,u.jsx)(P,{changeProfile:e.changeUser,activeProfile:S,allProfiles:e.currentUser.profiles,logoutHandler:e.onLogout,closeNavDropdown:function(){d(!1)},toProfilePage:e.toProfilePage,spotifyToken:e.spotifyToken,editProfile:function(){document.body.style.overflowY="hidden",w(!0)},editAccount:function(){document.body.style.overflowY="hidden",k(!0)},updateCollection:e.updateCollection,currentCollection:e.currentCollection,viewCollection:e.viewCollection})]})]})]})},G=function(e){var t=e.twitchToken,n=e.setGameDetails,c=(0,s.useState)([]),p=(0,r.Z)(c,2),f=p[0],g=p[1],_=(0,s.useState)("Week"),h=(0,r.Z)(_,2),v=h[0],x=h[1],j=(0,s.useState)(!1),w=(0,r.Z)(j,2),A=w[0],b=w[1],N=(0,s.useState)(!1),y=(0,r.Z)(N,2),k=y[0],S=y[1],P=(0,s.useState)(!0),Z=(0,r.Z)(P,2),C=Z[0],E=Z[1],I="https://gameflix.up.railway.app",G=new Date,T=Math.floor(new Date(G.getTime()+6048e5)/1e3),M=Math.floor(new Date(new Date(1e3*T).setMonth(new Date(1e3*T).getMonth()+1)).getTime()/1e3),D=Math.floor(new Date(new Date(1e3*M).setMonth(new Date(1e3*M).getMonth()+12)).getTime()/1e3),L=function(e){var t=[],n=[];return e.map((function(e){-1===t.indexOf(e.game.name)&&(t.push(e.game.name),n.push(e))})),n};(0,s.useEffect)((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n,a,r,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=v,e.next="Month"===e.t0?3:"Year"===e.t0?6:9;break;case 3:return n=T,a=M,e.abrupt("break",12);case 6:return n=M,a=D,e.abrupt("break",12);case 9:return n=Math.floor(G.getTime()/1e3),a=T,e.abrupt("break",12);case 12:e.prev=12,r=3,s=0;case 15:if(!(s<r)){e.next=31;break}return e.prev=16,e.next=19,l().post("".concat(I,"/app/upcoming"),{token:t,currentDate:n,targetDate:a});case 19:return o=e.sent,g(L(o.data)),E(!1),e.abrupt("break",31);case 25:e.prev=25,e.t1=e.catch(16),console.log("Issue fetching data");case 28:s++,e.next=15;break;case 31:e.next=36;break;case 33:e.prev=33,e.t2=e.catch(12),console.log(e.t2.message);case 36:case"end":return e.stop()}}),e,null,[[12,33],[16,25]])})))).apply(this,arguments)}t&&(E(!0),function(){e.apply(this,arguments)}())}),[v,t]);var R=function(e){x(e.target.innerText),b(!1)},O=function(e){var t,n=new Date(e.replace(/-/g,"/")),a=n.getDate();switch(a){case 1:case 21:case 31:t=a+"st";break;case 2:case 22:t=a+"nd";break;case 3:case 23:t=a+"rd";break;default:t=a+"th"}return["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+t+", "+n.getFullYear()};return(0,u.jsxs)("div",{onMouseOver:function(){return S(!0)},onMouseOut:function(){return S(!1)},className:"main_row",children:[(0,u.jsxs)("div",{className:"main_row__filters",onMouseLeave:function(){return b(!1)},children:[(0,u.jsx)("h2",{children:"Coming Soon"}),(0,u.jsxs)("p",{className:"filters_filter",onMouseOver:function(){return b(!0)},children:[v," ",(0,u.jsx)(m.$Pg,{size:10,className:A?"arrow_active":"arrow"})]})," ",A&&(0,u.jsx)("div",{className:"filter_options",children:(0,u.jsxs)("ul",{children:[(0,u.jsx)("li",{style:{backgroundColor:"Week"==v?"white":"",color:"Week"==v?"black":""},onClick:R,children:"Week"}),(0,u.jsx)("li",{style:{backgroundColor:"Month"==v?"white":"",color:"Month"==v?"black":""},onClick:R,children:"Month"}),(0,u.jsx)("li",{style:{backgroundColor:"Year"==v?"white":"",color:"Year"==v?"black":""},onClick:R,children:"Year"})]})})]}),(0,u.jsxs)("div",{className:"main_row__row_posters",children:[f&&!C&&f.map((function(e,t){var a;return(0,u.jsxs)("div",{className:"main_row__poster_container ".concat(k&&"dimmed"),onClick:function(){return n(e.game)},children:[(0,u.jsx)("h4",{className:"main__poster_released",children:O(e.human)}),(0,u.jsx)("img",{className:"main_poster",src:"//images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(a=e.game.cover)||void 0===a?void 0:a.image_id,".jpg"),alt:e.name},e.id)]},e.id)})),C&&(0,u.jsx)("div",{className:"main_row__loading_container",children:(0,a.Z)(Array(4)).map((function(e,t){return(0,u.jsx)("div",{className:"main_row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))})]})]})},T=function(e){var t=e.twitchToken,n=e.setGameDetails,a=(0,s.useState)([]),c=(0,r.Z)(a,2),d=c[0],m=c[1],p=(0,s.useState)(!1),f=(0,r.Z)(p,2),g=f[0],_=f[1],h="https://gameflix.up.railway.app",v=Math.floor((new Date).getTime()/1e3),x=JSON.parse(sessionStorage.getItem("trending"));return(0,s.useEffect)((function(){if(t){if(x&&x.length>0)return m(x),void _(!1);!function(){e.apply(this,arguments)}()}function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n,a,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,n=[],e.next=5,l().post("".concat(h,"/app/trending"),{token:t,currentDate:v});case 5:return a=e.sent,console.log(a),r=new Set,a.data.filter((function(e){return!r.has(e.game.id)&&r.add(e.game.id).add(e.game)})),r.forEach((function(e){return"object"==typeof e&&n.push(e)})),n.sort((function(e,t){return t.release_dates.findLast((function(e){return e.date}))-e.release_dates.findLast((function(e){return e.date}))||t.hypes-e.hypes})),m(n.slice(0,10)),sessionStorage.setItem("trending",JSON.stringify(n.slice(0,10))),_(!1),e.abrupt("return",a);case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:_(!1);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}}),[t]),g?null:(0,u.jsxs)("div",{className:"trending_row",children:[(0,u.jsx)("h2",{children:"TRENDING TITLES"}),(0,u.jsx)("div",{className:"trending_row__posters",children:d.map((function(e,t){var a;return(0,u.jsx)(s.Fragment,{children:(0,u.jsxs)("div",{className:"trending_row__poster_wrapper",children:[(0,u.jsx)("div",{className:"trending_row__rank",children:t+1}),(0,u.jsxs)("div",{className:"trending_row__poster_container",style:{marginLeft:9==t?"160px":0==t&&"65px"},onClick:function(){return n(e)},children:[" ",!g&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("img",{loading:"lazy",className:"trending_row__poster",src:"https://images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(a=e.cover)||void 0===a?void 0:a.image_id,".jpg"),alt:e.name})})]})]})},e.name)}))})]})},M=(n(5850),function(e){var t=e.twitchToken,n=(e.setGameDetails,(0,s.useState)([])),a=(0,r.Z)(n,2),c=a[0],l=(a[1],(0,s.useState)(!1)),u=(0,r.Z)(l,2),d=(u[0],u[1]);(0,s.useEffect)((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.abrupt("return");case 5:e.prev=5,e.t0=e.catch(1),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[1,5]])})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]);return null===c||void 0===c||c.sort((function(e,t){return e.rating_count>t.rating_count?-1:t.rating_count>e.rating_count?1:0})),""}),D=n(4544);var L=new Date,R=(Math.floor(L.getTime()/1e3),[{requestId:"fetchAdventureTitles",genreId:31,title:"ACTION/ADVENTURE GAMES"},{requestId:"fetchArcadeTitles",genreId:33,title:"ARCADE GAMES"},{requestId:"fetchMusicTitles",genreId:7,title:"MUSIC GAMES"},{requestId:"fetchHackTitles",genreId:25,title:"HACK/SLASH TITLES"},{requestId:"fetchFightingTitles",genreId:4,title:"FIGHTING GAMES"},{requestId:"fetchIndieTitles",genreId:32,title:"INDIE GAMES"},{requestId:"fetchMassivelyMultiplayerTitles",genreId:36,title:"MOBA GAMES"},{requestId:"fetchPlatformerTitles",genreId:8,title:"PLATFORMER GAMES"},{requestId:"fetchPuzzleTitles",genreId:9,title:"PUZZLE GAMES"},{requestId:"fetchRacingTitles",genreId:10,title:"RACING GAMES"},{requestId:"fetchRPGTitles",genreId:12,title:"RPG GAMES"},{requestId:"fetchShooterTitles",genreId:5,title:"SHOOTER GAMES"},{requestId:"fetchSimulationTitles",genreId:13,title:"SIMULATION GAMES"},{requestId:"fetchSportsTitles",genreId:14,title:"SPORTS GAMES"},{requestId:"fetchStrategy",genreId:15,title:"STRATEGY GAMES"}]);var O=n(6907),F=(0,s.lazy)((function(){return Promise.all([n.e(490),n.e(858)]).then(n.bind(n,6818))})),B=(0,s.lazy)((function(){return n.e(37).then(n.bind(n,5872))})),U=(0,s.lazy)((function(){return Promise.all([n.e(598),n.e(331)]).then(n.bind(n,1403))})),q=new URLSearchParams(window.location.search).get("code"),z=window.location.search.split("?")[1],Y=function(e){var t=e.currentUser,n=e.twitchToken,c=e.currentProfile,m=e.currentCollection,p=e.userNotes,f=e.updateCollection,g=e.selectProfile,_=e.updateGameStatus,h=e.fetchGame,v=e.logoutUser,j=e.gameStatus,w=e.resetGameStatus,b=e.changeProfile,N=function(){var e=localStorage.getItem("twitch_auth"),t=(0,s.useState)([]),n=(0,r.Z)(t,2),a=n[0],c=n[1],u=(0,s.useState)(!0),d=(0,r.Z)(u,2),m=d[0],p=d[1],f="https://gameflix.up.railway.app",g=new Date;(0,s.useEffect)((function(){var t=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat(f,"/app/get_genres"));case 2:if(t=e.sent,a=new Date(t.data.last_updated),!(g>a.setDate(a.getDate()+1))){e.next=8;break}return e.abrupt("return",n());case 8:return c(t.data[0].genres_list),p(!1),e.abrupt("return",t.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Promise.all(R.map((function(t){return l().post("".concat(f,"/app/game_genre"),{token:e,genreId:t.genreId,genreTitle:t.title})})));case 4:return n=t.sent,a=n.map((function(e){return e.data})),_(a),p(!1),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var _=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().post("".concat(f,"/app/update_genres"),{genreList:t,date:g});case 2:return n=e.sent,c(n.data.genres_list),e.abrupt("return",n.data.genres_list);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{genreGamesList:a,isLoading:m}}(),y=(0,s.useState)(!1),k=(0,r.Z)(y,2),S=k[0],P=(k[1],(0,s.useState)({status:"",message:""})),Z=(0,r.Z)(P,2),C=Z[0],E=Z[1],L=(0,s.useState)(null),Y=(0,r.Z)(L,2),Q=Y[0],V=Y[1],H=(0,s.useState)(!1),J=(0,r.Z)(H,2),K=J[0],W=J[1],X=(0,s.useState)(),$=(0,r.Z)(X,2),ee=$[0],te=($[1],(0,s.useState)(!1)),ne=(0,r.Z)(te,2),ae=ne[0],re=ne[1],se=(0,s.useState)(null),ie=(0,r.Z)(se,2),oe=ie[0],ce=ie[1],le=(0,s.useState)(!1),ue=(0,r.Z)(le,2),de=(ue[0],ue[1]),me=(0,s.useState)(null),pe=(0,r.Z)(me,2),fe=pe[0],ge=pe[1],_e=(0,s.useState)(null),he=(0,r.Z)(_e,2),ve=he[0],xe=he[1],je=function(e){var t=(0,s.useState)(),n=(0,r.Z)(t,2),a=n[0],c=n[1],u=(0,s.useState)(),d=(0,r.Z)(u,2),m=d[0],p=d[1],f=(0,s.useState)(),g=(0,r.Z)(f,2),_=g[0],h=g[1],v="https://gameflix.up.railway.app",x=sessionStorage.getItem("spotify_auth");return(0,s.useEffect)((function(){if(x)return console.log(x),void c(JSON.parse(x));if(e){var t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l().post("".concat(v,"/app/spotify_authentication"),{code:e,baseURL:v});case 3:n=t.sent,c(n.data.tokenRequest.body.access_token),p(n.data.tokenRequest.body.refresh_token),h(n.data.tokenRequest.body.expires_in),sessionStorage.setItem("spotify_auth",JSON.stringify(n.data.tokenRequest.body.access_token)),window.history.pushState({},null,"/"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),window.location="/";case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]),(0,s.useEffect)((function(){if(m&&_){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().post("".concat(v,"/app/refresh_token"),{refreshToken:m,baseURL:v});case 3:t=e.sent,c(t.data.body.body.access_token),p(t.data.body.body.refresh_token),h(t.data.body.body.expires_in),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("REFRESH TOKEN ERROR"),window.location="/";case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=setInterval((function(){e()}),1e3*(_-60));return function(){return clearTimeout(t)}}}),[m,_]),a}(q);!function(e){var t=(0,s.useState)([]),n=(0,r.Z)(t,2),a=n[0],c=n[1];(0,s.useEffect)((function(){if(e){var t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l().get("".concat("https://gameflix.up.railway.app","/steam/get_owned_games"),{params:{id:e}});case 3:n=t.sent,localStorage.setItem("steamID",n.config.params.id),console.log(n.data),c(n.data),window.history.pushState({},null,"/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),console.log("GET STEAM COLLECTION ERROR");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e])}(z);(0,s.useEffect)((function(){oe||(document.body.style.overflow="auto")}),[]);var we=function(){document.body.style.overflow="auto",ce(null)},Ae=function(e){V(e)};if(c)return null!==ve?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(s.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:[(0,u.jsx)(F,{setNotification:function(e,t){return E({status:e,message:t})},game:ve,closeDetails:function(){return xe(null)},twitchToken:n,updateGameStatus:function(e,t){return _(e,t)},activeProfile:c,currentCollection:m}),(0,u.jsx)(B,{notification:C,displayNotification:S,hideNotification:function(){E({message:"",status:""})}})]})}):ae?(0,u.jsx)(s.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:(0,u.jsx)(U,{collection:m,activeProfile:c,backToHome:function(){return re(!1)},currentTrack:Q,playTrack:Ae,isPlaying:K,pausePlayback:function(){return W(!1)},resumePlayback:function(){return W(!0)},spotifyToken:je,updateGameStatus:function(e,t){return _(e,t)},updateCollection:f,userNotes:p})}):(0,u.jsxs)("div",{className:"App",children:[(0,u.jsx)(I,{currentUser:t,activeProfile:c,changeUser:b,onLogout:v,fetchSubmittedGame:h,toProfilePage:function(){localStorage.removeItem("profile"),window.location.reload()},selectProfile:g,spotifyToken:je,twitchToken:n,saveEdit:function(){return console.log("saving edit")},updateCollection:f,currentCollection:m,viewCollection:function(){return re(!0)}}),(0,u.jsx)(A,{setGameDetails:function(e){return xe(e)},addGame:function(e){return _("ADD",e)},activeProfile:c}),(0,u.jsx)(G,{twitchToken:n,setGameDetails:function(e){return xe(e)}}),(0,u.jsx)(M,{twitchToken:n,setGameDetails:function(e){return xe(e)}}),(0,u.jsx)(T,{twitchToken:n,setGameDetails:function(e){return xe(e)}}),oe&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h1",{className:"row__preview_close",onClick:we,children:"X"}),(0,u.jsx)("h1",{className:"row__preview_close options",onClick:function(){de(!0)},children:(0,u.jsx)(O.eBn,{})})]}),(0,u.jsx)("div",{className:"".concat(null!==oe?"game_preview__modal":"")}),N.genreGamesList.length>0?N.genreGamesList.map((function(e){return(0,u.jsx)(x,{activeProfile:c,spotifyToken:je,genreDetails:Object.entries(e),playTrack:Ae,currentTrack:Q,setGameDetails:function(e){return xe(e)},resumePlayback:function(e){return W(!0)},pausePlayback:function(e){return W(!1)},isPlaying:K,currentGameOpen:oe,openGame:function(e){return function(e){console.log(e),ce(e.id),document.body.style.overflow="hidden"}(e)},closeGameWindow:we,G:!0,updateGameStatus:function(e,t){return _(e,t)},setNotification:function(e,t){return E({status:e,message:t})},loading:ee,hoverGame:function(e){return ge(e)},hoverAway:function(){return ge(null),void w()},currentHover:fe,currentCollection:m,gameStatus:j},Object.keys(e))})):(0,u.jsx)("div",{className:"row__loading_container",children:(0,a.Z)(Array(10)).map((function(e,t){return(0,u.jsx)("div",{className:"row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))}),je&&(0,u.jsx)(D.Z,{spotifyToken:je,playAudio:K,beginPlayback:function(e){return W(!0)},pausePlayback:function(e){return W(!1)},trackUri:null===Q||void 0===Q?void 0:Q.uri}),(0,u.jsx)(B,{notification:C,displayNotification:S,hideNotification:function(){E({message:"",status:""})}})]})},Q=(0,s.memo)(Y)},6797:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var a=n(4165),r=n(5861),s=n(9439),i=n(2791),o=(n(9583),n(184)),c=function(e){var t=e.list,n=e.selectGame;return(0,o.jsx)("div",{className:"search_list_container",children:(0,o.jsx)("ul",{className:"search_list",children:t.slice(0,5).map((function(e){return(0,o.jsxs)("li",{className:"search_list_item",onClick:function(){return n(e)},children:[(0,o.jsx)("img",{className:"item_thumbnail",src:e.cover.url}),(0,o.jsx)("p",{className:"item_title",children:e.name})]})}))})})},l=n(4569),u=n.n(l),d=n(6856),m=n(4257),p=n(6355),f=function(e){var t="https://gameflix.up.railway.app",n=e.currentProfile,l=n.isAdmin,f=(0,i.useState)(!1),g=(0,s.Z)(f,2),_=g[0],h=g[1],v=(0,i.useState)(!1),x=(0,s.Z)(v,2),j=x[0],w=x[1],A=localStorage.getItem("profile")||n.name,b=(0,i.useState)(A),N=(0,s.Z)(b,2),y=N[0],k=N[1],S=(0,i.useRef)(""),P=(0,i.useState)(n.favorite_game),Z=(0,s.Z)(P,2),C=Z[0],E=Z[1],I=(0,i.useState)(0),G=(0,s.Z)(I,2),T=G[0],M=G[1],D=(0,i.useState)(""),L=(0,s.Z)(D,2),R=L[0],O=L[1],F=(0,i.useState)([]),B=(0,s.Z)(F,2),U=B[0],q=B[1],z=(0,i.useRef)(""),Y=(0,i.useState)(n.favorite_console),Q=(0,s.Z)(Y,2),V=Q[0],H=Q[1],J=(0,i.useState)(""),K=(0,s.Z)(J,2),W=(K[0],K[1]),X=(0,i.useState)(n.avatar),$=(0,s.Z)(X,2),ee=$[0],te=$[1],ne=(0,i.useState)(null),ae=(0,s.Z)(ne,2),re=(ae[0],ae[1],(0,i.useRef)("")),se=(0,i.useState)(""),ie=(0,s.Z)(se,2),oe=ie[0],ce=ie[1],le=(0,i.useState)(!1),ue=(0,s.Z)(le,2),de=ue[0],me=ue[1],pe=(0,i.useState)(!1),fe=(0,s.Z)(pe,2),ge=fe[0],_e=fe[1],he=(0,i.useState)(!1),ve=(0,s.Z)(he,2),xe=ve[0],je=ve[1],we=(0,i.useState)(n.color),Ae=(0,s.Z)(we,2),be=Ae[0],Ne=Ae[1],ye=(0,i.useRef)(""),ke=(0,i.useState)(!1),Se=(0,s.Z)(ke,2),Pe=Se[0],Ze=Se[1],Ce=(0,i.useState)(n.favorite_genre),Ee=(0,s.Z)(Ce,2),Ie=Ee[0],Ge=Ee[1];(0,i.useEffect)((function(){if(""!=C&&C!=n.favorite_game&&!j){var s=setTimeout((function(){w(!0);var n=function(){var n=(0,r.Z)((0,a.Z)().mark((function n(){var r;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u().post("".concat(t,"/app/search_game"),{gameName:C,token:e.twitchToken});case 2:r=n.sent,q(r.data),w(!1);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),500);return function(){return clearTimeout(s)}}q([])}),[C]),(0,i.useEffect)((function(){var e=function(e){27===e.keyCode&&je(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,i.useEffect)((function(){function e(e){ye.current&&!ye.current.contains(e.target)&&Ze(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[ye]);var Te=function(){var s=(0,r.Z)((0,a.Z)().mark((function r(){var s;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return h(!0),a.prev=1,a.next=4,u().delete("".concat(t,"/app/delete_profile"),{data:{email:e.userEmail,name:n.name}});case 4:s=a.sent,e.saveEdit(s.data.response),e.viewAllProfiles(),a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(1),console.log(a.t0),a.abrupt("return",a.t0);case 13:h(!1);case 14:case"end":return a.stop()}}),r,null,[[1,9]])})));return function(){return s.apply(this,arguments)}}(),Me=function(){var s=(0,r.Z)((0,a.Z)().mark((function r(s,i){var o,c;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(h(!0),(o=new FormData).append("email",e.userEmail),o.append("name",n.name),"file"!=i){a.next=20;break}return o.append("avatar",s.target.files[0]),a.prev=6,a.next=9,u().post("".concat(t,"/app/update_avatar_file"),o);case 9:a.sent,te(URL.createObjectURL(s.target.files[0])),a.next=17;break;case 13:return a.prev=13,a.t0=a.catch(6),console.log(a.t0),a.abrupt("return",a.t0);case 17:h(!1),a.next=33;break;case 20:return c={email:e.userEmail,name:n.name,avatar:oe},a.prev=21,a.next=24,u().post("".concat(t,"/app/update_avatar_link"),c);case 24:a.sent,te(oe),a.next=32;break;case 28:return a.prev=28,a.t1=a.catch(21),console.log(a.t1),a.abrupt("return",a.t1);case 32:h(!1);case 33:case"end":return a.stop()}}),r,null,[[6,13],[21,28]])})));return function(e,t){return s.apply(this,arguments)}}(),De=function(){var s=(0,r.Z)((0,a.Z)().mark((function r(s){var i,o;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),h(!0),i={email:e.userEmail,originalName:n.name,newName:y.trim(),newColor:be,favoriteGenre:Ie?Ie.trim():"Action",favoriteGame:C?C.trim():"None",gameId:T,imageURL:R,favoriteConsole:V?V.trim():"None",twitchToken:e.twitchToken},a.prev=3,a.next=6,u().post("".concat(t,"/app/update_user_profile"),i);case 6:o=a.sent,localStorage.setItem("user",o.data.response.user.email),localStorage.setItem("profile",o.data.response.profile.name),W(o.data.message),e.saveEdit(o.data.response),e.viewAllProfiles(),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(3),W(a.t0);case 17:h(!1);case 18:case"end":return a.stop()}}),r,null,[[3,14]])})));return function(e){return s.apply(this,arguments)}}();return _?(0,o.jsxs)("div",{className:"profile_edit__container",children:[(0,o.jsx)("div",{className:"profile_edit__header",children:(0,o.jsx)("h3",{children:"GAMEFLIX"})}),(0,o.jsx)("div",{className:"profile_edit__form_wrapper",children:(0,o.jsx)("div",{className:"profile__loading",children:(0,o.jsx)("div",{className:"profile__loading_spinner"})})})]}):(0,o.jsxs)("div",{className:"profile_edit__container",children:[(0,o.jsx)("div",{className:"profile_edit__header",children:(0,o.jsx)("h3",{children:"GAMEFLIX"})}),(0,o.jsxs)("div",{className:"profile_edit__form_wrapper",children:[(0,o.jsx)("h3",{children:!0!==n?"Edit Profile":"Create Profile"}),(0,o.jsxs)("div",{className:"form_container ".concat(ge&&"avatar_select_container"),children:[(0,o.jsxs)("div",{style:{paddingTop:ge&&"10px"},className:"form_avatar_container",children:[(0,o.jsx)("img",{className:"current_avatar ".concat(ge&&"avatar_select"),style:{backgroundColor:be||n.color},src:ee}),!ge&&(0,o.jsx)("span",{className:"current_avatar_edit",onClick:function(){return _e(!0)},children:(0,o.jsx)(d.zmo,{style:{height:"100%"}})})]}),(0,o.jsxs)("div",{className:"form_right",children:[!ge&&(0,o.jsxs)("form",{className:"profile_edit__form",children:[(0,o.jsx)("input",{className:"name_input",onChange:function(e){return k(e.target.value)},value:y,autoFocus:!0}),(0,o.jsx)("p",{children:"Color"}),(0,o.jsx)("input",{className:"color_input",style:{color:be},onChange:function(e){return Ne(e.target.value)},value:be}),(0,o.jsx)("button",{type:"button",onClick:function(){return je(!xe)},style:{backgroundColor:be}}),xe&&(0,o.jsx)(m.xS,{color:be,onChangeComplete:function(e){return Ne(e.hex)},className:"profile_color_palette"})]}),(0,o.jsxs)("div",{className:"form_personal ".concat(ge&&"personal_avatar"),children:[(0,o.jsx)("h4",{style:{textAlign:ge?"center":"left"},children:ge?"Current":"Your Playstyle"}),ge&&(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"upload_avatar_actions ".concat(de&&"img_link_actions"),children:[(0,o.jsx)("input",{className:"upload_file_input",type:"file",accept:"image/*",style:{display:"none"},multiple:!1,ref:re,onChange:function(e){return Me(e,"file")}}),!de&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:function(){return re.current.click()},children:"Upload"}),(0,o.jsx)("p",{children:"OR"})]}),(0,o.jsx)("button",{onClick:function(e){de?Me(e,"link"):me(!0)},children:de?"Submit":"Enter link"}),de&&(0,o.jsx)("input",{className:"console_input ".concat(ge&&"img_input"),placeholder:"Enter link to image or gif",value:oe,onChange:function(e){return ce(e.target.value)}})]})}),!ge&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"form_personal_title",children:"Favorite Title"}),(0,o.jsx)("input",{ref:S,value:C,className:"title_input",onBlur:function(){U.length},onChange:function(e){S.current=C,E(e.target.value)}}),j&&(0,o.jsx)("div",{className:"profile__search_loading",children:(0,o.jsx)("div",{className:"profile__search_loading_spinner"})}),U.length>0&&""!==C&&(0,o.jsx)(c,{list:U,selectGame:function(e){var t;E(e.name),M(e.id),O("//images.igdb.com/igdb/image/upload/t_cover_big/".concat(null===(t=e.cover)||void 0===t?void 0:t.image_id,".jpg")),q([])}})]}),!ge&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"form_personal_console",children:"Favorite Console"}),(0,o.jsx)("input",{ref:S,value:V,onChange:function(e){z.current=V,H(e.target.value)},className:"console_input ".concat(ge&&"img_input"),placeholder:ge?"https://www.example.com":""})]}),(0,o.jsxs)("div",{className:"genre_dropdown",children:[!ge&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"form_personal_genre",children:"Favorite Genre"}),(0,o.jsxs)("button",{onClick:function(){return Ze(!Pe)},children:[void 0!==Ie?"".concat(Ie):"Action"," ",(0,o.jsx)(p.iUH,{className:"genre_arrow"})]})]}),Pe&&(0,o.jsx)("div",{ref:ye,className:"genre_dropdown_content",children:["Action","Adventure","Arcade","Card & Board","Family","Fighting","Indie","MMO (Massive Multiplayer)","Platformer","Puzzle","Racing","RPG","Shooter","Sports","Strategy"].map((function(e){return(0,o.jsx)("span",{onClick:function(){return function(e){Ge(e),Ze(!1)}(e)},children:e},e)}))})]})]})]})]}),(0,o.jsxs)("div",{className:"form_actions",children:[!ge&&(0,o.jsx)("button",{className:"save_btn",onClick:De,children:"Save"}),(0,o.jsx)("button",{className:"cancel_btn",onClick:function(){ge?(_e(!1),me(!1)):e.viewAllProfiles()},children:ge?"Back":"Cancel"}),!l&&(0,o.jsx)("button",{className:"delete_profile_btn justify-start",onClick:Te,children:"Delete Profile"})]})]})]})}},4544:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(2791),r=n(1293),s=n(6234),i=n.n(s),o=n(184),c=new(i())({clientId:"05e6f02e47724a63b635cfdac09fc991"}),l=localStorage.getItem("profile"),u=function(e){var t=e.trackUri,n=e.playAudio,s=e.beginPlayback,i=e.pausePlayback,u=e.spotifyToken;if((0,a.useEffect)((function(){c.setAccessToken(u)}),[u]),(0,a.useEffect)((function(){s()}),[t]),u)return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"playback_container",children:(0,o.jsx)(r.ZP,{token:u,callback:function(e){e.isPlaying||i()},uris:t?[t]:[],play:n,styles:{color:"white",bgColor:"rgba(0,0,0,0.8)",sliderColor:l.color,trackArtistColor:"white",trackNameColor:l.color}})})})}},9583:function(){},3676:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_E.9cf6d7f3f8e673367d2a.png"},3224:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_M.37c27952605b5ceea210.png"},1879:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_RP.7e329028594a72ed21ee.png"},1784:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_T.5f77aabf3318dacd4cfc.png"},6475:function(e,t,n){"use strict";e.exports=n.p+"static/media/basic_avatar.9eeabb71d2fe70b7ff75.png"},4654:function(){}}]);
//# sourceMappingURL=204.6f3cae95.chunk.js.map