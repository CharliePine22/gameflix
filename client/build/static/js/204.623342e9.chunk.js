(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[204,332],{7313:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r=n(3433),a=n(9439),s=n(2791),i=n(4165),o=n(5861),c=n(4569),l=n.n(c),u=n(184),d=function(e){var t=e.delay;return(0,u.jsx)("div",{className:"placeholder",style:{animationDelay:"".concat(t,"ms")},onClick:function(e){return e.stopPropagation()}})},m=n(6355),_=n(458),f=n(3676),p=n(1784),g=n(3224),v=n(1879),h=(0,s.lazy)((function(){return Promise.resolve().then(n.bind(n,5850))}));var x=function(e){e.activeProfile;var t=e.spotifyToken,n=e.genreDetails,c=e.playTrack,x=e.currentTrack,j=e.setGameDetails,A=e.resumePlayback,w=e.pausePlayback,N=e.isPlaying,S=e.currentGameOpen,b=e.closeGameWindow,k=e.openGame,P=e.updateGameStatus,y=e.setNotification,E=e.loading,C=e.hoverGame,T=e.hoverAway,Z=e.currentHover,D=e.currentCollection,I=e.gameStatus,R=(0,s.useState)(null),O=(0,a.Z)(R,2),L=O[0],G=O[1],M={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,F=(0,s.useState)([]),U=(0,a.Z)(F,2),B=U[0],H=U[1],K=(0,s.useState)(!1),W=(0,a.Z)(K,2),z=W[0],q=W[1],V=(0,s.useState)(!1),Y=(0,a.Z)(V,2),Q=Y[0],J=Y[1],X=(0,s.useState)(!1),$=(0,a.Z)(X,2),ee=$[0],te=$[1],ne=n[0][0],re=n[0][1].slice(0,30),ae=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return G(null),y("ERROR","Please connect to Spotify through the nav dropdown!"),e.abrupt("return");case 4:return e.prev=4,te(!0),e.next=8,l().get("".concat(M,"/spotify/spotify_album"),{params:{game:n.name,token:t,baseURL:M}});case 8:if("OK"===(r=e.sent).data.status){e.next=14;break}console.log(r.data),te(!1),e.next=20;break;case 14:return console.log(r),G(n.id),H(r.data.tracks),q(!0),te(!1),e.abrupt("return",r.data.tracks);case 20:e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(4),console.log(e.t0),te(!1),e.abrupt("return",e.t0);case 27:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(t){return e.apply(this,arguments)}}(),se=function(e){return D.some((function(t){return t.id===e.id}))?(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){return P("REMOVE",e)},children:[(0,u.jsx)(m.kty,{className:"blur_item_icon"}),(0,u.jsx)("p",{children:"Remove"})]}):(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){return P("ADD",e)},children:[(0,u.jsx)(m.ymq,{className:"blur_item_icon"}),(0,u.jsx)("p",{children:"Add"})]})},ie=function(e){if(!e||!e.age_ratings)return(0,u.jsx)("img",{className:"row__poster__esrb_img",src:v});var t=null===e||void 0===e?void 0:e.age_ratings.filter((function(e){return 1==e.category||2==e.category}));if(0==t.length||!e.age_ratings)return(0,u.jsx)("img",{className:"row__poster__esrb_img",src:v});switch(t[0].rating){case 1:case 2:case 8:case 9:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb E rating",src:f});case 3:case 4:case 10:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb T rating",src:p});case 5:case 11:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb M rating",src:g});default:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb RP rating",src:v})}};return(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("h2",{className:"row__title",children:ne}),(0,u.jsxs)("div",{className:"row__posters",children:[re.map((function(e){var t,n;return void 0!==e.cover&&(0,u.jsx)(s.Fragment,{children:!E&&(0,u.jsxs)("div",{className:"row__poster_wrapper ".concat(S==e.id&&"viewing_game"),style:{zIndex:S!==e.id&&null!==S&&"-1"},onMouseOver:function(){return C(e.id)},onMouseLeave:function(){return z?C(e.id):T()},children:[Z==e.id&&!S&&(0,u.jsxs)("div",{className:"row__blur_wrapper ".concat("error"==I?"blur_error":"success"==I?"blur_success":""),children:[ee?(0,u.jsxs)("div",{className:"playlist_loading",children:[(0,u.jsx)("div",{className:"playlist_loading_dot"}),(0,u.jsx)("div",{className:"playlist_loading_dot"}),(0,u.jsx)("div",{className:"playlist_loading_dot"})]}):(0,u.jsxs)("div",{className:"row__blur_details",style:{display:L==e.id&&"none"},children:[se(e),(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){!function(e){b(),j(e)}(e)},children:[(0,u.jsx)(_.QEt,{className:"blur_item_icon more"}),(0,u.jsx)("p",{children:"Details"})]}),(0,u.jsxs)("div",{onClick:function(t){return function(e,t){e.stopPropagation(),b(),G(t.id),ae(t)}(t,e)},className:"row__blur_item",children:[(0,u.jsx)(m.HcQ,{className:"blur_item_icon music"}),(0,u.jsx)("p",{children:"Soundtrack"})]}),(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){return k(e)},children:[(0,u.jsx)(m.iVx,{className:"blur_item_icon"}),(0,u.jsx)("p",{children:"View Case"})]})]}),z&&L==e.id&&(0,u.jsxs)("div",{className:"soundtrack_container",children:[(0,u.jsx)("span",{onClick:function(e){return function(e){e.stopPropagation(),G(null),q(!1)}(e)},children:"\u2190"}),(0,u.jsx)("h3",{children:"Spotify OST"}),(0,u.jsx)("ul",{className:"soundtracks",children:null===B||void 0===B?void 0:B.map((function(e){return(0,u.jsxs)("li",{onClick:function(e){return e.stopPropagation()},className:"soundtrack",children:[(0,u.jsx)("p",{style:{color:null!==x&&x.name==e.name?"green":"white",fontWeight:null!==x&&x.name==e.name?"600":"400"},children:(t=e.name,t.split("-")[0].split("(")[0])}),null!==x&&x.name!==e.name||!N?(0,u.jsx)(m.gmG,{onClick:function(t){return function(e,t){e.stopPropagation(),null!==x&&t.name==x.name&&A(),c(t)}(t,e)}}):(0,u.jsx)(m.Wh,{onClick:function(e){return w()}})]},e.id);var t}))})]})]}),(0,u.jsx)("div",{className:"row__poster_container",children:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"row__poster_front",style:{transformStyle:S&&"revert"},children:(0,u.jsx)("img",{loading:"lazy",className:"row__poster",src:"https://images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(t=e.cover)||void 0===t?void 0:t.image_id,".jpg"),alt:e.name+" cover image"})})})}),S===e.id&&(0,u.jsx)(s.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:(0,u.jsx)(h,{game:e,gameCover:"https://images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(null===(n=e.cover)||void 0===n?void 0:n.image_id,".jpg"),ratingImage:ie(e),viewingPreview:Q,openGame:function(){return J(!0)},closeGame:function(){return J(!1)}})})]})},e.id)})),E&&(0,u.jsx)("div",{className:"row__loading_container",children:(0,r.Z)(Array(10)).map((function(e,t){return(0,u.jsx)("div",{className:"row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))})]})]})},j=n(7692),A=function(){var e=(0,s.useState)(!1),t=(0,a.Z)(e,2),n=t[0],r=t[1],c=(0,s.useState)([]),u=(0,a.Z)(c,2),d=u[0],m=u[1],_=(0,s.useState)(""),f=(0,a.Z)(_,2),p=f[0],g=f[1],v=(0,s.useState)(null),h=(0,a.Z)(v,2),x=h[0],j=h[1],A=localStorage.getItem("twitch_auth"),w={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,N=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,l().post("".concat(w,"/app/fetch_banner_list"),{token:A});case 4:return t=e.sent,n=t.data[Math.floor(Math.random()*t.data.length-1)],m(t.data),g(n),r(!1),e.abrupt("return",p);case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),j(e.t0),r(!1),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){!A||d.length>0||(console.log("hELLO"),N())}),[A,d,d.length]);return{isLoading:n,serverError:x,currentGame:p,displayNewBanner:function(){var e=d[Math.floor(Math.random()*d.length-1)];return e?(g(e),void d.splice(d.indexOf(e),1)):(g(d[Math.floor(Math.random()*d.length-1)]),void d.splice(d.indexOf(e),1))}}};var w=function(e){var t,n,r,a,s,i=e.setGameDetails,o=e.addGame,c=e.activeProfile,l=A();if(l.isLoading||!l.currentGame)return(0,u.jsx)("div",{className:"banner__loading",children:(0,u.jsx)("div",{className:"banner__spinner"})});var d,m,_=void 0!==(null===(t=l.currentGame)||void 0===t?void 0:t.artworks),f=c.collection&&c.collection.some((function(e){var t;return(null===e||void 0===e?void 0:e.id)===(null===(t=l.currentGame)||void 0===t?void 0:t.id)}));return(0,u.jsxs)("header",{className:"banner",children:[(0,u.jsx)("div",{className:"banner__img",style:{backgroundSize:"cover",backgroundImage:"url(//images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(_?null===(n=l.currentGame.artworks[0])||void 0===n?void 0:n.image_id:null===(r=l.currentGame.cover)||void 0===r?void 0:r.image_id,".jpg)"),backgroundPosition:"center center"}}),(0,u.jsxs)("div",{className:"banner__contents",children:[(0,u.jsx)("h1",{className:"banner__title",children:null===(a=l.currentGame)||void 0===a?void 0:a.name}),(0,u.jsxs)("div",{className:"banner__buttons",children:[(0,u.jsx)("button",{className:"banner__button",onClick:function(){return i(l.currentGame)},children:"See Details"}),!f&&(0,u.jsx)("button",{className:"banner__button",onClick:function(){return o(l.currentGame)},children:"Add to Collection"})]}),(0,u.jsx)("h1",{className:"banner__description",children:(d=null===(s=l.currentGame)||void 0===s?void 0:s.summary,m=150,(null===d||void 0===d?void 0:d.length)>m?d.substr(0,m-1)+"...":d)})]}),(0,u.jsx)("div",{className:"banner--fadeBottom"}),(0,u.jsx)(j.t5J,{size:35,className:"banner__refresh_icon",onClick:l.displayNewBanner})]},l.currentGame.id)},N=n(6475),S=(n(7762),n(1087)),b=n(71),k=n(6856),P=function(e){var t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,n=e.allProfiles,r=sessionStorage.getItem("spotify_token");(0,s.useEffect)((function(){var t=function(t){27===t.keyCode&&e.closeNavDropdown()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]);return n.sort((function(e,t){return e.name-t.name?1:-1})),(0,u.jsxs)("div",{className:"dropdown",children:[(0,u.jsx)(m.h3_,{className:"dropdown__arrow"}),(0,u.jsx)("div",{className:"dropdown__profiles",children:(0,u.jsxs)("ul",{className:"dropdown__profiles_list",children:[n.map((function(t){if(t.name!==e.activeProfile.name)return(0,u.jsxs)("li",{className:"dropdown__profiles_item",onClick:function(){return function(t){e.changeProfile(t)}(t)},children:[(0,u.jsx)("img",{src:t.avatar,className:"dropdown__profile_icon",alt:"".concat(t.name," avatar icon")}),(0,u.jsx)("p",{className:"dropdown__profile_name",children:t.name})]},t.name)})),(0,u.jsxs)("li",{className:"dropdown__profiles_item",onClick:e.toProfilePage,children:[(0,u.jsx)("span",{className:"dropdown__profiles_manage",children:(0,u.jsx)(k.zmo,{size:22})}),(0,u.jsx)("p",{className:"dropdown__profile_name",children:"Manage Profiles"})]})]})}),(0,u.jsxs)("div",{className:"dropdown__settings",children:[(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:function(){return e.editProfile()},children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.dfI,{size:18})}),(0,u.jsx)("p",{children:"My Profile"})]}),(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:function(){return e.viewCollection()},children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.iVx,{size:18})}),(0,u.jsx)("p",{children:"My Collection"})]}),(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:e.editAccount,children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(b.Fuo,{size:18})}),(0,u.jsx)("p",{children:"Account Settings"})]})]}),(0,u.jsx)("div",{className:"dropdown__settings",children:(0,u.jsxs)(S.rU,{to:"".concat(t,"/spotify/test_spotify"),className:"dropdown__settings_item",onClick:function(e){return r&&e.preventDefault()},children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.l4C,{size:18,style:{color:e.spotifyToken?"#1DB954":"#FFF"}})}),(0,u.jsx)("p",{children:"Connect to Spotify"})]})}),(0,u.jsx)("div",{className:"dropdown__settings_links",children:(0,u.jsx)(S.rU,{to:"/login",className:"dropdown__settings_link",onClick:e.logoutHandler,children:"Sign out of GameFlix"})})]})},y=n(6797),E=n(8820),C=function(e){var t=e.closeAccountSettings,n=e.setLoggedUser,r=e.currentUser,c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,d=(0,s.useState)(!1),m=(0,a.Z)(d,2),_=m[0],f=m[1],p=(0,s.useState)(""),g=(0,a.Z)(p,2),v=g[0],h=g[1],x=(0,s.useState)(r.email),j=(0,a.Z)(x,2),A=j[0],w=j[1],N=(0,s.useState)(""),S=(0,a.Z)(N,2),b=S[0],k=S[1],P=(0,s.useState)(!1),y=(0,a.Z)(P,2),C=y[0],T=y[1],Z=(0,s.useState)(r.password),D=(0,a.Z)(Z,2),I=D[0],R=D[1],O=(0,s.useState)(!0),L=(0,a.Z)(O,2),G=L[0],M=L[1],F=(0,s.useState)(""),U=(0,a.Z)(F,2),B=U[0],H=U[1],K=(0,s.useState)(!1),W=(0,a.Z)(K,2),z=W[0],q=W[1];(0,s.useEffect)((function(){if(G){var e=r.password.replace(/./gi,"*");R(e)}else R(r.password)}),[G]);var V=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(""),e.prev=1,e.next=4,l().post("".concat(c,"/app/update_user_email"),{originalEmail:r.email,newEmail:t});case 4:(a=e.sent).data.status<400?(n(a.data.user),h({type:"success",message:a.data.message}),w(a.data.user.email),k(""),T(!1)):(h({type:"error",message:a.data.message}),k("")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().delete("".concat(c,"/app/delete_account"),{data:{id:r._id}});case 3:window.location="/",localStorage.removeItem("user"),localStorage.removeItem("profile"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:"profile_edit__container",children:[(0,u.jsx)("div",{className:"profile_edit__header",children:(0,u.jsx)("h3",{children:"GAMEFLIX"})}),(0,u.jsxs)("div",{className:"profile_edit__form_wrapper",style:{height:"350px"},children:[(0,u.jsx)("h3",{children:"Account Settings"}),(0,u.jsx)("div",{className:"form_container",children:(0,u.jsxs)("form",{className:"account_edit__form",children:[(0,u.jsxs)("div",{className:"account_email_container",children:["error"==v.type?(0,u.jsx)("p",{className:"account_email_error",children:v.message}):(0,u.jsx)("p",{className:"account_email_success",children:v.message}),(0,u.jsx)("h4",{style:{color:"white",fontSize:"2rem",marginLeft:"2px"},children:"Email"}),(0,u.jsx)("input",{className:"account_email_input",onChange:function(e){return w(e.target.value)},value:A}),C&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{className:"account_email_input",onChange:function(e){return k(e.target.value)},value:b,placeholder:"Enter new email",autoFocus:!0}),(0,u.jsx)("button",{type:"button",onClick:function(){k(""),T(!1)},className:"account_email_save_btn",children:"Cancel"})]}),(0,u.jsx)("button",{type:"button",onClick:function(){C?""!==b?V(b):(T(!1),k("")):(T(!0),q(!1))},className:"save_btn",children:C?"Save Email":"Change Email"})]}),(0,u.jsxs)("div",{className:"account_password_container",children:[(0,u.jsx)("h4",{style:{color:"white",fontSize:"2rem",marginLeft:"2px"},children:"Password"}),(0,u.jsx)("input",{className:"account_password_input",onChange:function(e){return R(e.target.value)},value:I}),(0,u.jsx)("span",{className:"account_password_visible_icon",onClick:function(){return M(!G)},children:G?(0,u.jsx)(E.p3W,{}):(0,u.jsx)(E.w8I,{})}),z&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{className:"account_password_input",onChange:function(e){return H(e.target.value)},value:B,placeholder:"Enter new password",autoFocus:!0}),(0,u.jsx)("button",{type:"button",onClick:function(){H(""),q(!1)},className:"account_password_save_btn",children:"Cancel"})]}),(0,u.jsx)("button",{type:"button",onClick:function(){z?""!==B?b:(q(!1),H("")):(q(!0),T(!1))},className:"save_btn",children:z?"Save Password":"Change Password"})]})]})}),(0,u.jsxs)("div",{className:"form_actions",style:{justifyContent:"space-between"},children:[(0,u.jsx)("button",{className:"cancel_btn",onClick:t,children:"Back"}),(0,u.jsx)("button",{className:"delete_account_btn",onClick:function(){return f(!0)},children:"Delete Account"})]})]}),_&&(0,u.jsx)("div",{className:"delete_account_modal",children:(0,u.jsxs)("div",{className:"delete_account_modal_content",children:[(0,u.jsx)("h4",{children:"Are you sure you want to delete your account?"}),(0,u.jsxs)("div",{className:"delete_account_modal_actions",children:[(0,u.jsxs)("div",{className:"modal_action_option",children:[(0,u.jsx)("p",{children:"Yes"}),(0,u.jsx)("span",{className:"video-game-button",onClick:Y,children:"A"})]}),(0,u.jsxs)("div",{className:"modal_action_option",children:[(0,u.jsx)("p",{children:"No"}),(0,u.jsx)("span",{className:"video-game-button",onClick:function(){return f(!1)},children:"B"})]})]})]})})]})};var T=function(e){var t=(0,s.useState)(!1),n=(0,a.Z)(t,2),r=n[0],i=n[1],o=(0,s.useState)(!1),c=(0,a.Z)(o,2),l=c[0],d=c[1],_=(0,s.useState)(!1),f=(0,a.Z)(_,2),p=f[0],g=f[1],v=(0,s.useRef)(""),h=(0,s.useState)(!1),x=(0,a.Z)(h,2),j=x[0],A=x[1],w=(0,s.useState)(!1),S=(0,a.Z)(w,2),b=S[0],k=S[1],E=e.activeProfile;(0,s.useEffect)((function(){var e=function(){window.addEventListener("scroll",(function(){window.scrollY>100?i(!0):i(!1)}))};return e(),function(){window.removeEventListener("scroll",e)}}),[]);var T=function(){document.body.style.overflowY="scroll",A(!1),k(!1)};return(0,s.useEffect)((function(){var e=function(e){27===e.keyCode&&g(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,u.jsxs)("div",{className:"nav ".concat(r&&"nav__hide"),children:[j&&(0,u.jsx)("div",{className:"nav_edit_profile",children:(0,u.jsx)(y.Z,{currentProfile:E,userEmail:e.currentUser.email,viewAllProfiles:T,saveEdit:function(){e.saveEdit(),A(!1)},getProfile:function(t){return e.selectProfile(t)},twitchToken:e.twitchToken})}),b&&(0,u.jsxs)("div",{className:"nav_edit_profile",children:[" ",(0,u.jsx)(C,{closeAccountSettings:T,setLoggedUser:function(t){return e.setLoggedUser(t)},currentUser:e.currentUser})," "]}),(0,u.jsx)("img",{className:"nav__logo",src:"data:image/png;base64,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",alt:"GameFlix Logo",onClick:function(){return window.location="/"}}),(0,u.jsxs)("div",{className:"nav__right",children:[(0,u.jsxs)("div",{className:"nav__search",children:[p&&(0,u.jsx)("form",{className:"nav__search_form",onSubmit:function(t){t.preventDefault();var n=v.current.value.trim();0!=n.length&&e.fetchSubmittedGame(n)},children:(0,u.jsx)("input",{ref:v,autoFocus:!0,type:"text",placeholder:"Titles, publishers, genres",defaultValue:e.searchedGame?"".concat(e.searchedGame.name):"",onBlur:function(){v.current.value.length>0||g(!1)}})}),(0,u.jsx)(m.Ozl,{className:"nav__search_icon ".concat(p&&"search_active"),onClick:function(){return g(!p)}})]}),(0,u.jsxs)("div",{className:"nav__actions",onMouseLeave:function(){return d(!1)},children:[(0,u.jsx)("div",{className:"nav__avatar_container",onMouseOver:function(){return d(!0)},children:(0,u.jsx)("img",{className:"nav__avatar",src:E.avatar?E.avatar:N,alt:"User's avatar"})}),(0,u.jsx)(m.$Pg,{className:"nav__avatar_arrow",style:{transform:"".concat(l?"rotate(180deg)":"rotate(0deg)")}}),l&&(0,u.jsx)(P,{changeProfile:e.changeUser,activeProfile:E,allProfiles:e.currentUser.profiles,logoutHandler:e.onLogout,closeNavDropdown:function(){d(!1)},toProfilePage:e.toProfilePage,spotifyToken:e.spotifyToken,editProfile:function(){document.body.style.overflowY="hidden",A(!0)},editAccount:function(){document.body.style.overflowY="hidden",k(!0)},updateCollection:e.updateCollection,currentCollection:e.currentCollection,viewCollection:e.viewCollection})]})]})]})},Z=function(e){var t=e.twitchToken,n=e.setGameDetails,c=(0,s.useState)([]),_=(0,a.Z)(c,2),f=_[0],p=_[1],g=(0,s.useState)("Week"),v=(0,a.Z)(g,2),h=v[0],x=v[1],j=(0,s.useState)(!1),A=(0,a.Z)(j,2),w=A[0],N=A[1],S=(0,s.useState)(!1),b=(0,a.Z)(S,2),k=b[0],P=b[1],y=(0,s.useState)(!0),E=(0,a.Z)(y,2),C=E[0],T=E[1],Z={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,D=new Date,I=Math.floor(new Date(D.getTime()+6048e5)/1e3),R=Math.floor(new Date(new Date(1e3*I).setMonth(new Date(1e3*I).getMonth()+1)).getTime()/1e3),O=Math.floor(new Date(new Date(1e3*R).setMonth(new Date(1e3*R).getMonth()+12)).getTime()/1e3),L=function(e){var t=[],n=[];return e.map((function(e){-1===t.indexOf(e.game.name)&&(t.push(e.game.name),n.push(e))})),n};(0,s.useEffect)((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n,r,a,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=h,e.next="Month"===e.t0?3:"Year"===e.t0?6:9;break;case 3:return n=I,r=R,e.abrupt("break",12);case 6:return n=R,r=O,e.abrupt("break",12);case 9:return n=Math.floor(D.getTime()/1e3),r=I,e.abrupt("break",12);case 12:e.prev=12,a=3,s=0;case 15:if(!(s<a)){e.next=31;break}return e.prev=16,e.next=19,l().post("".concat(Z,"/app/upcoming"),{token:t,currentDate:n,targetDate:r});case 19:return o=e.sent,p(L(o.data)),T(!1),e.abrupt("break",31);case 25:e.prev=25,e.t1=e.catch(16),console.log("Issue fetching data");case 28:s++,e.next=15;break;case 31:e.next=36;break;case 33:e.prev=33,e.t2=e.catch(12),console.log(e.t2.message);case 36:case"end":return e.stop()}}),e,null,[[12,33],[16,25]])})))).apply(this,arguments)}t&&(T(!0),function(){e.apply(this,arguments)}())}),[h,t]);var G=function(e){x(e.target.innerText),N(!1)},M=function(e){var t,n=new Date(e.replace(/-/g,"/")),r=n.getDate();switch(r){case 1:case 21:case 31:t=r+"st";break;case 2:case 22:t=r+"nd";break;case 3:case 23:t=r+"rd";break;default:t=r+"th"}return["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+t+", "+n.getFullYear()};return(0,u.jsxs)("div",{onMouseOver:function(){return P(!0)},onMouseOut:function(){return P(!1)},className:"main_row",children:[(0,u.jsxs)("div",{className:"main_row__filters",onMouseLeave:function(){return N(!1)},children:[(0,u.jsx)("h2",{children:"Coming Soon"}),(0,u.jsxs)("p",{className:"filters_filter",onMouseOver:function(){return N(!0)},children:[h," ",(0,u.jsx)(m.$Pg,{size:10,className:w?"arrow_active":"arrow"})]})," ",w&&(0,u.jsx)("div",{className:"filter_options",children:(0,u.jsxs)("ul",{children:[(0,u.jsx)("li",{style:{backgroundColor:"Week"==h?"white":"",color:"Week"==h?"black":""},onClick:G,children:"Week"}),(0,u.jsx)("li",{style:{backgroundColor:"Month"==h?"white":"",color:"Month"==h?"black":""},onClick:G,children:"Month"}),(0,u.jsx)("li",{style:{backgroundColor:"Year"==h?"white":"",color:"Year"==h?"black":""},onClick:G,children:"Year"})]})})]}),(0,u.jsxs)("div",{className:"main_row__row_posters",children:[f&&!C&&f.map((function(e,t){var r;return(0,u.jsxs)("div",{className:"main_row__poster_container ".concat(k&&"dimmed"),onClick:function(){return n(e.game)},children:[(0,u.jsx)("h4",{className:"main__poster_released",children:M(e.human)}),(0,u.jsx)("img",{className:"main_poster",src:"//images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(r=e.game.cover)||void 0===r?void 0:r.image_id,".jpg"),alt:e.name},e.id)]},e.id)})),C&&(0,u.jsx)("div",{className:"main_row__loading_container",children:(0,r.Z)(Array(4)).map((function(e,t){return(0,u.jsx)("div",{className:"main_row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))})]})]})},D=function(e){var t=e.twitchToken,n=e.setGameDetails,r=(0,s.useState)([]),c=(0,a.Z)(r,2),d=c[0],m=c[1],_=(0,s.useState)(!1),f=(0,a.Z)(_,2),p=f[0],g=f[1],v={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,h=Math.floor((new Date).getTime()/1e3),x=JSON.parse(sessionStorage.getItem("trending"));return(0,s.useEffect)((function(){if(t){if(x&&x.length>0)return m(x),void g(!1);!function(){e.apply(this,arguments)}()}function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,n=[],e.next=5,l().post("".concat(v,"/app/trending"),{token:t,currentDate:h});case 5:if(r=e.sent,console.log(r),!r.data.message){e.next=10;break}return localStorage.removeItem("twitch_auth"),e.abrupt("return");case 10:return a=new Set,r.data.filter((function(e){return!a.has(e.game.id)&&a.add(e.game.id).add(e.game)})),a.forEach((function(e){return"object"==typeof e&&n.push(e)})),n.sort((function(e,t){return t.release_dates.findLast((function(e){return e.date}))-e.release_dates.findLast((function(e){return e.date}))||t.hypes-e.hypes})),m(n.slice(0,10)),sessionStorage.setItem("trending",JSON.stringify(n.slice(0,10))),g(!1),e.abrupt("return",r);case 20:e.prev=20,e.t0=e.catch(1),console.log(e.t0);case 23:g(!1);case 24:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}}),[t]),p?null:(0,u.jsxs)("div",{className:"trending_row",children:[(0,u.jsx)("h2",{children:"TRENDING TITLES"}),(0,u.jsx)("div",{className:"trending_row__posters",children:d.map((function(e,t){var r;return(0,u.jsx)(s.Fragment,{children:(0,u.jsxs)("div",{className:"trending_row__poster_wrapper",children:[(0,u.jsx)("div",{className:"trending_row__rank",children:t+1}),(0,u.jsxs)("div",{className:"trending_row__poster_container",style:{marginLeft:9==t?"160px":0==t&&"65px"},onClick:function(){return n(e)},children:[" ",!p&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("img",{loading:"lazy",className:"trending_row__poster",src:"https://images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(r=e.cover)||void 0===r?void 0:r.image_id,".jpg"),alt:e.name})})]})]})},e.name)}))})]})},I=(n(5850),function(e){var t=e.twitchToken,n=(e.setGameDetails,(0,s.useState)([])),r=(0,a.Z)(n,2),c=r[0],l=(r[1],(0,s.useState)(!1)),u=(0,a.Z)(l,2),d=(u[0],u[1]);(0,s.useEffect)((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.abrupt("return");case 5:e.prev=5,e.t0=e.catch(1),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[1,5]])})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]);return null===c||void 0===c||c.sort((function(e,t){return e.rating_count>t.rating_count?-1:t.rating_count>e.rating_count?1:0})),""}),R=n(4544);var O=new Date,L=(Math.floor(O.getTime()/1e3),[{requestId:"fetchAdventureTitles",genreId:31,title:"ACTION/ADVENTURE"},{requestId:"fetchArcadeTitles",genreId:33,title:"ARCADE"},{requestId:"fetchMusicTitles",genreId:7,title:"MUSIC"},{requestId:"fetchHackTitles",genreId:25,title:"HACK/SLASH"},{requestId:"fetchFightingTitles",genreId:4,title:"FIGHTING"},{requestId:"fetchIndieTitles",genreId:32,title:"INDIE"},{requestId:"fetchMassivelyMultiplayerTitles",genreId:36,title:"MOBA"},{requestId:"fetchPlatformerTitles",genreId:8,title:"PLATFORMER"},{requestId:"fetchPuzzleTitles",genreId:9,title:"PUZZLE"},{requestId:"fetchRacingTitles",genreId:10,title:"RACING"},{requestId:"fetchRPGTitles",genreId:12,title:"RPG"},{requestId:"fetchShooterTitles",genreId:5,title:"SHOOTER"},{requestId:"fetchSimulationTitles",genreId:13,title:"SIMULATION"},{requestId:"fetchSportsTitles",genreId:14,title:"SPORTS"},{requestId:"fetchStrategy",genreId:15,title:"STRATEGY"}]);var G=(0,s.lazy)((function(){return Promise.all([n.e(490),n.e(858)]).then(n.bind(n,6818))})),M=(0,s.lazy)((function(){return n.e(37).then(n.bind(n,5872))})),F=(0,s.lazy)((function(){return Promise.all([n.e(598),n.e(331)]).then(n.bind(n,1403))})),U=(window.location.search.split("?")[1],function(e){var t=e.currentUser,n=e.twitchToken,c=e.currentProfile,m=e.currentCollection,_=e.userNotes,f=e.updateCollection,p=e.selectProfile,g=e.updateGameStatus,v=e.fetchGame,h=e.logoutUser,j=e.gameStatus,A=e.resetGameStatus,N=e.changeProfile,S=e.spotifyToken,b=e.refreshSpotifyToken,k=function(){var e=localStorage.getItem("twitch_auth"),t=(0,s.useState)([]),n=(0,a.Z)(t,2),r=n[0],c=n[1],u=(0,s.useState)(!0),d=(0,a.Z)(u,2),m=d[0],_=d[1],f={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL;return new Date,(0,s.useEffect)((function(){var t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(L.map((function(t){return l().post("".concat(f,"/app/game_genre"),{token:e,genreId:t.genreId,genreTitle:t.title})})));case 2:return n=t.sent,console.log(n),t.next=6,l().get("".concat(f,"/app/get_genres"));case 6:return r=t.sent,c(r.data[0].genres_list),_(!1),t.abrupt("return",r.data);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),{genreGamesList:r,isLoading:m}}(),P=(0,s.useState)(!1),y=(0,a.Z)(P,2),E=y[0],C=(y[1],(0,s.useState)({status:"",message:""})),O=(0,a.Z)(C,2),U=O[0],B=O[1],H=(0,s.useState)(null),K=(0,a.Z)(H,2),W=K[0],z=K[1],q=(0,s.useState)(!1),V=(0,a.Z)(q,2),Y=V[0],Q=V[1],J=(0,s.useState)(),X=(0,a.Z)(J,2),$=X[0],ee=(X[1],(0,s.useState)(!1)),te=(0,a.Z)(ee,2),ne=te[0],re=te[1],ae=(0,s.useState)(null),se=(0,a.Z)(ae,2),ie=se[0],oe=se[1],ce=(0,s.useState)(!1),le=(0,a.Z)(ce,2),ue=(le[0],le[1],(0,s.useState)(null)),de=(0,a.Z)(ue,2),me=de[0],_e=de[1],fe=(0,s.useState)(null),pe=(0,a.Z)(fe,2),ge=pe[0],ve=pe[1];(0,s.useEffect)((function(){ie||(document.body.style.overflow="auto")}),[]);var he=function(){document.body.style.overflow="auto",oe(null)},xe=function(e){z(e)};if(c)return null!==ge?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(s.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:[(0,u.jsx)(G,{setNotification:function(e,t){return B({status:e,message:t})},game:ge,closeDetails:function(){return ve(null)},twitchToken:n,updateGameStatus:function(e,t){return g(e,t)},activeProfile:c,currentCollection:m}),(0,u.jsx)(M,{notification:U,displayNotification:E,hideNotification:function(){B({message:"",status:""})}})]})}):ne?(0,u.jsx)(s.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:(0,u.jsx)(F,{collection:m,activeProfile:c,backToHome:function(){return re(!1)},currentTrack:W,playTrack:xe,isPlaying:Y,pausePlayback:function(){return Q(!1)},resumePlayback:function(){return Q(!0)},spotifyToken:S,updateGameStatus:function(e,t){return g(e,t)},updateCollection:f,userNotes:_,trackUri:null===W||void 0===W?void 0:W.uri,refreshSpotifyToken:b})}):(0,u.jsxs)("div",{className:"App",children:[(0,u.jsx)(T,{currentUser:t,activeProfile:c,changeUser:N,onLogout:h,fetchSubmittedGame:v,toProfilePage:function(){localStorage.removeItem("profile"),window.location.reload()},selectProfile:p,spotifyToken:S,twitchToken:n,saveEdit:function(){return console.log("saving edit")},updateCollection:f,currentCollection:m,viewCollection:function(){return re(!0)}}),(0,u.jsx)(w,{setGameDetails:function(e){return ve(e)},addGame:function(e){return g("ADD",e)},activeProfile:c}),(0,u.jsx)(Z,{twitchToken:n,setGameDetails:function(e){return ve(e)}}),(0,u.jsx)(I,{twitchToken:n,setGameDetails:function(e){return ve(e)}}),(0,u.jsx)(D,{twitchToken:n,setGameDetails:function(e){return ve(e)}}),ie&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("h1",{className:"row__preview_close",onClick:he,children:"X"})}),(0,u.jsx)("div",{className:"".concat(null!==ie?"game_preview__modal":"")}),k.genreGamesList.length>0?k.genreGamesList.map((function(e){return(0,u.jsx)(x,{activeProfile:c,spotifyToken:S,genreDetails:Object.entries(e),playTrack:xe,currentTrack:W,setGameDetails:function(e){return ve(e)},resumePlayback:function(e){return Q(!0)},pausePlayback:function(e){return Q(!1)},isPlaying:Y,currentGameOpen:ie,openGame:function(e){return function(e){console.log(e),oe(e.id),document.body.style.overflow="hidden"}(e)},closeGameWindow:he,updateGameStatus:function(e,t){return g(e,t)},setNotification:function(e,t){return B({status:e,message:t})},loading:$,hoverGame:function(e){return _e(e)},hoverAway:function(){return _e(null),void A()},currentHover:me,currentCollection:m,gameStatus:j},Object.keys(e))})):(0,u.jsx)("div",{className:"row__loading_container",children:(0,r.Z)(Array(10)).map((function(e,t){return(0,u.jsx)("div",{className:"row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))}),S&&(0,u.jsx)(R.Z,{spotifyToken:S,playAudio:Y,beginPlayback:function(e){return Q(!0)},pausePlayback:function(e){return Q(!1)},trackUri:null===W||void 0===W?void 0:W.uri,refreshSpotifyToken:b}),(0,u.jsx)(M,{notification:U,displayNotification:E,hideNotification:function(){B({message:"",status:""})}})]})}),B=(0,s.memo)(U)},6797:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(4165),a=n(5861),s=n(9439),i=n(2791),o=(n(9583),n(184)),c=function(e){var t=e.list,n=e.selectGame;return(0,o.jsx)("div",{className:"search_list_container",children:(0,o.jsx)("ul",{className:"search_list",children:t.slice(0,5).map((function(e){return(0,o.jsxs)("li",{className:"search_list_item",onClick:function(){return n(e)},children:[(0,o.jsx)("img",{className:"item_thumbnail",src:e.cover.url}),(0,o.jsx)("p",{className:"item_title",children:e.name})]})}))})})},l=n(4569),u=n.n(l),d=n(6856),m=n(4257),_=n(6355),f=function(e){document.body.style.overflow="hidden";var t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,n=e.currentProfile,l=n.isAdmin,f=(0,i.useState)(!1),p=(0,s.Z)(f,2),g=p[0],v=p[1],h=(0,i.useState)(!1),x=(0,s.Z)(h,2),j=x[0],A=x[1],w=localStorage.getItem("profile")||n.name,N=(0,i.useState)(w),S=(0,s.Z)(N,2),b=S[0],k=S[1],P=(0,i.useRef)(""),y=(0,i.useState)(n.favorite_game),E=(0,s.Z)(y,2),C=E[0],T=E[1],Z=(0,i.useState)(0),D=(0,s.Z)(Z,2),I=D[0],R=D[1],O=(0,i.useState)(""),L=(0,s.Z)(O,2),G=L[0],M=L[1],F=(0,i.useState)([]),U=(0,s.Z)(F,2),B=U[0],H=U[1],K=(0,i.useRef)(""),W=(0,i.useState)(n.favorite_console),z=(0,s.Z)(W,2),q=z[0],V=z[1],Y=(0,i.useState)(""),Q=(0,s.Z)(Y,2),J=(Q[0],Q[1]),X=(0,i.useState)(n.avatar),$=(0,s.Z)(X,2),ee=$[0],te=$[1],ne=(0,i.useState)(null),re=(0,s.Z)(ne,2),ae=(re[0],re[1],(0,i.useRef)("")),se=(0,i.useState)(""),ie=(0,s.Z)(se,2),oe=ie[0],ce=ie[1],le=(0,i.useState)(!1),ue=(0,s.Z)(le,2),de=ue[0],me=ue[1],_e=(0,i.useState)(!1),fe=(0,s.Z)(_e,2),pe=fe[0],ge=fe[1],ve=(0,i.useState)(!1),he=(0,s.Z)(ve,2),xe=he[0],je=he[1],Ae=(0,i.useState)(n.color),we=(0,s.Z)(Ae,2),Ne=we[0],Se=we[1],be=(0,i.useRef)(""),ke=(0,i.useState)(!1),Pe=(0,s.Z)(ke,2),ye=Pe[0],Ee=Pe[1],Ce=(0,i.useState)(n.favorite_genre),Te=(0,s.Z)(Ce,2),Ze=Te[0],De=Te[1];(0,i.useEffect)((function(){if(""!=C&&C!=n.favorite_game&&!j){var s=setTimeout((function(){A(!0);var n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u().post("".concat(t,"/app/search_game"),{gameName:C,token:e.twitchToken});case 2:a=n.sent,H(a.data),A(!1);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),500);return function(){return clearTimeout(s)}}H([])}),[C]),(0,i.useEffect)((function(){var e=function(e){27===e.keyCode&&je(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,i.useEffect)((function(){function e(e){be.current&&!be.current.contains(e.target)&&Ee(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[be]);var Ie=function(){var s=(0,a.Z)((0,r.Z)().mark((function a(){var s;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return v(!0),r.prev=1,r.next=4,u().delete("".concat(t,"/app/delete_profile"),{data:{email:e.userEmail,name:n.name}});case 4:s=r.sent,e.saveEdit(s.data.response),e.viewAllProfiles(),r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),console.log(r.t0),r.abrupt("return",r.t0);case 13:v(!1);case 14:case"end":return r.stop()}}),a,null,[[1,9]])})));return function(){return s.apply(this,arguments)}}(),Re=function(){var s=(0,a.Z)((0,r.Z)().mark((function a(s,i){var o,c;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(v(!0),(o=new FormData).append("email",e.userEmail),o.append("name",n.name),"file"!=i){r.next=20;break}return o.append("avatar",s.target.files[0]),r.prev=6,r.next=9,u().post("".concat(t,"/app/update_avatar_file"),o);case 9:r.sent,te(URL.createObjectURL(s.target.files[0])),r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(6),console.log(r.t0),r.abrupt("return",r.t0);case 17:v(!1),r.next=33;break;case 20:return c={email:e.userEmail,name:n.name,avatar:oe},r.prev=21,r.next=24,u().post("".concat(t,"/app/update_avatar_link"),c);case 24:r.sent,te(oe),r.next=32;break;case 28:return r.prev=28,r.t1=r.catch(21),console.log(r.t1),r.abrupt("return",r.t1);case 32:v(!1);case 33:case"end":return r.stop()}}),a,null,[[6,13],[21,28]])})));return function(e,t){return s.apply(this,arguments)}}(),Oe=function(){var s=(0,a.Z)((0,r.Z)().mark((function a(s){var i,o;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s.preventDefault(),v(!0),i={email:e.userEmail,originalName:n.name,newName:b.trim(),newColor:Ne,favoriteGenre:Ze?Ze.trim():"Action",favoriteGame:C?C.trim():"None",gameId:I,imageURL:G,favoriteConsole:q?q.trim():"None",twitchToken:e.twitchToken},r.prev=3,r.next=6,u().post("".concat(t,"/app/update_user_profile"),i);case 6:o=r.sent,localStorage.setItem("user",o.data.response.user.email),localStorage.setItem("profile",o.data.response.profile.name),J(o.data.message),e.saveEdit(o.data.response),e.viewAllProfiles(),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(3),J(r.t0);case 17:v(!1);case 18:case"end":return r.stop()}}),a,null,[[3,14]])})));return function(e){return s.apply(this,arguments)}}();return g?(0,o.jsxs)("div",{className:"profile_edit__container",children:[(0,o.jsx)("div",{className:"profile_edit__header",children:(0,o.jsx)("h3",{children:"GAMEFLIX"})}),(0,o.jsx)("div",{className:"profile_edit__form_wrapper",children:(0,o.jsx)("div",{className:"profile__loading",children:(0,o.jsx)("div",{className:"profile__loading_spinner"})})})]}):(0,o.jsxs)("div",{className:"profile_edit__container",children:[(0,o.jsx)("div",{className:"profile_edit__header",children:(0,o.jsx)("h3",{children:"GAMEFLIX"})}),(0,o.jsxs)("div",{className:"profile_edit__form_wrapper",children:[(0,o.jsx)("h3",{children:!0!==n?"Edit Profile":"Create Profile"}),(0,o.jsxs)("div",{className:"form_container ".concat(pe&&"avatar_select_container"),children:[(0,o.jsxs)("div",{style:{paddingTop:pe&&"10px"},className:"form_avatar_container",children:[(0,o.jsx)("img",{className:"current_avatar ".concat(pe&&"avatar_select"),style:{backgroundColor:Ne||n.color},src:ee}),!pe&&(0,o.jsx)("span",{className:"current_avatar_edit",onClick:function(){return ge(!0)},children:(0,o.jsx)(d.zmo,{style:{height:"100%"}})})]}),(0,o.jsxs)("div",{className:"form_right",children:[!pe&&(0,o.jsxs)("form",{className:"profile_edit__form",children:[(0,o.jsx)("input",{className:"name_input",onChange:function(e){return k(e.target.value)},value:b,autoFocus:!0}),(0,o.jsx)("p",{children:"Color"}),(0,o.jsx)("input",{className:"color_input",style:{color:Ne},onChange:function(e){return Se(e.target.value)},value:Ne}),(0,o.jsx)("button",{type:"button",onClick:function(){return je(!xe)},style:{backgroundColor:Ne}}),xe&&(0,o.jsx)(m.xS,{color:Ne,onChangeComplete:function(e){return Se(e.hex)},className:"profile_color_palette"})]}),(0,o.jsxs)("div",{className:"form_personal ".concat(pe&&"personal_avatar"),children:[(0,o.jsx)("h4",{style:{textAlign:pe?"center":"left"},children:pe?"Current":"Your Playstyle"}),pe&&(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"upload_avatar_actions ".concat(de&&"img_link_actions"),children:[(0,o.jsx)("input",{className:"upload_file_input",type:"file",accept:"image/*",style:{display:"none"},multiple:!1,ref:ae,onChange:function(e){return Re(e,"file")}}),!de&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:function(){return ae.current.click()},children:"Upload"}),(0,o.jsx)("p",{children:"OR"})]}),(0,o.jsx)("button",{onClick:function(e){de?Re(e,"link"):me(!0)},children:de?"Submit":"Enter link"}),de&&(0,o.jsx)("input",{className:"console_input ".concat(pe&&"img_input"),placeholder:"Enter link to image or gif",value:oe,onChange:function(e){return ce(e.target.value)}})]})}),!pe&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"form_personal_title",children:"Favorite Title"}),(0,o.jsx)("input",{ref:P,value:C,className:"title_input",onBlur:function(){B.length},onChange:function(e){P.current=C,T(e.target.value)}}),j&&(0,o.jsx)("div",{className:"profile__search_loading",children:(0,o.jsx)("div",{className:"profile__search_loading_spinner"})}),B.length>0&&""!==C&&(0,o.jsx)(c,{list:B,selectGame:function(e){var t;T(e.name),R(e.id),M("//images.igdb.com/igdb/image/upload/t_cover_big/".concat(null===(t=e.cover)||void 0===t?void 0:t.image_id,".jpg")),H([])}})]}),!pe&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"form_personal_console",children:"Favorite Console"}),(0,o.jsx)("input",{ref:P,value:q,onChange:function(e){K.current=q,V(e.target.value)},className:"console_input ".concat(pe&&"img_input"),placeholder:pe?"https://www.example.com":""})]}),(0,o.jsxs)("div",{className:"genre_dropdown",children:[!pe&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"form_personal_genre",children:"Favorite Genre"}),(0,o.jsxs)("button",{onClick:function(){return Ee(!ye)},children:[void 0!==Ze?"".concat(Ze):"Action"," ",(0,o.jsx)(_.iUH,{className:"genre_arrow"})]})]}),ye&&(0,o.jsx)("div",{ref:be,className:"genre_dropdown_content",children:["Action","Adventure","Arcade","Card & Board","Family","Fighting","Indie","MMO (Massive Multiplayer)","Platformer","Puzzle","Racing","RPG","Shooter","Sports","Strategy"].map((function(e){return(0,o.jsx)("span",{onClick:function(){return function(e){De(e),Ee(!1)}(e)},children:e},e)}))})]})]})]})]}),(0,o.jsxs)("div",{className:"form_actions",children:[!pe&&(0,o.jsx)("button",{className:"save_btn",onClick:Oe,children:"Save"}),(0,o.jsx)("button",{className:"cancel_btn",onClick:function(){pe?(ge(!1),me(!1)):e.viewAllProfiles()},children:pe?"Back":"Cancel"}),!l&&(0,o.jsx)("button",{className:"delete_profile_btn justify-start",onClick:Ie,children:"Delete Profile"})]})]})]})}},4544:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(2791),a=n(1293),s=n(6234),i=n.n(s),o=n(184),c=new(i())({clientId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SPOTIFY_CLIENT_ID}),l=function(e){var t=e.trackUri,n=e.playAudio,s=e.beginPlayback,i=e.pausePlayback,l=e.spotifyToken,u=e.refreshSpotifyToken;if((0,r.useEffect)((function(){c.setAccessToken(l)}),[l]),(0,r.useEffect)((function(){s()}),[t]),l)return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"playback_container",children:(0,o.jsx)(a.ZP,{token:l,callback:function(e){e.error&&(console.log("ERROR"),u(l)),e.isPlaying||i()},uris:t?[t]:[],play:n,styles:{color:"white",bgColor:"rgba(0,0,0,0.9)",trackArtistColor:"white"}})})})}},9583:function(){},3676:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_E.9cf6d7f3f8e673367d2a.png"},3224:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_M.37c27952605b5ceea210.png"},1879:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_RP.7e329028594a72ed21ee.png"},1784:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_T.5f77aabf3318dacd4cfc.png"},6475:function(e,t,n){"use strict";e.exports=n.p+"static/media/basic_avatar.9eeabb71d2fe70b7ff75.png"},4654:function(){}}]);
//# sourceMappingURL=204.623342e9.chunk.js.map