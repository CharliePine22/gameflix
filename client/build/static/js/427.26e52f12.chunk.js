"use strict";(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[427],{1403:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var s=n(4165),a=n(5861),i=n(3433),r=n(9439),o=n(2791),l=n(6355),c=n(458),u=n(4045),d=n(4569),m=n.n(d),h=n(4942),_=n(1413),p=n(3853),f=(n(5320),function(){var e=(0,o.useState)({x:0,y:0}),t=(0,r.Z)(e,2),n=t[0],s=t[1],a=(0,o.useState)(!1),i=(0,r.Z)(a,2),l=i[0],c=i[1],u=(0,o.useState)(!1),d=(0,r.Z)(u,2),m=d[0],h=d[1],_=(0,o.useCallback)((function(e){e.preventDefault(),"user_game_banner_img"!==e.target.className||l||(s({x:e.offsetX,y:e.pageY}),c(!0),h(!1)),"title_list__item"===e.target.className&&(s({x:e.movementX+5,y:e.y+20}),h(!0),c(!1))}),[s]),p=(0,o.useCallback)((function(){m&&h(!1),l&&c(!1)}),[m,l]);return(0,o.useEffect)((function(){return document.addEventListener("click",p),document.addEventListener("contextmenu",_),function(){document.removeEventListener("click",p),document.removeEventListener("contextmenu",_)}})),{anchorPoint:n,showTitleMenu:m,showBannerMenu:l,resetContext:function(){c(!1),h(!1)}}}),x=n(8820),g=n(6856),v=n(9126),j=n(184),N=function(e){var t=e.note,n=e.closeNote,s=e.updateNote,a=e.deleteNote,i=(0,o.useState)(t.note),l=(0,r.Z)(i,2),c=l[0],u=l[1];return(0,j.jsxs)("div",{className:"note_details__container",children:[(0,j.jsx)("span",{className:"note_details__date",children:t.date}),(0,j.jsx)(v.And,{className:"note_details__back_icon",onClick:n}),(0,j.jsxs)("div",{className:"note_details__details",children:[(0,j.jsx)("h4",{className:"note_details_note",children:"Note Details"}),(0,j.jsx)("textarea",{value:c,onChange:function(e){return u(e.target.value)},className:"note_details__editor"})]}),(0,j.jsxs)("div",{className:"note_details__actions",children:[(0,j.jsx)("button",{onClick:function(){return s(t,c)},children:"Save Note"}),(0,j.jsx)("button",{onClick:function(){return a(t.note)},children:"Delete Note"})]})]})},y=new Date,b=y.getFullYear(),k=y.getMonth()+1,w=y.getDate();w<10&&(w="0"+w),k<10&&(k="0"+k);var C=k+"/"+w+"/"+b,S=function(e){var t,n,i,c,u,d,h=e.profile,_=e.windowViewHandler,p=e.viewStatus,f=e.gameNotes,v="https://gameflixx.netlify.app",y=localStorage.getItem("user");console.log(f);var b=(0,o.useState)(""),k=(0,r.Z)(b,2),w=k[0],S=k[1],Z=(0,o.useState)(!1),I=(0,r.Z)(Z,2),E=I[0],A=I[1],D=(0,o.useState)(""),P=(0,r.Z)(D,2),T=P[0],L=P[1],M=(0,o.useState)(!1),B=(0,r.Z)(M,2),O=B[0],G=B[1],F=(0,o.useState)(""),U=(0,r.Z)(F,2),z=U[0],H=U[1],R=(0,o.useState)(null),Y=(0,r.Z)(R,2),W=Y[0],K=Y[1],V=null===f||void 0===f||null===(t=f.tabs)||void 0===t?void 0:t.filter((function(e){return e.tabName==w}))[0],X=(0,o.useRef)(null),Q=(0,o.useRef)(null),q=(0,o.useRef)(null),J=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().post("".concat(v,"/notes/create_note"),{email:y,profile:h.name});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){h.notesId?S(V):J()}),[f,w]),(0,o.useEffect)((function(){var e=function(e){E&&13==e.keyCode&&console.log(T)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,o.useEffect)((function(){var e;f&&S(null===f||void 0===f||null===(e=f.tabs[0])||void 0===e?void 0:e.tabName)}),[f]),(0,o.useEffect)((function(){null===W&&(Q.current.focus(),A(!1),H(""),L(""))}),[Q,V]),(0,o.useEffect)((function(){var e;return null===X||void 0===X||null===(e=X.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),function(){return clearTimeout($)}}),[]);var $,ee=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m().put("".concat(v,"/notes/update_notes"),{userNotesId:h.notesId,noteId:f.id,notes:f});case 4:return t=e.sent,console.log(t),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){E?(V.tabName=Q.current.innerText,ee(),S(Q.current.innerText),A(!1)):A(!0)},ne=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=T){e.next=3;break}return e.abrupt("return");case 3:f.tabs.push({tabName:T,notes:[]}),S(T),ee(),L(""),G(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:"user_notes__wrapper ".concat(!p.notes&&"minimized_notes"),children:[(0,j.jsx)(l.iUH,{style:{transform:p.notes?"rotate(180deg)":"rotate(0)",display:W&&"none"},className:"user_game__minimize_icon",onClick:function(){return _("notes")}}),W?(0,j.jsx)(N,{note:W,closeNote:function(){return K(null)},updateNote:function(e,t){console.log(e),e.note=t,e.date=C,ee(),K(null)},deleteNote:function(e){var t=V.notes.filter((function(t){return t.note!==e}));V.notes=t,ee(),K(null)}}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("h4",{contentEditable:E,suppressContentEditableWarning:!0,onBlur:te,onKeyPress:function(e){e.preventDefault(),console.log(e.currentTarget),"Enter"===e.key&&te()},children:[(0,j.jsx)("p",{ref:Q,style:{borderBottom:E?"2px solid #9147ff":"2px solid transparent",userSelect:E?"auto":"none",padding:"0px 6px",transition:"all 200ms"},children:w})," ",(0,j.jsx)(g.rnx,{className:"edit_tab_icon",onClick:function(){return A(!E)}})," "]}),(0,j.jsx)("div",{className:"user_notes__header",children:(0,j.jsxs)("ul",{className:"user_notes__tabs",children:[null===f||void 0===f?void 0:f.tabs.map((function(e){return(0,j.jsx)("li",{className:"user_notes__tab",onClick:function(){return S(e.tabName)},style:{borderBottom:w==e.tabName&&"1px solid transparent"},children:e.tabName},e.tabName)})),(0,j.jsx)("li",{className:"user_notes__tab ".concat(O?"add_tab":"new_tab"),onClick:function(e){e.stopPropagation(),G(!0),$=setTimeout((function(){return q.current.scrollIntoView({behavior:"smooth"})}),150)},children:O?(0,j.jsxs)("div",{className:"new_tab__container",children:[(0,j.jsx)("form",{onSubmit:ne,children:(0,j.jsx)("input",{value:T,onChange:function(e){return L(e.target.value)}})}),(0,j.jsx)("p",{onClick:function(e){e.stopPropagation(),G(!1)},children:"X"})]}):(0,j.jsx)(x.Lfi,{})}),(0,j.jsx)("div",{ref:q})]})})]}),(0,j.jsx)("div",{className:"user_notes__notes_wrapper",children:(0,j.jsx)("ul",{className:"user_notes__notes",children:(null===f||void 0===f||null===(n=f.tabs)||void 0===n||null===(i=n.filter((function(e){return e.tabName==w}))[0])||void 0===i||null===(c=i.notes)||void 0===c?void 0:c.length)>0?null===f||void 0===f||null===(u=f.tabs)||void 0===u||null===(d=u.filter((function(e){return e.tabName==w}))[0])||void 0===d?void 0:d.notes.map((function(e){return(0,j.jsx)("li",{className:"user_note",onClick:function(){return function(e){K(e),G(!1),A(!1)}(e)},children:e.note},e.note)})):(0,j.jsx)("p",{className:"no_notes_msg",children:"No Notes"})})}),(0,j.jsx)("div",{ref:X,style:{width:"10px",marginLeft:"5px"}}),(0,j.jsx)("div",{className:"user_notes__form_container",style:{display:"".concat(p.notes?"block":"none")},children:(0,j.jsx)("form",{className:"user_notes__form",onSubmit:function(e){e.preventDefault(),""!=z&&(V.notes.push({id:V.notes.length+1,note:z,date:C}),ee(),H(""))},children:(0,j.jsx)("input",{value:z,onChange:function(e){return H(e.target.value)},className:"user_notes__input",placeholder:"I think Clark Kent is Batman"})})})]})]})},Z=new Date,I=Z.getFullYear(),E=Z.getMonth()+1,A=Z.getDate();A<10&&(A="0"+A),E<10&&(E="0"+E);var D=E+"/"+A+"/"+I,P=function(e){var t=e.game,n=e.activeProfile,i=e.closeStats,c=(e.setNotification,e.setCurrentGame),u=e.updateCollection,d=e.userNotes,x=f(),g=x.anchorPoint,v=x.showBannerMenu,N=x.resetContext,y=(0,o.useState)({achievements:!0,notes:!0,trophies:!0}),b=(0,r.Z)(y,2),k=b[0],w=b[1],C=(0,o.useState)(t.achievements),Z=(0,r.Z)(C,2),I=Z[0],E=Z[1],A=(0,o.useState)(t.trophies),P=(0,r.Z)(A,2),T=P[0],L=P[1],M=(0,o.useState)("unlocked"),B=(0,r.Z)(M,2),O=B[0],G=B[1],F=(0,o.useState)("unlocked"),U=(0,r.Z)(F,2),z=U[0],H=U[1],R=(0,o.useState)(null),Y=(0,r.Z)(R,2),W=Y[0],K=Y[1],V=(0,o.useState)(Math.floor(t.playtime/60)),X=(0,r.Z)(V,2),Q=X[0],q=X[1],J=(0,o.useState)(!1),$=(0,r.Z)(J,2),ee=$[0],te=$[1],ne=(0,o.useState)(t.user_rating),se=(0,r.Z)(ne,2),ae=se[0],ie=se[1],re=(0,o.useState)(!1),oe=(0,r.Z)(re,2),le=oe[0],ce=oe[1],ue=(0,o.useState)(!1),de=(0,r.Z)(ue,2),me=de[0],he=de[1],_e=(0,o.useState)(""),pe=(0,r.Z)(_e,2),fe=pe[0],xe=pe[1],ge=(0,o.useState)(t.status),ve=(0,r.Z)(ge,2),je=ve[0],Ne=ve[1],ye=(0,o.useState)(!1),be=(0,r.Z)(ye,2),ke=be[0],we=be[1],Ce="https://gameflixx.netlify.app",Se=localStorage.getItem("steamID"),Ze=localStorage.getItem("user"),Ie=Math.floor((null===T||void 0===T?void 0:T.filter((function(e){return 1==e.earned})).length)/(null===T||void 0===T?void 0:T.length)*100),Ee=Math.floor((null===I||void 0===I?void 0:I.filter((function(e){return 1==e.achieved||1==e.earned})).length)/(null===I||void 0===I?void 0:I.length)*100);console.log(d),(0,o.useEffect)((function(){d&&(d.notes_collection.filter((function(e){return e.id==t.id})).length>0?(console.log("WHO"),K(d.notes_collection.filter((function(e){return e.id==t.id}))[0])):(console.log("WHAT"),d.notes_collection.push({id:t.id,tabs:[{tabName:"Notes",notes:[{id:0,note:"These are your notes for ".concat(t.name,"! Click me to edit this or start your own tab by clicking the +!"),date:D}]}]}),K({id:t.id,tabs:[{tabName:"Notes",notes:[{id:0,note:"These are your notes for ".concat(t.name,"! Click me to edit this or start your own tab by clicking the +!"),date:D}]}]})))}),[t,d]),(0,o.useEffect)((function(){var e=function(e){27===e.keyCode&&(ce(!1),we(!1))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,o.useEffect)((function(){if(te(!1),ce(!1),we(!1),Ne(t.status||"BACKLOG"),q(Math.floor(t.playtime/60)),ie(t.user_rating),E(t.achievements),L(t.trophies),Se){var e=function(e,t){var n=[];return t.map((function(t){var s=e.filter((function(e){return e.name==t.displayName}));s.length>0&&(t.achieved=s[0].achieved),n.push(t)})),n.sort((function(e,t){var n=e.displayName.toUpperCase(),s=t.displayName.toUpperCase();return n<s?-1:n>s?1:0})),n.sort((function(e,t){return e.achieved<t.achieved?1:e.achieved>t.achieved?-1:0})),n},i=function(){var i=(0,a.Z)((0,s.Z)().mark((function a(){var i,r,o,l;return(0,s.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,m().get("".concat(Ce,"/steam/get_game_stats"),{params:{gameId:t.id}});case 2:if(i=s.sent,0!=Object.keys(i.data).length){s.next=6;break}return E(null),s.abrupt("return");case 6:if(s.prev=6,t.achievements){s.next=18;break}return s.next=10,m().get("".concat(Ce,"/steam/get_steam_achievements"),{params:{gameId:t.id,steamId:Se}});case 10:return r=s.sent,o=e(r.data.achievements,i.data.availableGameStats.achievements),s.next=14,m().put("".concat(Ce,"/app/update_game_achievements"),{email:Ze,currentProfile:n.name,achievements:o,gameId:t.id});case 14:l=s.sent,c(r.data.response.game),u(r.data.response.profile.collection),E(l.data.response.game.achievements);case 18:s.next=23;break;case 20:s.prev=20,s.t0=s.catch(6),console.log(s.t0);case 23:case"end":return s.stop()}}),a,null,[[6,20]])})));return function(){return i.apply(this,arguments)}}();i()}else console.log("No steam id")}),[t]);var Ae=function(e){if(!e)return"N/A";var t=e.filter((function(e){return 1==e.achieved||1==e.earned})).length;return t+"/"+e.length};var De=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var a,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=20*ae,20*ae>=100&&(a=100),e.prev=2,e.next=5,m().put("".concat(Ce,"/app/update_game_rating"),{email:Ze,currentProfile:n.name,rating:a,gameId:t.id});case 5:i=e.sent,localStorage.setItem("profile",i.data.response.profile.name),c(i.data.response.game),u(i.data.response.profile.collection),ce(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.playtime!=Q){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,m().put("".concat(Ce,"/app/update_game_playtime"),{email:Ze,currentProfile:n.name,playtime:60*Q,gameId:t.id});case 7:a=e.sent,localStorage.setItem("profile",a.data.response.profile.name),c(a.data.response.game),u(a.data.response.profile.collection),te(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(a){var i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().put("".concat(Ce,"/app/update_game_backlog"),{email:Ze,currentProfile:n.name,status:a,gameId:t.id});case 3:i=e.sent,localStorage.setItem("profile",i.data.response.profile.name),c(i.data.response.game),u(i.data.response.profile.collection),we(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Le=function(e){Te(e),we(!1)},Me=function(e){w((0,_.Z)((0,_.Z)({},k),{},(0,h.Z)({},e,!k[e])))},Be=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=fe.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,m().put("".concat(Ce,"/app/update_game_banner"),{email:Ze,currentProfile:n.name,url:fe,gameId:t.id});case 5:a=e.sent,localStorage.setItem("profile",a.data.response.profile.name),c(a.data.response.game),u(a.data.response.profile.collection),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:he(!1),xe("");case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return(0,j.jsxs)("div",{className:"user_game__wrapper",children:[me&&(0,j.jsx)("div",{className:"user_game__modal",children:(0,j.jsxs)("div",{className:"modal_content",children:[(0,j.jsx)("h2",{style:{maxWidth:"75%",textAlign:"center",marginBottom:"25px"},children:"Please enter the link to any image or gif below."}),(0,j.jsxs)("div",{className:"modal_form",style:{width:"100%"},children:[(0,j.jsx)("input",{style:{width:"80%"},value:fe,onChange:function(e){return xe(e.target.value)}}),(0,j.jsx)("button",{onClick:Be,children:"Submit"}),(0,j.jsx)("button",{onClick:function(){return he(!1)},children:"Back"})]})]})}),(0,j.jsxs)("div",{className:"user_game__banner",children:[v&&(0,j.jsxs)("ul",{className:"user_game__banner_context",style:{top:g.y+5,left:g.x},children:[(0,j.jsx)("li",{className:"banner_context__item",onClick:function(e){e.preventDefault(),he(!0),N()},children:"Set Custom Banner"}),(0,j.jsx)("li",{className:"banner_context__item",children:"Set Custom Logo"}),(0,j.jsx)("li",{className:"banner_context__item",children:"Set Default Image"})]}),(0,j.jsx)("div",{className:"user_game__exit",onClick:i,children:"X"}),(0,j.jsx)("img",{className:"user_game_banner_img",src:t.banner_image||t.cover_image.replace("cover_big_2x","1080p_2x")}),(0,j.jsxs)("div",{className:"user_game__current_stats",children:[(0,j.jsxs)("div",{className:"playtime_container",children:[(0,j.jsx)(p.TCC,{className:"playtime_clock_icon"}),(0,j.jsxs)("div",{className:"stats_item",children:[(0,j.jsx)("h3",{style:{color:ee&&"#9147ff"},children:"PLAY TIME"}),(0,j.jsx)("span",{style:{display:ee&&"none"},className:"previous_playtime",onClick:function(){return te(!0)},children:function(e){if(e<=0&&"steam"==t.type)return"Not Started";if(e<=0&&"steam"!==t.type)return"0 hours";var n=e%60,s=Math.floor(e/60);return 0==n?s+" hours":"".concat(s,".").concat(n.toString().padStart(2,"0")," hours")}(t.playtime)}),(0,j.jsx)("input",{type:"number",value:Q,min:"0",onKeyDown:function(e){"Enter"===e.key&&Pe(),"Escape"===e.key&&(te(!1),q(Math.floor(t.playtime/60)))},onChange:function(e){return q(e.target.value)},className:"playtime_input ".concat(ee&&"playtime_focused")})]})]}),(0,j.jsx)("div",{className:"rating_container",children:(0,j.jsxs)("div",{className:"stats_item",children:[(0,j.jsx)("h3",{children:"RATING"}),(0,j.jsxs)("span",{onClick:function(){return ce(!0)},className:"previous_rating",style:{display:le&&"none"},children:[t.user_rating||0,"%"]}),(0,j.jsx)("input",{className:"rating_input",type:"number",min:"1",max:"100",value:t.user_rating||0,onSubmit:De,style:{width:!le&&"0px",display:!le&&"none"}})]})}),(0,j.jsxs)("div",{className:"achievement_count_container",children:[(0,j.jsxs)("div",{className:"stats_item",children:[(0,j.jsx)("h3",{style:{paddingTop:"5px"},children:"STATUS"}),(0,j.jsx)("button",{onClick:function(){return we(!ke)},style:{backgroundColor:"BACKLOG"==je?"dodgerblue":"STARTED"==je?"aqua":"FINISHED"==je?"green":"PLAYING"==je?"pink":"100%"==je?"gold":"ABANDONDED"==je?"red":"grey"},className:"status_btn",children:je})]}),ke&&(0,j.jsx)("div",{className:"backlog_items",children:(0,j.jsxs)("ul",{className:"backlog_items_list",children:[(0,j.jsx)("li",{style:{backgroundColor:"BACKLOG"==t.status&&"#9147ff",color:"BACKLOG"==t.status&&"white"},className:"backlog_items_item",onClick:function(){Le("BACKLOG")},children:"Backlog"}),(0,j.jsx)("li",{style:{backgroundColor:"STARTED"==t.status&&"#9147ff",color:"STARTED"==t.status&&"white"},className:"backlog_items_item",onClick:function(){Le("STARTED")},children:"Started"}),(0,j.jsx)("li",{style:{backgroundColor:"PLAYING"==t.status&&"#9147ff",color:"PLAYING"==t.status&&"white"},className:"backlog_items_item",onClick:function(){Le("PLAYING")},children:"Currently Playing"}),(0,j.jsx)("li",{style:{backgroundColor:"FINISHED"==t.status&&"#9147ff",color:"FINISHED"==t.status&&"white"},className:"backlog_items_item",onClick:function(){Le("FINISHED")},children:"Finished"}),(0,j.jsx)("li",{style:{backgroundColor:"100%"==t.status&&"#9147ff",color:"100%"==t.status&&"white"},className:"backlog_items_item",onClick:function(){Le("100%")},children:"100% Completed"}),(0,j.jsx)("li",{style:{backgroundColor:"ABANDONDED"==t.status&&"#9147ff",color:"ABANDONDED"==t.status&&"white"},className:"backlog_items_item",onClick:function(){Le("ABANDONDED")},children:"Abandonded"}),(0,j.jsx)("li",{style:{backgroundColor:"NOT OWNED"==t.status&&"#9147ff",color:"NOT OWNED"==t.status&&"white"},className:"backlog_items_item",onClick:function(){Le("NOT OWNED")},children:"Not Owned"})]})})]}),(0,j.jsx)("div",{className:"music_icon_container",children:(0,j.jsxs)("div",{className:"stats_item",style:{alignItems:"center"},children:[(0,j.jsx)("h3",{children:"MUSIC"}),(0,j.jsx)(l.HcQ,{className:"music_icon"})]})})]})]}),(0,j.jsx)("div",{className:"user_game__data_wrapper",children:(0,j.jsxs)("div",{className:"user_game__data",children:[I&&(0,j.jsx)("div",{className:"user_game__achievements_wrapper ".concat(!k.achievements&&"minimized"),children:(0,j.jsxs)("div",{className:"user_game__achievements",children:[(0,j.jsxs)("div",{className:"user_game__achievements_banner",children:[(0,j.jsx)(l.iUH,{style:{transform:k.achievements?"rotate(180deg)":"rotate(0)"},className:"user_game__minimize_icon",onClick:function(){return Me("achievements")}}),100===Ee&&(0,j.jsx)(l.PIe,{className:"user_game__completion_medal"}),(0,j.jsx)("h4",{children:(0,j.jsx)("p",{children:"Achievements"})}),(0,j.jsxs)("p",{children:["You've unlocked ",Ae(I)," (",Ee,"%)"]}),(0,j.jsx)("div",{className:"user_game__achievements_progress_bar_container",children:(0,j.jsx)("div",{className:"user_game__achievements_progress_bar",style:{width:"".concat(Ee,"%"),background:n.color}})}),(0,j.jsxs)("div",{className:"user_game__achievements_actions",children:[(0,j.jsx)("button",{className:"unlocked"==O&&"active",onClick:function(){return G("unlocked")},children:"Unlocked"}),(0,j.jsx)("button",{className:"".concat("locked"==O&&"active"),onClick:function(){return G("locked")},children:"In Progress"})]})]}),(0,j.jsx)("ul",{className:"user_game__achievements_list",children:I.filter((function(e){return"unlocked"==O?e.achieved:!e.achieved})).sort((function(e,t){return e.displayName>t.displayName?1:t.displayName>e.displayName?-1:0})).map((function(e){return(0,j.jsxs)("li",{className:"achievement_item",children:[(0,j.jsx)("div",{className:"achievement_item_icon",style:{border:"1px solid ".concat(n.color)},children:(0,j.jsx)("img",{className:"achievement_item_icon__img",src:e.achieved?e.icon:e.icongray})}),(0,j.jsxs)("div",{className:"achievement_item_headers",children:[(0,j.jsx)("h4",{children:e.displayName}),e.description&&(0,j.jsx)("p",{children:e.description})]})]})}))})]})}),T&&(0,j.jsx)("div",{className:"user_game__achievements_wrapper ".concat(!k.trophies&&"minimized"),children:(0,j.jsxs)("div",{className:"user_game__achievements ".concat(100==Ie&&"completed"),children:[(0,j.jsxs)("div",{className:"user_game__achievements_banner",children:[(0,j.jsx)(l.iUH,{style:{transform:k.trophies?"rotate(180deg)":"rotate(0)"},className:"user_game__minimize_icon",onClick:function(){return Me("trophies")}}),100===Ie&&(0,j.jsx)(l.PIe,{className:"user_game__completion_medal"}),(0,j.jsx)("h4",{children:(0,j.jsx)("p",{children:"Trophies"})}),(0,j.jsxs)("p",{children:["You've unlocked ",Ae(T)," (",Ie,"%)"]}),(0,j.jsx)("div",{className:"user_game__achievements_progress_bar_container",children:(0,j.jsx)("div",{className:"user_game__achievements_progress_bar",style:{width:"".concat(Ie,"%"),background:n.color}})}),(0,j.jsxs)("div",{className:"user_game__achievements_actions",children:[(0,j.jsx)("button",{className:"unlocked"==z&&"active",onClick:function(){return H("unlocked")},children:"Unlocked"}),Ie<100&&(0,j.jsx)("button",{className:"".concat("locked"==z&&"active"),onClick:function(){return H("locked")},children:"In Progress"})]})]}),(0,j.jsx)("ul",{className:"user_game__achievements_list",children:T.filter((function(e){return"unlocked"==z?e.earned:!e.earned})).sort((function(e,t){return e.trophyName>t.trophyName?1:t.trophyName>e.trophyName?-1:0})).map((function(e){return(0,j.jsxs)("li",{className:"achievement_item",children:[(0,j.jsx)("div",{className:"achievement_item_icon",style:{border:"1px solid ".concat(n.color)},children:(0,j.jsx)("img",{className:"achievement_item_icon__img ".concat(!e.earned&&"greyscale"),src:e.trophyIconUrl})}),(0,j.jsxs)("div",{className:"achievement_item_headers",children:[(0,j.jsx)("h4",{children:e.trophyName}),e.trophyDetail&&(0,j.jsx)("p",{children:e.trophyDetail})]})]},e.trophyName)}))})]})}),(0,j.jsx)(S,{profile:n,windowViewHandler:Me,viewStatus:k,gameNotes:W})]})})]})},T=n.p+"static/media/ps-trophy-bronze.5ca19d3acb813e595a59.png",L=n.p+"static/media/ps-trophy-gold.8b83d929060d52df9ecd.png",M=n.p+"static/media/ps-trophy-platinum.cb2e1800bc6be86cd8bc.png",B=function(e){var t=e.collection,n=e.activeProfile,d=e.backToHome,h=(e.playTrack,e.currentTrack,e.isPlaying,e.pausePlayback,e.resumePlayback,e.spotifyToken,e.setSelectedProfile,e.removeGame),_=e.updateCollection,p=e.userNotes,x=(0,o.useState)(""),g=(0,r.Z)(x,2),v=g[0],N=g[1],y=(0,o.useState)([]),b=(0,r.Z)(y,2),k=b[0],w=b[1],C=(0,o.useState)(!1),S=(0,r.Z)(C,2),Z=S[0],I=(S[1],(0,o.useState)(!1)),E=(0,r.Z)(I,2),A=E[0],D=E[1],B=(0,o.useState)(null),O=(0,r.Z)(B,2),G=O[0],F=O[1],U=(0,o.useState)(null),z=(0,r.Z)(U,2),H=z[0],R=z[1],Y=(0,o.useState)(!1),W=(0,r.Z)(Y,2),K=W[0],V=W[1],X=(0,o.useState)([]),Q=(0,r.Z)(X,2),q=Q[0],J=Q[1],$=(0,o.useState)("playtime"),ee=(0,r.Z)($,2),te=ee[0],ne=ee[1],se=(0,o.useState)("alphabetical"),ae=(0,r.Z)(se,2),ie=ae[0],re=ae[1],oe=(0,o.useState)([]),le=(0,r.Z)(oe,2),ce=le[0],ue=le[1],de=(0,o.useState)("backlog"),me=(0,r.Z)(de,2),he=me[0],_e=me[1],pe=f(),fe=pe.anchorPoint,xe=pe.showTitleMenu,ge=[M,L,T];(0,o.useEffect)((function(){if(""!=v){var e=setTimeout((function(){var e=t.filter((function(e){return e.name.toLowerCase().includes(v.toLowerCase())}));w(e)}),250);return function(){return clearTimeout(e)}}w([])}),[v]),(0,o.useEffect)((function(){function e(){window.innerWidth<=600?D(!0):D(!1)}return window.innerWidth<=600&&D(!0),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,o.useEffect)((function(){J("playtime"==te?(0,i.Z)(t).sort((function(e,t){return t[te]-e[te]})):"user_rating"==te?t.filter((function(e){return e.user_rating})).sort((function(e,t){return t.user_rating-e.user_rating})):t.filter((function(e){return e.achievements})).sort((function(e,t){return t.achievements-e.achievements})))}),[te,t]),(0,o.useEffect)((function(){ue("achievements"==ie?(0,i.Z)(t).filter((function(e){return e.achievements})).sort((function(e,t){return t.achievements-e.achievements})):"playtime"==ie?(0,i.Z)(t).filter((function(e){return e.playtime>0})).sort((function(e,t){return t.playtime-e.playtime})):"status"==ie?(0,i.Z)(t).filter((function(e){return e.status==he.toUpperCase()})):"rating"==ie?(0,i.Z)(t).filter((function(e){return e.user_rating})).sort((function(e,t){return t.user_rating-e.user_rating})):"trophies"==ie?(0,i.Z)(t).filter((function(e){return e.trophies})).sort((function(e,t){return e.trophies-t.trophies})):(0,i.Z)(t).sort((function(e,t){return e.name.toUpperCase()>t.name.toUpperCase()?1:e.name.toUpperCase()<t.name.toUpperCase()?-1:0})))}),[ie,he]);var ve=function(e){F(e)},je=function(e){var t;switch(ie){case"playtime":return Math.floor(e.playtime/60)>=1?(0,j.jsxs)("span",{className:"filter_stat",children:[Math.floor(e.playtime/60)," ",1==Math.floor(e.playtime/60)?"hour":"hours"]}):(0,j.jsxs)("span",{className:"filter_stat",children:[e.playtime," ",1==e.playtime?"minute":"minutes"]});case"rating":return(0,j.jsxs)("span",{className:"filter_stat rating_stat",children:[e.user_rating,"%"]});case"trophies":if(!e.trophies)break;var n=null===e||void 0===e||null===(t=e.trophies)||void 0===t?void 0:t.filter((function(e){return e.earned}));return(0,j.jsxs)("span",{className:"filter_stat",children:[Math.floor(n.length/e.trophies.length*100),"% earned"]})}},Ne=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m().put("".concat("https://gameflixx.netlify.app","/app/add_imported_collection"),{email:localStorage.getItem("user"),profile:localStorage.getItem("profile"),collection:t});case 3:n=e.sent,console.log(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,j.jsx)("div",{className:"user_collection__wrapper",children:(0,j.jsxs)("div",{className:"user_collection__container",style:{background:"#111"},children:[(0,j.jsxs)("div",{className:"user_collection__left",style:{height:Z&&"250%",marginBottom:Z&&"25px",display:A&&G&&"none"},children:[(0,j.jsxs)("div",{className:"user_collection__left_header",children:[(0,j.jsxs)("h2",{children:[(0,j.jsx)("img",{style:{height:"50px",width:"50px",borderRadius:"4px"},src:n.avatar}),n.name.trim(),"'s Collection",(0,j.jsx)(c.QEt,{className:"user_collection__upload_icon",onClick:function(){return V(!K)}}),K&&(0,j.jsx)("div",{children:(0,j.jsxs)("ul",{className:"upload_dropdown_list",children:[(0,j.jsxs)("li",{children:[" ",(0,j.jsx)("input",{style:{display:"none"},type:"file",name:"file",className:"custom-file-input",id:"inputGroupFile",required:!0,onChange:function(e){var t=e.target.files;if(t.length){var n=t[0],s=new FileReader;s.onload=function(e){var t=(0,u.ij)(e.target.result),n=t.SheetNames;if(n.length){var s=u.P6.sheet_to_json(t.Sheets[n[0]]);ue(s),Ne(s)}},s.readAsArrayBuffer(n)}V(!1)},accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"}),(0,j.jsx)("label",{className:"custom-file-label",htmlFor:"inputGroupFile",children:"Import CSV"})]}),(0,j.jsx)("li",{onClick:function(){var e=u.P6.book_new(),t=u.P6.json_to_sheet([]);u.P6.sheet_add_aoa(t,[["name","id","cover_image","playtime","origin","status","user_rating","banner_image"]]),u.P6.sheet_add_json(t,ce,{origin:"A2",skipHeader:!0}),u.P6.book_append_sheet(e,t,"Game"),(0,u.NC)(e,"Game Collection.xlsx"),V(!1)},children:"Export CSV"})]})}),(0,j.jsx)(l.xng,{className:"user_collection__home_icon",onClick:d})]}),(0,j.jsxs)("div",{className:"user_collection__search",children:[(0,j.jsx)(l.Ozl,{className:"user_collection__search_icon"}),(0,j.jsx)("input",{className:"user_collection__search_input",value:v,onChange:function(e){return N(e.target.value)}})]})]}),(0,j.jsxs)("ul",{className:"user_collection__title_list",style:{height:Z&&"100%",display:Z&&"flex"},children:[(0,j.jsxs)("p",{className:"user_collection__total",style:{color:"white",paddingLeft:"7px",marginBottom:"5px",position:"fixed",top:"132px",left:"1px",fontSize:".95rem",width:"100%",height:"22px",background:"linear-gradient(to right, rgba(25,25,25,.5) 0%,rgba(17,17,17,1) 46%,rgba(1,1,1,1) 50%,rgba(10,10,10,1) 53%,rgba(78,78,78,1) 76%,rgba(56,56,56,1) 87%,rgba(27,27,27,1) 100%)",display:"flex",alignItems:"center"},children:[k.length<=0&&""==v?"All":"Results"," ","(",(0,j.jsx)("span",{style:{fontSize:".75rem"},children:""==v?t.length:k.length}),")"]}),""==v?t.sort((function(e,t){return e.name.toUpperCase()>t.name.toUpperCase()?1:e.name.toUpperCase()<t.name.toUpperCase()?-1:0})).map((function(e){return(0,j.jsxs)("li",{className:"title_list__item",onClick:function(){return ve(e)},onContextMenu:function(t){return function(e,t){e.preventDefault(),R(t)}(t,e)},style:{background:(null===G||void 0===G?void 0:G.id)==e.id&&"#9147ff",color:(null===G||void 0===G?void 0:G.id)==e.id&&"white"},children:[" ",(0,j.jsx)("img",{src:e.cover_image}),(0,j.jsx)("p",{children:e.name}),e.name==n.favorite_game&&(0,j.jsx)(l.QJe,{className:"list_item_favorite"}),xe&&(0,j.jsxs)("ul",{onMouseEnter:function(e){return e.stopPropagation(!0)},className:"user_collection__game_context",style:{top:fe.y,left:fe.x,zIndex:6},children:[(0,j.jsx)("li",{className:"banner_context__item",children:"Add to Favorites"}),(0,j.jsx)("li",{className:"banner_context__item",onClick:function(e){return function(e){e.stopPropagation(),Object.keys(G).length>0&&H.id===G.id&&F(null),h(H),R(null)}(e)},children:"Delete Game"})]})]},e.id)})):k.length>0&&""!=v?k.map((function(e){return(0,j.jsxs)("li",{className:"title_list__item",onClick:function(){return ve(e)},children:[" ",(0,j.jsx)("img",{src:e.cover_image}),(0,j.jsx)("p",{children:e.name})]},e.id)})):(0,j.jsx)("p",{style:{color:"white",fontSize:"3.2rem",position:"absolute",top:"44%",left:"16px"},children:"No Matches"}),(0,j.jsx)("div",{className:"user_collection__title_list_shadow"}),(0,j.jsx)("div",{className:"user_collection__title_list_shadow top_shadow"})]}),(0,j.jsx)("div",{className:"user_collection__actions",children:(0,j.jsx)("button",{className:"persona_font",onClick:d,children:"Back"})})]}),(0,j.jsxs)("div",{className:"user_collection__right",children:[null!==G&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(P,{game:G,activeProfile:n,closeStats:function(){return F(null)},setCurrentGame:function(e){return F(e)},updateCollection:_,userNotes:p})}),!G&&(0,j.jsxs)(j.Fragment,{children:[!A&&(0,j.jsxs)("div",{className:"user_collection__spotlight_wrapper",children:[(0,j.jsxs)("div",{className:"spotlight_filters",children:[(0,j.jsxs)("h2",{className:"spotlight_filter",children:["playtime"==te?"Most Played":"user_rating"==te?"Highest Rated":"Most Achievements"," "]}),(0,j.jsxs)("ul",{className:"spotlight_filter__options",children:[(0,j.jsx)("li",{onClick:function(){return ne("playtime")},style:{color:"playtime"==te&&"white"},children:"Most Played"}),(0,j.jsx)("li",{onClick:function(){return ne("user_rating")},style:{color:"user_rating"==te&&"white"},children:"Highest Rated"}),(0,j.jsx)("li",{onClick:function(){return ne("achievements")},style:{color:"achievements"==te&&"white"},children:"Most Achievements"})]})]}),(0,j.jsx)("div",{className:"user_collection__spotlight",children:q.slice(0,3).map((function(e,t){return(0,j.jsxs)("figure",{className:"spotlight_container",onClick:function(){return ve(e)},children:[(0,j.jsx)("img",{className:"spotlight_image",src:e.banner_url||e.cover_image}),(0,j.jsxs)("div",{className:"spotlight_container__row",children:[(0,j.jsx)("img",{className:"spotlight_trophy_image",src:ge[t]}),(0,j.jsx)("figcaption",{className:"spotlight_details",children:(0,j.jsxs)("p",{children:["playtime"==te?"".concat(Math.floor(e.playtime/60)," hours"):"user_rating"==te?e.user_rating+"%":"ACHIEVE"," "]})})]})]},e.id)}))})]}),(0,j.jsxs)("div",{className:"user_collection__list_container",children:[(0,j.jsxs)("div",{className:"user_collection__list_filters",children:[(0,j.jsx)("p",{style:{marginBottom:"2px",fontSize:"1.5rem"},children:"alphabetical"==ie?"All Games":"achievements"==ie?"Achievements":"playtime"==ie?"Playtime":"rating"==ie?"Rating":"Status"}),(0,j.jsxs)("ul",{className:"user_collection__list_filters__list",children:[(0,j.jsx)("li",{style:{color:"alphabetical"==ie&&"white"},onClick:function(){return re("alphabetical")},children:"All"}),(0,j.jsx)("span",{children:" | "}),(0,j.jsx)("li",{style:{color:"achievements"==ie&&"white"},onClick:function(){return re("achievements")},children:"Achievements"}),(0,j.jsx)("span",{children:" | "}),(0,j.jsx)("li",{style:{color:"playtime"==ie&&"white"},onClick:function(){return re("playtime")},children:"Playtime"}),(0,j.jsx)("span",{children:" | "}),(0,j.jsx)("li",{style:{color:"rating"==ie&&"white"},onClick:function(){return re("rating")},children:"Rating"}),(0,j.jsx)("span",{children:" | "}),(0,j.jsx)("li",{style:{color:"status"==ie&&"white"},onClick:function(){re("status"),_e("backlog")},children:"Status"})]}),"status"==ie&&(0,j.jsx)("div",{className:"user_collection__list_filters__list",style:{margin:"0"},children:(0,j.jsxs)("ul",{className:"user_collection__list_filters__list_status",style:{flexDirection:"row"},children:[(0,j.jsx)("li",{style:{color:"backlog"==he&&"white"},onClick:function(){return _e("backlog")},children:"Backlog"}),(0,j.jsx)("span",{children:" | "}),(0,j.jsx)("li",{style:{color:"started"==he&&"white"},onClick:function(){return _e("started")},children:"Started"}),(0,j.jsx)("span",{children:" | "}),(0,j.jsx)("li",{style:{color:"playing"==he&&"white"},onClick:function(){return _e("playing")},children:"Playing"}),(0,j.jsx)("span",{children:" | "}),(0,j.jsx)("li",{style:{color:"finished"==he&&"white"},onClick:function(){return _e("finished")},children:"Finished"}),(0,j.jsx)("span",{children:" | "}),(0,j.jsx)("li",{style:{color:"100%"==he&&"white"},onClick:function(){return _e("100%")},children:"100%"}),(0,j.jsx)("span",{children:" | "}),(0,j.jsx)("li",{style:{color:"abandonded"==he&&"white"},onClick:function(){return _e("abandonded")},children:"Abandonded"}),(0,j.jsx)("span",{children:" | "}),(0,j.jsx)("li",{style:{color:"not owned"==he&&"white"},onClick:function(){return _e("not owned")},children:"Not Owned"})]})})]}),(0,j.jsx)("ul",{className:"user_collection__list",children:!A||A&&""==v?ce.map((function(e){return(0,j.jsxs)("li",{className:"list_item",onClick:function(){return ve(e)},children:[(0,j.jsxs)("div",{className:"user_collection__poster_container",children:[(0,j.jsx)("div",{className:"gradient"}),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"user_collection__poster_front",children:(0,j.jsx)("img",{loading:"lazy",className:"user_collection__poster",src:e.cover_image,alt:e.name})})})]}),je(e)]},e.id)})):k.map((function(e){return(0,j.jsx)("li",{className:"list_item",onClick:function(){return ve(e)},children:(0,j.jsxs)("div",{className:"user_collection__poster_container",children:[(0,j.jsx)("div",{className:"gradient"}),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"user_collection__poster_front",children:(0,j.jsx)("img",{loading:"lazy",className:"user_collection__poster",src:A?e.cover_image.replace("cover_big","1080p"):e.cover_image,alt:e.name})})})]})},e.id)}))})]})]})]})]})})}}}]);
//# sourceMappingURL=427.26e52f12.chunk.js.map