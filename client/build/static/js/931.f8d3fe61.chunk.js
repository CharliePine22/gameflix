"use strict";(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[931],{4931:function(e,r,s){s.r(r),s.d(r,{default:function(){return w}});var n=s(7762),a=s(4165),t=s(5861),c=s(9439),i=s(2791),l=s(1413);function o(e,r){if(null==e)return{};var s,n,a=function(e,r){if(null==e)return{};var s,n,a={},t=Object.keys(e);for(n=0;n<t.length;n++)s=t[n],r.indexOf(s)>=0||(a[s]=e[s]);return a}(e,r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(n=0;n<t.length;n++)s=t[n],r.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var u=["count","wrapper","className","containerClassName","containerTestId","circle","style"],d=i.createContext({});function m(e){for(var r,s,n,a=e.count,t=void 0===a?1:a,m=e.wrapper,h=e.className,g=e.containerClassName,_=e.containerTestId,p=e.circle,f=void 0!==p&&p,v=e.style,j=o(e,u),x=i.useContext(d),b=(0,l.Z)({},j),N=0,y=Object.entries(j);N<y.length;N++){var w=(0,c.Z)(y[N],2),k=w[0];"undefined"===typeof w[1]&&delete b[k]}var S=(0,l.Z)((0,l.Z)((0,l.Z)({},x),b),{},{circle:f}),O=(0,l.Z)((0,l.Z)({},v),function(e){var r=e.baseColor,s=e.highlightColor,n=e.width,a=e.height,t=e.borderRadius,c=e.circle,i=e.direction,l=e.duration,o=e.enableAnimation,u=void 0===o||o,d={};return"rtl"===i&&(d["--animation-direction"]="reverse"),"number"===typeof l&&(d["--animation-duration"]="".concat(l,"s")),u||(d["--pseudo-element-display"]="none"),"string"!==typeof n&&"number"!==typeof n||(d.width=n),"string"!==typeof a&&"number"!==typeof a||(d.height=a),"string"!==typeof t&&"number"!==typeof t||(d.borderRadius=t),c&&(d.borderRadius="50%"),"undefined"!==typeof r&&(d["--base-color"]=r),"undefined"!==typeof s&&(d["--highlight-color"]=s),d}(S)),C="react-loading-skeleton";h&&(C+=" ".concat(h));for(var Z=null!==(r=S.inline)&&void 0!==r&&r,P=[],E=Math.ceil(t),R=0;R<E;R++){var D=O;if(E>t&&R===E-1){var I=null!==(s=D.width)&&void 0!==s?s:"100%",G=t%1,T="number"===typeof I?I*G:"calc(".concat(I," * ").concat(G,")");D=(0,l.Z)((0,l.Z)({},D),{},{width:T})}var A=i.createElement("span",{className:C,style:D,key:R},"\u200c");Z?P.push(A):P.push(i.createElement(i.Fragment,{key:R},A,i.createElement("br",null)))}return i.createElement("span",{className:g,"data-testid":_,"aria-live":"polite","aria-busy":null===(n=S.enableAnimation)||void 0===n||n},m?P.map((function(e,r){return i.createElement(m,{key:r},e)})):P)}var h=s(4569),g=s.n(h),_=s(184),p=function(e){var r=e.count;return"full"==e.type?(0,_.jsx)("section",{className:"skeleton_card_wrapper",children:(0,_.jsx)("ul",{className:"list",children:Array(r).fill().map((function(e,r){return(0,_.jsxs)("li",{className:"card",children:[(0,_.jsx)(m,{height:180,className:"card_banner",highlightColor:"#323232"}),(0,_.jsxs)("h4",{className:"card-title",children:[(0,_.jsx)(m,{className:"card_cover",baseCover:"rgb(35, 35, 35)",highlightColor:"#222222",circle:!1})," ","\xa0",(0,_.jsx)(m,{className:"skeleton_title",highlightColor:"#222222",baseCover:"rgb(35, 35, 35)"})]}),(0,_.jsx)("p",{children:(0,_.jsx)(m,{style:{marginLeft:"10px"},className:"card-channel",width:"60%",highlightColor:"#222222"})}),(0,_.jsx)("div",{children:(0,_.jsx)(m,{style:{marginLeft:"10px"},className:"card-metrics",width:"90%",highlightColor:"#222222"})})]},r)}))})}):(0,_.jsx)("section",{className:"skeleton_card_wrapper",children:(0,_.jsx)("ul",{className:"list_small",children:Array(r).fill().map((function(e,r){return(0,_.jsxs)("li",{className:"card_small",children:[(0,_.jsx)(m,{height:104,className:"card_banner_small",highlightColor:"#222222",enableAnimation:!1}),(0,_.jsxs)("h4",{className:"card-title_small",children:[(0,_.jsx)(m,{className:"card_cover_small",circle:!1,highlightColor:"#222222"})," ","\xa0",(0,_.jsx)(m,{className:"skeleton_title_small",highlightColor:"#222222"})]})]},r)}))})})},f=s(7689),v=s(6355),j=s(3676),x=s(1784),b=s(3224),N=s(1879),y=(0,i.lazy)((function(){return Promise.all([s.e(119),s.e(321)]).then(s.bind(s,2191))})),w=function(e){var r,s,l,o=e.setGameDetails,u=(e.game,e.closeSearchResults),d=e.currentGameOpen,h=e.openGame,w=e.closeGameWindow,k=e.addGameHandler,S=localStorage.getItem("twitch_auth"),O=JSON.parse(localStorage.getItem("searches")),C=(0,f.TH)(),Z=(0,i.useState)(O),P=(0,c.Z)(Z,2),E=P[0],R=P[1],D=(0,i.useState)(""),I=(0,c.Z)(D,2),G=I[0],T=I[1],A=(0,i.useState)(!1),J=(0,c.Z)(A,2),X=J[0],B=J[1],z=C.state.name,F=(0,i.useState)(z),H=(0,c.Z)(F,2),K=H[0],L=H[1],M=(0,i.useState)([]),U=(0,c.Z)(M,2),W=U[0],q=U[1],Q=(0,i.useState)(!1),V=(0,c.Z)(Q,2),Y=V[0],$=V[1],ee=(0,i.useState)(!1),re=(0,c.Z)(ee,2),se=re[0],ne=re[1],ae=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(r){var s,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ne(!0),$(!1),s=r.replace("Poke","Pok\xe9"),e.next=6,g().post("/app/search_game",{token:S,gameName:s});case 6:return n=e.sent,q(n.data),""!==z&&(O?(O.push(z),R(O),localStorage.setItem("searches",JSON.stringify(O))):(localStorage.setItem("searches",JSON.stringify([z])),R(O))),ne(!1),$(!0),e.abrupt("return",W);case 14:e.prev=14,e.t0=e.catch(0),ne(!1),$(!0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(r){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){""!=z&&(window.scrollTo(0,0),ae(z))}),[z]);var te=function(e){var r=O.filter((function(r){return r!==e}));R([]),localStorage.setItem("searches",JSON.stringify(r))},ce=function(e){"Enter"===e.key&&ae(K)},ie=function(e){var r,s=[],a=(0,n.Z)(e);try{for(a.s();!(r=a.n()).done;){var t=r.value;-1===s.indexOf(t)&&s.push(t)}}catch(c){a.e(c)}finally{a.f()}return localStorage.setItem("searches",JSON.stringify(s)),s.reverse()},le=function(e,r){e.stopPropagation(),T(r),h(r)};return se&&!Y?(0,_.jsxs)("div",{className:"search_results",children:[(0,_.jsxs)("div",{className:"search_results__nav",children:[(0,_.jsx)("span",{onClick:u,children:"X"}),(0,_.jsx)("div",{className:"search_results__nav_search",children:(0,_.jsx)("input",{placeholder:"".concat(""!==z?z:"Search..."),value:K,onKeyDown:ce,onChange:function(e){return L(e.target.value)}})})]}),(0,_.jsxs)("div",{className:"search_results__container_skeleton",children:[(0,_.jsxs)("div",{className:"search_results__recents",children:[(0,_.jsx)("h2",{children:"Recent Searches"}),(0,_.jsx)("ul",{className:"recent_searches",children:O&&ie(O).slice(0,4).map((function(e,r){return(0,_.jsxs)("li",{className:"recent_searches__item",children:[(0,_.jsx)("p",{onClick:function(){return ae(e)},children:e}),(0,_.jsx)("span",{onClick:function(){return te(e)},children:"X"})]},r)}))})]}),(0,_.jsxs)("div",{className:"top_results_row_skeleton",children:[(0,_.jsx)("h2",{children:"Top Results"}),(0,_.jsx)(p,{count:3,type:"full"})]}),(0,_.jsxs)("div",{className:"remainder_results_skeleton",children:[(0,_.jsx)("h2",{children:"Results"}),(0,_.jsx)(p,{count:9})]})]})]}):(0,_.jsxs)("div",{className:"search_results",children:[(0,_.jsxs)("div",{className:"search_results__nav",children:[(0,_.jsx)("span",{onClick:u,children:"X"}),(0,_.jsxs)("div",{className:"search_results__nav_search",children:[(0,_.jsx)("input",{value:K,onChange:function(e){return L(e.target.value)},placeholder:"Search..",onKeyDown:ce}),(0,_.jsx)(v.U41,{className:"search_results__nav_search_icon",onClick:ce})]})]}),(0,_.jsxs)("div",{className:"search_results__container",children:[d===G.id&&(0,_.jsxs)("div",{className:"search_results__game_preview",children:[(0,_.jsx)("h1",{onClick:w,children:"X"}),(0,_.jsx)(i.Suspense,{fallback:(0,_.jsx)(_.Fragment,{children:"..."}),children:(0,_.jsx)(y,{style:{top:"230px"},game:G,gameCover:"https://images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(null===(r=G.cover)||void 0===r?void 0:r.image_id,".jpg"),ratingImage:function(e){if(!e||!e.age_ratings)return(0,_.jsx)("img",{className:"row__poster__esrb_img",src:N});var r=null===e||void 0===e?void 0:e.age_ratings.filter((function(e){return 1==e.category||2==e.category}));if(0==r.length||!e.age_ratings)return(0,_.jsx)("img",{className:"row__poster__esrb_img",src:N});switch(r[0].rating){case 1:case 2:case 8:case 9:return(0,_.jsx)("img",{className:"row__poster__esrb_img",src:j});case 3:case 4:case 10:return(0,_.jsx)("img",{className:"row__poster__esrb_img",src:x});case 5:case 11:return(0,_.jsx)("img",{className:"row__poster__esrb_img",src:b});default:return(0,_.jsx)("img",{className:"row__poster__esrb_img",src:N})}}(G),addGame:k,displayDetails:o,hideDetails:w,fetchGameDetails:function(e){o(e)},viewingPreview:X,openGame:function(){return B(!0)},closeGame:function(){return B(!1)}})})]}),(0,_.jsxs)("div",{className:"search_results__recents",children:[(0,_.jsx)("h2",{children:"Recent Searches"}),(0,_.jsx)("ul",{className:"recent_searches",children:E&&ie(E).slice(0,4).map((function(e,r){return(0,_.jsxs)("li",{className:"recent_searches__item",children:[(0,_.jsx)("p",{onClick:function(){return ae(e)},children:e}),(0,_.jsx)("span",{onClick:function(){return te(e)},children:"X"})]},r)}))})]}),0==W.length&&(0,_.jsx)("div",{className:"search_results__error",children:(0,_.jsx)("p",{children:"Sorry, no results for current game, please refine your search and try again!"})}),W.length>0&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("h2",{children:"Top Results"}),(0,_.jsx)("div",{className:"top_results_row",children:null===(s=W.slice(0,3))||void 0===s?void 0:s.map((function(e){var r,s,n,a;return(0,_.jsxs)("div",{className:"top_result_container",onClick:function(){return o(e)},children:[(0,_.jsxs)("div",{className:"top_result_upper",children:[(0,_.jsx)("div",{className:"result_publisher",onClick:function(r){return le(r,e)},children:(0,_.jsx)("h3",{children:"3D"})}),(0,_.jsx)("img",{src:"https://images.igdb.com/igdb/image/upload/t_screenshot_big/".concat(e.artworks?null===(r=e.artworks[0])||void 0===r?void 0:r.image_id:null===(s=e.cover)||void 0===s?void 0:s.image_id,".jpg")})]}),(0,_.jsxs)("div",{className:"top_result_lower",children:[(0,_.jsx)("h3",{className:"game_name",children:e.name||(0,_.jsx)(m,{count:1})}),(0,_.jsx)("ul",{className:"game_theme_list",children:null===(n=e.themes)||void 0===n?void 0:n.map((function(e){return"Sandbox"!==e.name&&(0,_.jsx)("li",{children:e.name},e.id)}))})]}),(0,_.jsx)("div",{className:"game_cover",style:{backgroundSize:"100% 100%",backgroundImage:"url(https://images.igdb.com/igdb/image/upload/t_cover_big/".concat(null===(a=e.cover)||void 0===a?void 0:a.image_id,".jpg)"),backgroundPosition:"center"}})]},e.id)}))})]}),W.length>3&&(0,_.jsxs)("div",{className:"remainder_results",children:[(0,_.jsx)("h2",{children:"Results"}),null===(l=W.slice(3))||void 0===l?void 0:l.map((function(e){var r;return void 0!==e.cover&&(0,_.jsxs)("div",{className:"results_container",onClick:function(){return o(e)},children:[(0,_.jsx)("div",{className:"results_container_img",style:{backgroundSize:"cover",backgroundImage:"url(//images.igdb.com/igdb/image/upload/t_cover_big/".concat(e.cover.image_id,".jpg)"),backgroundPosition:"center"}}),(0,_.jsxs)("div",{className:"results_container_content",children:[(0,_.jsx)("h3",{className:"game_name_remainder",children:e.name}),(0,_.jsx)("div",{className:"remainder_3d",onClick:function(r){return le(r,e)},children:(0,_.jsx)("h3",{children:"3D"})}),(0,_.jsx)("ul",{className:"game_theme_list_lower",children:null===(r=e.themes)||void 0===r?void 0:r.map((function(e,r){return"Sandbox"!==e.name&&r<3&&(0,_.jsx)("li",{children:e.name},e.id)}))})]})]},e.id)}))]})]}),(0,_.jsx)("div",{className:"search_bottom_fade"})]})}},3676:function(e,r,s){e.exports=s.p+"static/media/ESRB_E.9cf6d7f3f8e673367d2a.png"},3224:function(e,r,s){e.exports=s.p+"static/media/ESRB_M.37c27952605b5ceea210.png"},1879:function(e,r,s){e.exports=s.p+"static/media/ESRB_RP.7e329028594a72ed21ee.png"},1784:function(e,r,s){e.exports=s.p+"static/media/ESRB_T.5f77aabf3318dacd4cfc.png"},4942:function(e,r,s){function n(e,r,s){return r in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}s.d(r,{Z:function(){return n}})},1413:function(e,r,s){s.d(r,{Z:function(){return t}});var n=s(4942);function a(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,n)}return s}function t(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?a(Object(s),!0).forEach((function(r){(0,n.Z)(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}}}]);
//# sourceMappingURL=931.f8d3fe61.chunk.js.map