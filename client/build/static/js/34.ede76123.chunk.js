(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[34],{1679:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var r=n(9439),a=n(2791),s=n(3433),i=n(4165),o=n(5861),c=n(4569),l=n.n(c),u=n(184),d=function(e){var t=e.delay;return(0,u.jsx)("div",{className:"placeholder",style:{animationDelay:"".concat(t,"ms")},onClick:function(e){return e.stopPropagation()}})},m=n(6355),f=n(458),p=n(3676),g=n(1784),h=n(3224),v=n(1879),_=(0,a.lazy)((function(){return Promise.resolve().then(n.bind(n,276))}));var x=function(e){e.activeProfile;var t=e.spotifyToken,n=e.genreDetails,c=e.playTrack,x=e.currentTrack,A=e.setGameDetails,j=e.resumePlayback,w=e.pausePlayback,b=e.isPlaying,y=e.currentGameOpen,N=e.closeGameWindow,k=e.openGame,S=e.addGame,P=e.setNotification,T=e.loading,Z=e.hoverGame,C=e.hoverAway,G=e.currentHover,I=(0,a.useState)(null),M=(0,r.Z)(I,2),E=M[0],D=M[1],q="https://cybrary2022.onrender.com",L=(0,a.useState)([]),R=(0,r.Z)(L,2),z=R[0],V=R[1],F=(0,a.useState)(!1),U=(0,r.Z)(F,2),B=U[0],O=U[1],Y=(0,a.useState)(!1),H=(0,r.Z)(Y,2),Q=H[0],J=H[1],K=(0,a.useState)(!1),W=(0,r.Z)(K,2),X=W[0],$=W[1],ee=n[0][0],te=n[0][1],ne=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return D(null),P("ERROR","Please connect to Spotify through the nav dropdown!"),e.abrupt("return");case 4:return e.prev=4,$(!0),e.next=8,l().get("".concat(q,"/app/spotify_album"),{params:{game:n.name,token:t,baseURL:q}});case 8:if("OK"===(r=e.sent).data.status){e.next=14;break}console.log(r.data),$(!1),e.next=19;break;case 14:return D(n.id),V(r.data.tracks),O(!0),$(!1),e.abrupt("return",r.data.tracks);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(4),console.log(e.t0),$(!1),e.abrupt("return",e.t0);case 26:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(t){return e.apply(this,arguments)}}(),re=function(e,t){e.stopPropagation(),S(t)},ae=function(e){if(!e||!e.age_ratings)return(0,u.jsx)("img",{className:"row__poster__esrb_img",src:v});var t=null===e||void 0===e?void 0:e.age_ratings.filter((function(e){return 1==e.category||2==e.category}));if(0==t.length||!e.age_ratings)return(0,u.jsx)("img",{className:"row__poster__esrb_img",src:v});switch(t[0].rating){case 1:case 2:case 8:case 9:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb E rating",src:p});case 3:case 4:case 10:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb T rating",src:g});case 5:case 11:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb M rating",src:h});default:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb RP rating",src:v})}};return(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("h2",{className:"row__title",children:ee}),(0,u.jsxs)("div",{className:"row__posters",children:[te.map((function(e){var t,n;return void 0!==e.cover&&(0,u.jsx)(a.Fragment,{children:!T&&(0,u.jsxs)("div",{className:"row__poster_wrapper ".concat(y==e.id&&"viewing_game"),style:{zIndex:y!==e.id&&null!==y&&"-1"},onMouseOver:function(){return Z(e.id)},onMouseLeave:function(){return B?Z(e.id):C()},children:[G==e.id&&!y&&(0,u.jsxs)("div",{className:"row__blur_wrapper",children:[X?(0,u.jsxs)("div",{className:"playlist_loading",children:[(0,u.jsx)("div",{className:"playlist_loading_dot"}),(0,u.jsx)("div",{className:"playlist_loading_dot"}),(0,u.jsx)("div",{className:"playlist_loading_dot"})]}):(0,u.jsxs)("div",{className:"row__blur_details",style:{display:E==e.id&&"none"},children:[(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(t){return re(t,e)},children:[(0,u.jsx)(m.ymq,{className:"blur_item_icon"}),(0,u.jsx)("p",{children:"Add"})]}),(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){!function(e){N(),A(e)}(e)},children:[(0,u.jsx)(f.QEt,{className:"blur_item_icon more"}),(0,u.jsx)("p",{children:"See Details"})]}),(0,u.jsxs)("div",{onClick:function(t){return function(e,t){e.stopPropagation(),N(),D(t.id),ne(t)}(t,e)},className:"row__blur_item",children:[(0,u.jsx)(m.HcQ,{className:"blur_item_icon music"}),(0,u.jsx)("p",{children:"Play Soundtrack"})]}),(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){return k(e)},children:[(0,u.jsx)(m.iVx,{className:"blur_item_icon"}),(0,u.jsx)("p",{children:"View Case"})]})]}),B&&E==e.id&&(0,u.jsxs)("div",{className:"soundtrack_container",children:[(0,u.jsx)("span",{onClick:function(e){return function(e){e.stopPropagation(),D(null),O(!1)}(e)},children:"\u2190"}),(0,u.jsx)("h3",{children:"Spotify OST"}),(0,u.jsx)("ul",{className:"soundtracks",children:null===z||void 0===z?void 0:z.map((function(e){return(0,u.jsxs)("li",{onClick:function(e){return e.stopPropagation()},className:"soundtrack",children:[(0,u.jsx)("p",{style:{color:null!==x&&x.name==e.name?"green":"white",fontWeight:null!==x&&x.name==e.name?"600":"400"},children:(t=e.name,t.split("-")[0].split("(")[0])}),null!==x&&x.name!==e.name||!b?(0,u.jsx)(m.gmG,{onClick:function(t){return function(e,t){e.stopPropagation(),null!==x&&t.name==x.name&&j(),c(t)}(t,e)}}):(0,u.jsx)(m.Wh,{onClick:function(e){return w()}})]},e.id);var t}))})]})]}),(0,u.jsx)("div",{className:"row__poster_container",children:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"row__poster_front",style:{transformStyle:y&&"revert"},children:(0,u.jsx)("img",{loading:"lazy",className:"row__poster",src:"https://images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(t=e.cover)||void 0===t?void 0:t.image_id,".jpg"),alt:e.name+" cover image"})})})}),y===e.id&&(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:(0,u.jsx)(_,{game:e,gameCover:"https://images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(null===(n=e.cover)||void 0===n?void 0:n.image_id,".jpg"),ratingImage:ae(e),addGame:re,viewingPreview:Q,openGame:function(){return J(!0)},closeGame:function(){return J(!1)}})})]})},e.id)})),T&&(0,u.jsx)("div",{className:"row__loading_container",children:(0,s.Z)(Array(10)).map((function(e,t){return(0,u.jsx)("div",{className:"row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))})]})]})},A=n(7692),j=function(){var e=(0,a.useState)(!1),t=(0,r.Z)(e,2),n=t[0],s=t[1],c=(0,a.useState)([]),u=(0,r.Z)(c,2),d=u[0],m=u[1],f=(0,a.useState)(""),p=(0,r.Z)(f,2),g=p[0],h=p[1],v=(0,a.useState)(""),_=(0,r.Z)(v,2),x=_[0],A=_[1],j=(0,a.useState)(null),w=(0,r.Z)(j,2),b=w[0],y=w[1],N=localStorage.getItem("twitch_auth"),k=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,l().post("".concat("https://cybrary2022.onrender.com","/app/search_game"),{token:N,gameName:""});case 4:return t=e.sent,e.next=7,t.data.sort((function(e,t){return t.rating-e.rating}));case 7:n=e.sent,r=n[Math.floor(Math.random()*t.data.length-1)],m(n),h(r),a=r.videos.find((function(e){return e.name.includes("Trailer")})),A("https://www.youtube.com/watch?v=".concat(a.video_id)),s(!1),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),y(e.t0),s(!1);case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){!N||d.length>0||k()}),[N]),(0,a.useEffect)((function(){b&&k()}),[b]);return{isLoading:n,serverError:b,currentGame:g,currentGameTrailer:x,displayNewBanner:function(){var e=d[Math.floor(Math.random()*d.length-1)],t=e.videos.find((function(e){return e.name.includes("Trailer")}));h(e),A("https://www.youtube.com/watch?v=".concat(t.video_id))}}},w=n(3134),b=n.n(w);var y=function(e){var t,n,s,i,o,c=e.setGameDetails,l=e.addGame,d=e.activeProfile,m=j(),f=(0,a.useRef)(),p=d.collection&&d.collection.some((function(e){return(null===e||void 0===e?void 0:e.id)===m.currentGame.id})),g=(0,a.useState)(!0),h=(0,r.Z)(g,2),v=h[0],_=h[1],x=(0,a.useState)(!0),w=(0,r.Z)(x,2),y=w[0],N=w[1],k=(0,a.useState)(!1),S=(0,r.Z)(k,2),P=S[0],T=S[1];return(0,a.useEffect)((function(){if(!m.isLoading&&f){var e=new IntersectionObserver((function(e){(0,r.Z)(e,1)[0].isIntersecting?N(!0):N(!1)}),{root:null,rootMargin:"0px",threshold:.1});f.current&&e.observe(f.current)}}),[f,m.isLoading,m.currentGameTrailer]),(0,a.useEffect)((function(){N(!0)}),[m.currentGameTrailer]),m.isLoading?(0,u.jsx)("div",{className:"banner__loading",children:(0,u.jsx)("div",{className:"banner__spinner"})}):(0,u.jsx)("header",{className:"banner",children:(0,u.jsxs)("div",{ref:f,style:{width:"100%",height:"100%"},children:[m.currentGameTrailer&&(0,u.jsx)(b(),{className:"banner__trailer",url:m.currentGameTrailer,playing:!!y,muted:!!v,onEnded:function(){return T(!0)},light:!!P&&"//images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(null===(t=m.currentGame.cover)||void 0===t?void 0:t.image_id,".jpg")}),(0,u.jsxs)("div",{className:"banner__contents",children:[(0,u.jsx)("h1",{className:"banner__title",children:null===(n=m.currentGame)||void 0===n?void 0:n.name}),(0,u.jsxs)("div",{className:"banner__buttons",children:[(0,u.jsx)("button",{className:"banner__button",onClick:function(){return c(m.currentGame)},children:"See Details"}),!p&&(0,u.jsx)("button",{className:"banner__button",onClick:function(){return l(m.currentGame)},children:"Add to My List"})]}),(0,u.jsx)("h1",{className:"banner__description",children:(i=null===(s=m.currentGame)||void 0===s?void 0:s.summary,o=150,(null===i||void 0===i?void 0:i.length)>o?i.substr(0,o-1)+"...":i)})]}),(0,u.jsx)("div",{className:"banner--fadeBottom"}),(0,u.jsx)(A.t5J,{size:35,className:"banner__refresh_icon",onClick:m.displayNewBanner}),v?(0,u.jsx)(A.j6J,{size:27,className:"banner__mute_btn",onClick:function(){return _(!1)}}):(0,u.jsx)(A.jZ7,{size:27,className:"banner__volume_btn",onClick:function(){return _(!0)}})]})},m.currentGame.id)},N=n(6475),k=n(7762),S=n(1087),P=n(71),T=n(6856),Z="https://accounts.spotify.com/authorize?client_id=".concat("05e6f02e47724a63b635cfdac09fc991","&response_type=code&redirect_uri=").concat("https://cybrary2022.onrender.com","&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state"),C=function(e){var t="https://cybrary2022.onrender.com",n=e.allProfiles;(0,a.useEffect)((function(){var t=function(t){27===t.keyCode&&e.closeNavDropdown()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]);var r=function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var r,a,s,o,c;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l().get("".concat(t,"/playstation/user_titles"));case 3:r=n.sent,console.log(r.data),a=(0,k.Z)(r.data);try{for(a.s();!(s=a.n()).done;)for(o=s.value,c=0;c<o.earnedTrophies.length;c++)o.earnedTrophies[c].earned?o.allTrophies[c].earned=!0:o.allTrophies[c].earned=!1}catch(i){a.e(i)}finally{a.f()}e.currentCollection.filter((function(n){var a=r.data.some((function(r){n.name.toLowerCase()===r.name.toLowerCase()?(n.trophies=r.allTrophies,l().put("".concat(t,"/app/update_game_trophies"),{email:localStorage.getItem("user"),name:e.activeProfile.name,gameId:n.id,trophies:r.allTrophies})):(console.log("New game bruh"),l().post("".concat(t,"/app/update_collection"),{email:localStorage.getItem("user"),currentProfile:localStorage.getItem("profile"),name:r.name,id:r.id,imageURL:"//images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(r.cover.image_id,".jpg"),playtime:0,origin:"gameflix"}))}));return a})),n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),console.log(n.t0),n.abrupt("return",n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}();return n.sort((function(e,t){return e.name-t.name?1:-1})),(0,u.jsxs)("div",{className:"dropdown",children:[(0,u.jsx)(m.h3_,{className:"dropdown__arrow"}),(0,u.jsx)("div",{className:"dropdown__profiles",children:(0,u.jsxs)("ul",{className:"dropdown__profiles_list",children:[n.map((function(t){if(t.name!==e.activeProfile.name)return(0,u.jsxs)("li",{className:"dropdown__profiles_item",onClick:function(){return function(t){e.changeProfile(t)}(t)},children:[(0,u.jsx)("img",{src:t.avatar,className:"dropdown__profile_icon",alt:"".concat(t.name," avatar icon"),style:{backgroundColor:t.color}}),(0,u.jsx)("p",{className:"dropdown__profile_name",children:t.name})]},t.name)})),(0,u.jsxs)("li",{className:"dropdown__profiles_item",onClick:e.toProfilePage,children:[(0,u.jsx)("span",{className:"dropdown__profiles_manage",children:(0,u.jsx)(T.zmo,{size:22})}),(0,u.jsx)("p",{className:"dropdown__profile_name",children:"Manage Profiles"})]})]})}),(0,u.jsxs)("div",{className:"dropdown__settings",children:[(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:function(){return e.editProfile()},children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.dfI,{size:18})}),(0,u.jsx)("p",{children:"My Profile"})]}),(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:function(){return e.viewCollection()},children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.iVx,{size:18})}),(0,u.jsx)("p",{children:"My Collection"})]}),(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:e.editAccount,children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(P.Fuo,{size:18})}),(0,u.jsx)("p",{children:"Account Settings"})]})]}),(0,u.jsxs)("div",{className:"dropdown__settings",children:[(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:r,children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.To8,{size:18})}),(0,u.jsx)("p",{children:"Link Playstation"})]}),(0,u.jsxs)("a",{href:Z,className:"dropdown__settings_item",children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.l4C,{size:18,style:{color:e.spotifyToken?"#1DB954":"#FFF"}})}),(0,u.jsx)("p",{children:"Spotify Authentication"})]}),(0,u.jsx)("div",{className:"dropdown__settings_item",style:{alignItems:"center",justifyContent:"center",paddingBottom:"0",paddingLeft:"0"},children:(0,u.jsx)(S.rU,{to:"http://localhost:3001/api/auth/steam",children:(0,u.jsx)("img",{className:"steam_btn",src:"data:image/png;base64,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"})})})]}),(0,u.jsx)("div",{className:"dropdown__settings_links",children:(0,u.jsx)(S.rU,{to:"/login",className:"dropdown__settings_link",onClick:e.logoutHandler,children:"Sign out of GameFlix"})})]})},G=n(6797),I=n(8820),M=function(e){var t=e.closeAccountSettings,n=e.setLoggedUser,s=e.currentUser,c="https://cybrary2022.onrender.com",d=(0,a.useState)(!1),m=(0,r.Z)(d,2),f=m[0],p=m[1],g=(0,a.useState)(""),h=(0,r.Z)(g,2),v=h[0],_=h[1],x=(0,a.useState)(s.email),A=(0,r.Z)(x,2),j=A[0],w=A[1],b=(0,a.useState)(""),y=(0,r.Z)(b,2),N=y[0],k=y[1],S=(0,a.useState)(!1),P=(0,r.Z)(S,2),T=P[0],Z=P[1],C=(0,a.useState)(s.password),G=(0,r.Z)(C,2),M=G[0],E=G[1],D=(0,a.useState)(!0),q=(0,r.Z)(D,2),L=q[0],R=q[1],z=(0,a.useState)(""),V=(0,r.Z)(z,2),F=V[0],U=V[1],B=(0,a.useState)(!1),O=(0,r.Z)(B,2),Y=O[0],H=O[1];(0,a.useEffect)((function(){if(L){var e=s.password.replace(/./gi,"*");E(e)}else E(s.password)}),[L]);var Q=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(""),e.prev=1,e.next=4,l().post("".concat(c,"/app/update_user_email"),{originalEmail:s.email,newEmail:t});case 4:(r=e.sent).data.status<400?(n(r.data.user),_({type:"success",message:r.data.message}),w(r.data.user.email),k(""),Z(!1)):(_({type:"error",message:r.data.message}),k("")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().delete("".concat(c,"/app/delete_account"),{data:{id:s._id}});case 3:window.location="/",localStorage.removeItem("user"),localStorage.removeItem("profile"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:"profile_edit__container",children:[(0,u.jsx)("div",{className:"profile_edit__header",children:(0,u.jsx)("h3",{children:"GAMEFLIX"})}),(0,u.jsxs)("div",{className:"profile_edit__form_wrapper",style:{height:"350px"},children:[(0,u.jsx)("h3",{children:"Account Settings"}),(0,u.jsx)("div",{className:"form_container",children:(0,u.jsxs)("form",{className:"account_edit__form",children:[(0,u.jsxs)("div",{className:"account_email_container",children:["error"==v.type?(0,u.jsx)("p",{className:"account_email_error",children:v.message}):(0,u.jsx)("p",{className:"account_email_success",children:v.message}),(0,u.jsx)("h4",{style:{color:"white",fontSize:"2rem",marginLeft:"2px"},children:"Email"}),(0,u.jsx)("input",{className:"account_email_input",onChange:function(e){return w(e.target.value)},value:j}),T&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{className:"account_email_input",onChange:function(e){return k(e.target.value)},value:N,placeholder:"Enter new email",autoFocus:!0}),(0,u.jsx)("button",{type:"button",onClick:function(){k(""),Z(!1)},className:"account_email_save_btn",children:"Cancel"})]}),(0,u.jsx)("button",{type:"button",onClick:function(){T?""!==N?Q(N):(Z(!1),k("")):(Z(!0),H(!1))},className:"save_btn",children:T?"Save Email":"Change Email"})]}),(0,u.jsxs)("div",{className:"account_password_container",children:[(0,u.jsx)("h4",{style:{color:"white",fontSize:"2rem",marginLeft:"2px"},children:"Password"}),(0,u.jsx)("input",{className:"account_password_input",onChange:function(e){return E(e.target.value)},value:M}),(0,u.jsx)("span",{className:"account_password_visible_icon",onClick:function(){return R(!L)},children:L?(0,u.jsx)(I.p3W,{}):(0,u.jsx)(I.w8I,{})}),Y&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{className:"account_password_input",onChange:function(e){return U(e.target.value)},value:F,placeholder:"Enter new password",autoFocus:!0}),(0,u.jsx)("button",{type:"button",onClick:function(){U(""),H(!1)},className:"account_password_save_btn",children:"Cancel"})]}),(0,u.jsx)("button",{type:"button",onClick:function(){Y?""!==F?N:(H(!1),U("")):(H(!0),Z(!1))},className:"save_btn",children:Y?"Save Password":"Change Password"})]})]})}),(0,u.jsxs)("div",{className:"form_actions",style:{justifyContent:"space-between"},children:[(0,u.jsx)("button",{className:"cancel_btn",onClick:t,children:"Back"}),(0,u.jsx)("button",{className:"delete_account_btn",onClick:function(){return p(!0)},children:"Delete Account"})]})]}),f&&(0,u.jsx)("div",{className:"delete_account_modal",children:(0,u.jsxs)("div",{className:"delete_account_modal_content",children:[(0,u.jsx)("h4",{children:"Are you sure you want to delete your account?"}),(0,u.jsxs)("div",{className:"delete_account_modal_actions",children:[(0,u.jsxs)("div",{className:"modal_action_option",children:[(0,u.jsx)("p",{children:"Yes"}),(0,u.jsx)("span",{className:"video-game-button",onClick:J,children:"A"})]}),(0,u.jsxs)("div",{className:"modal_action_option",children:[(0,u.jsx)("p",{children:"No"}),(0,u.jsx)("span",{className:"video-game-button",onClick:function(){return p(!1)},children:"B"})]})]})]})})]})};var E=function(e){var t=(0,a.useState)(!1),n=(0,r.Z)(t,2),s=n[0],i=n[1],o=(0,a.useState)(!1),c=(0,r.Z)(o,2),l=c[0],d=c[1],f=(0,a.useState)(!1),p=(0,r.Z)(f,2),g=p[0],h=p[1],v=(0,a.useRef)(""),_=(0,a.useState)(!1),x=(0,r.Z)(_,2),A=x[0],j=x[1],w=(0,a.useState)(!1),b=(0,r.Z)(w,2),y=b[0],k=b[1],S=e.activeProfile;(0,a.useEffect)((function(){var e=function(){window.addEventListener("scroll",(function(){window.scrollY>100?i(!0):i(!1)}))};return e(),function(){window.removeEventListener("scroll",e)}}),[]);var P=function(){document.body.style.overflowY="scroll",j(!1),k(!1)};return(0,a.useEffect)((function(){var e=function(e){27===e.keyCode&&h(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,u.jsxs)("div",{className:"nav ".concat(s&&"nav__hide"),children:[A&&(0,u.jsx)("div",{className:"nav_edit_profile",children:(0,u.jsx)(G.Z,{currentProfile:S,userEmail:e.currentUser.email,viewAllProfiles:P,saveEdit:function(){e.saveEdit(),j(!1)},getProfile:function(t){return e.selectProfile(t)},twitchToken:e.twitchToken})}),y&&(0,u.jsxs)("div",{className:"nav_edit_profile",children:[" ",(0,u.jsx)(M,{closeAccountSettings:P,setLoggedUser:function(t){return e.setLoggedUser(t)},currentUser:e.currentUser})," "]}),(0,u.jsx)("img",{className:"nav__logo",src:"data:image/png;base64,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",alt:"GameFlix Logo",onClick:function(){return window.location="/"}}),(0,u.jsxs)("div",{className:"nav__right",children:[(0,u.jsxs)("div",{className:"nav__search",children:[g&&(0,u.jsx)("form",{className:"nav__search_form",onSubmit:function(t){t.preventDefault();var n=v.current.value.trim();0!=n.length&&e.fetchSubmittedGame(n)},children:(0,u.jsx)("input",{ref:v,autoFocus:!0,type:"text",placeholder:"Titles, publishers, genres",defaultValue:e.searchedGame?"".concat(e.searchedGame.name):"",onBlur:function(){v.current.value.length>0||h(!1)}})}),(0,u.jsx)(m.Ozl,{className:"nav__search_icon ".concat(g&&"search_active"),onClick:function(){return h(!g)}})]}),(0,u.jsxs)("div",{className:"nav__actions",onMouseLeave:function(){return d(!1)},children:[(0,u.jsx)("div",{className:"nav__avatar_container",onMouseOver:function(){return d(!0)},children:(0,u.jsx)("img",{className:"nav__avatar",src:S.avatar?S.avatar:N,alt:"User's avatar"})}),(0,u.jsx)(m.$Pg,{className:"nav__avatar_arrow",style:{transform:"".concat(l?"rotate(180deg)":"rotate(0deg)")}}),l&&(0,u.jsx)(C,{changeProfile:e.changeUser,activeProfile:S,allProfiles:e.currentUser.profiles,logoutHandler:e.onLogout,closeNavDropdown:function(){d(!1)},toProfilePage:e.toProfilePage,spotifyToken:e.spotifyToken,editProfile:function(){document.body.style.overflowY="hidden",j(!0)},editAccount:function(){document.body.style.overflowY="hidden",k(!0)},updateCollection:e.updateCollection,currentCollection:e.currentCollection,viewCollection:e.viewCollection})]})]})]})},D=function(e){var t=e.twitchToken,n=e.setGameDetails,c=(0,a.useState)([]),f=(0,r.Z)(c,2),p=f[0],g=f[1],h=(0,a.useState)("Week"),v=(0,r.Z)(h,2),_=v[0],x=v[1],A=(0,a.useState)(!1),j=(0,r.Z)(A,2),w=j[0],b=j[1],y=(0,a.useState)(!1),N=(0,r.Z)(y,2),k=N[0],S=N[1],P=(0,a.useState)(!0),T=(0,r.Z)(P,2),Z=T[0],C=T[1],G="https://cybrary2022.onrender.com",I=new Date,M=Math.floor(new Date(I.getTime()+6048e5)/1e3),E=Math.floor(new Date(new Date(1e3*M).setMonth(new Date(1e3*M).getMonth()+1)).getTime()/1e3),D=Math.floor(new Date(new Date(1e3*E).setMonth(new Date(1e3*E).getMonth()+12)).getTime()/1e3),q=function(e){var t=[],n=[];return e.map((function(e){-1===t.indexOf(e.game.name)&&(t.push(e.game.name),n.push(e))})),n};(0,a.useEffect)((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n,r,a,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=_,e.next="Month"===e.t0?3:"Year"===e.t0?6:9;break;case 3:return n=M,r=E,e.abrupt("break",12);case 6:return n=E,r=D,e.abrupt("break",12);case 9:return n=Math.floor(I.getTime()/1e3),r=M,e.abrupt("break",12);case 12:e.prev=12,a=3,s=0;case 15:if(!(s<a)){e.next=31;break}return e.prev=16,e.next=19,l().post("".concat(G,"/app/upcoming"),{token:t,currentDate:n,targetDate:r});case 19:return o=e.sent,g(q(o.data)),C(!1),e.abrupt("break",31);case 25:e.prev=25,e.t1=e.catch(16),console.log("Issue fetching data");case 28:s++,e.next=15;break;case 31:e.next=36;break;case 33:e.prev=33,e.t2=e.catch(12),console.log(e.t2.message);case 36:case"end":return e.stop()}}),e,null,[[12,33],[16,25]])})))).apply(this,arguments)}t&&(C(!0),function(){e.apply(this,arguments)}())}),[_,t]);var L=function(e){x(e.target.innerText),b(!1)},R=function(e){var t,n=new Date(e.replace(/-/g,"/")),r=n.getDate();switch(r){case 1:case 21:case 31:t=r+"st";break;case 2:case 22:t=r+"nd";break;case 3:case 23:t=r+"rd";break;default:t=r+"th"}return["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+t+", "+n.getFullYear()};return(0,u.jsxs)("div",{onMouseOver:function(){return S(!0)},onMouseOut:function(){return S(!1)},className:"main_row",children:[(0,u.jsxs)("div",{className:"main_row__filters",onMouseLeave:function(){return b(!1)},children:[(0,u.jsx)("h2",{children:"Coming Soon"}),(0,u.jsxs)("p",{className:"filters_filter",onMouseOver:function(){return b(!0)},children:[_," ",(0,u.jsx)(m.$Pg,{size:10,className:w?"arrow_active":"arrow"})]})," ",w&&(0,u.jsx)("div",{className:"filter_options",children:(0,u.jsxs)("ul",{children:[(0,u.jsx)("li",{style:{backgroundColor:"Week"==_?"white":"",color:"Week"==_?"black":""},onClick:L,children:"Week"}),(0,u.jsx)("li",{style:{backgroundColor:"Month"==_?"white":"",color:"Month"==_?"black":""},onClick:L,children:"Month"}),(0,u.jsx)("li",{style:{backgroundColor:"Year"==_?"white":"",color:"Year"==_?"black":""},onClick:L,children:"Year"})]})})]}),(0,u.jsxs)("div",{className:"main_row__row_posters",children:[p&&!Z&&p.map((function(e,t){var r;return(0,u.jsxs)("div",{className:"main_row__poster_container ".concat(k&&"dimmed"),onClick:function(){return n(e.game)},children:[(0,u.jsx)("h4",{className:"main__poster_released",children:R(e.human)}),(0,u.jsx)("img",{className:"main_poster",src:"//images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(r=e.game.cover)||void 0===r?void 0:r.image_id,".jpg"),alt:e.name},e.id)]},e.id)})),Z&&(0,u.jsx)("div",{className:"main_row__loading_container",children:(0,s.Z)(Array(4)).map((function(e,t){return(0,u.jsx)("div",{className:"main_row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))})]})]})},q=function(e){var t=e.twitchToken,n=e.setGameDetails,c=(0,a.useState)([]),m=(0,r.Z)(c,2),f=m[0],p=m[1],g=(0,a.useState)(!1),h=(0,r.Z)(g,2),v=h[0],_=h[1],x="https://cybrary2022.onrender.com",A=Math.floor((new Date).getTime()/1e3),j=JSON.parse(sessionStorage.getItem("trending"));return(0,a.useEffect)((function(){if(t){if(j&&j.length>0)return p(j),void _(!1);!function(){e.apply(this,arguments)}()}function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,n=[],e.next=5,l().post("".concat(x,"/app/trending"),{token:t,currentDate:A});case 5:return r=e.sent,a=new Set,r.data.filter((function(e){return!a.has(e.game.id)&&a.add(e.game.id).add(e.game)})),a.forEach((function(e){return"object"==typeof e&&n.push(e)})),n.sort((function(e,t){return t.release_dates.findLast((function(e){return e.date}))-e.release_dates.findLast((function(e){return e.date}))||t.hypes-e.hypes})),p(n.slice(0,10)),sessionStorage.setItem("trending",JSON.stringify(n.slice(0,10))),_(!1),e.abrupt("return",r);case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:_(!1);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}}),[t]),v?(0,u.jsx)("div",{className:"row__loading_container",children:(0,s.Z)(Array(10)).map((function(e,t){return(0,u.jsx)("div",{className:"trending_row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))}):(0,u.jsxs)("div",{className:"trending_row",children:[(0,u.jsx)("h2",{children:"TRENDING TITLES"}),(0,u.jsx)("div",{className:"trending_row__posters",children:f.map((function(e,t){var r;return(0,u.jsx)(a.Fragment,{children:(0,u.jsxs)("div",{className:"trending_row__poster_wrapper",children:[(0,u.jsx)("div",{className:"trending_row__rank",children:t+1}),(0,u.jsxs)("div",{className:"trending_row__poster_container",style:{marginLeft:9==t?"160px":0==t&&"65px"},onClick:function(){return n(e)},children:[" ",!v&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("img",{loading:"lazy",className:"trending_row__poster",src:"https://images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(r=e.cover)||void 0===r?void 0:r.image_id,".jpg"),alt:e.name})})]})]})},e.name)}))})]})},L=(n(276),function(e){var t=e.twitchToken,n=(e.setGameDetails,(0,a.useState)([])),s=(0,r.Z)(n,2),c=s[0],l=(s[1],(0,a.useState)(!1)),u=(0,r.Z)(l,2),d=(u[0],u[1]);(0,a.useEffect)((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.abrupt("return");case 5:e.prev=5,e.t0=e.catch(1),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[1,5]])})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]);return null===c||void 0===c||c.sort((function(e,t){return e.rating_count>t.rating_count?-1:t.rating_count>e.rating_count?1:0})),""}),R=n(1293),z=n(6234),V=new(n.n(z)())({clientId:"05e6f02e47724a63b635cfdac09fc991"}),F=localStorage.getItem("profile"),U=function(e){var t=e.trackUri,n=e.playAudio,r=e.beginPlayback,s=e.pausePlayback,i=e.spotifyToken;if((0,a.useEffect)((function(){V.setAccessToken(i)}),[i]),(0,a.useEffect)((function(){r()}),[t]),i)return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"playback_container",children:(0,u.jsx)(R.ZP,{token:i,callback:function(e){e.isPlaying||s()},uris:t?[t]:[],play:n,styles:{color:"white",bgColor:"rgba(0,0,0,0.8)",sliderColor:F.color,trackArtistColor:"white",trackNameColor:F.color}})})})};var B=new Date,O=(Math.floor(B.getTime()/1e3),[{requestId:"fetchAdventureTitles",genreId:31,title:"ACTION/ADVENTURE GAMES"},{requestId:"fetchArcadeTitles",genreId:33,title:"ARCADE GAMES"},{requestId:"fetchMusicTitles",genreId:7,title:"MUSIC GAMES"},{requestId:"fetchHackTitles",genreId:25,title:"HACK/SLASH TITLES"},{requestId:"fetchFightingTitles",genreId:4,title:"FIGHTING GAMES"},{requestId:"fetchIndieTitles",genreId:32,title:"INDIE GAMES"},{requestId:"fetchMassivelyMultiplayerTitles",genreId:36,title:"MOBA GAMES"},{requestId:"fetchPlatformerTitles",genreId:8,title:"PLATFORMER GAMES"},{requestId:"fetchPuzzleTitles",genreId:9,title:"PUZZLE GAMES"},{requestId:"fetchRacingTitles",genreId:10,title:"RACING GAMES"},{requestId:"fetchRPGTitles",genreId:12,title:"RPG GAMES"},{requestId:"fetchShooterTitles",genreId:5,title:"SHOOTER GAMES"},{requestId:"fetchSimulationTitles",genreId:13,title:"SIMULATION GAMES"},{requestId:"fetchSportsTitles",genreId:14,title:"SPORTS GAMES"},{requestId:"fetchStrategy",genreId:15,title:"STRATEGY GAMES"}]);var Y=n(6907),H=(0,a.lazy)((function(){return n.e(938).then(n.bind(n,7654))})),Q=(0,a.lazy)((function(){return n.e(37).then(n.bind(n,5872))})),J=(0,a.lazy)((function(){return Promise.all([n.e(803),n.e(427)]).then(n.bind(n,1403))})),K=new URLSearchParams(window.location.search).get("code"),W=window.location.search.split("?")[1],X=function(e){var t=e.currentUser,n=e.twitchToken,s=e.currentProfile,c=e.currentCollection,d=e.userNotes,m=(e.manageProfiles,e.updateCollection),f=(e.selectProfile,e.fetchGame),p=e.addGame,g=e.removeGame,h=e.logoutUser,v=function(){var e=localStorage.getItem("twitch_auth"),t=(0,a.useState)([]),n=(0,r.Z)(t,2),s=n[0],c=n[1],u=(0,a.useState)(!0),d=(0,r.Z)(u,2),m=d[0],f=d[1],p="https://cybrary2022.onrender.com",g=new Date;(0,a.useEffect)((function(){var t=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat(p,"/app/get_genres"));case 2:if(t=e.sent,r=new Date(t.data.last_updated),!(g>r.setDate(r.getDate()+1))){e.next=8;break}return e.abrupt("return",n());case 8:return c(t.data[0].genres_list),f(!1),e.abrupt("return",t.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Promise.all(O.map((function(t){return l().post("".concat(p,"/app/game_genre"),{token:e,genreId:t.genreId,genreTitle:t.title})})));case 4:n=t.sent,r=n.map((function(e){return e.data})),h(r),f(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var h=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().post("".concat(p,"/app/update_genres"),{genreList:t,date:g});case 2:n=e.sent,c(n.data.genres_list);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{genreGamesList:s,isLoading:m}}(),_=(0,a.useState)(!1),A=(0,r.Z)(_,2),j=A[0],w=(A[1],(0,a.useState)({status:"",message:""})),b=(0,r.Z)(w,2),N=b[0],k=b[1],S=(0,a.useState)(null),P=(0,r.Z)(S,2),T=P[0],Z=P[1],C=(0,a.useState)(!1),G=(0,r.Z)(C,2),I=G[0],M=G[1],R=(0,a.useState)(),z=(0,r.Z)(R,2),V=z[0],F=(z[1],(0,a.useState)(!1)),B=(0,r.Z)(F,2),X=B[0],$=B[1],ee=(0,a.useState)(!1),te=(0,r.Z)(ee,2),ne=(te[0],te[1]),re=(0,a.useState)(null),ae=(0,r.Z)(re,2),se=(ae[0],ae[1]),ie=(0,a.useState)(null),oe=(0,r.Z)(ie,2),ce=(oe[0],oe[1]),le=(0,a.useState)(!1),ue=(0,r.Z)(le,2),de=ue[0],me=ue[1],fe=(0,a.useState)(null),pe=(0,r.Z)(fe,2),ge=pe[0],he=pe[1],ve=(0,a.useState)(!1),_e=(0,r.Z)(ve,2),xe=(_e[0],_e[1]),Ae=(0,a.useState)(null),je=(0,r.Z)(Ae,2),we=je[0],be=je[1],ye=(0,a.useState)(null),Ne=(0,r.Z)(ye,2),ke=Ne[0],Se=Ne[1],Pe=function(e){var t=(0,a.useState)(),n=(0,r.Z)(t,2),s=n[0],c=n[1],u=(0,a.useState)(),d=(0,r.Z)(u,2),m=d[0],f=d[1],p=(0,a.useState)(),g=(0,r.Z)(p,2),h=g[0],v=g[1],_="https://cybrary2022.onrender.com",x=sessionStorage.getItem("spotify_auth");return(0,a.useEffect)((function(){if(x)return console.log(x),void c(JSON.parse(x));if(e){var t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l().post("".concat(_,"/app/spotify_authentication"),{code:e,baseURL:_});case 3:n=t.sent,c(n.data.tokenRequest.body.access_token),f(n.data.tokenRequest.body.refresh_token),v(n.data.tokenRequest.body.expires_in),sessionStorage.setItem("spotify_auth",JSON.stringify(n.data.tokenRequest.body.access_token)),window.history.pushState({},null,"/"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),window.location="/";case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]),(0,a.useEffect)((function(){if(m&&h){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().post("".concat(_,"/app/refresh_token"),{refreshToken:m,baseURL:_});case 3:t=e.sent,c(t.data.body.body.access_token),f(t.data.body.body.refresh_token),v(t.data.body.body.expires_in),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("REFRESH TOKEN ERROR"),window.location="/";case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=setInterval((function(){e()}),1e3*(h-60));return function(){return clearTimeout(t)}}}),[m,h]),s}(K);!function(e){var t=(0,a.useState)([]),n=(0,r.Z)(t,2),s=n[0],c=n[1];(0,a.useEffect)((function(){if(e){var t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l().get("".concat("https://cybrary2022.onrender.com","/steam/get_owned_games"),{params:{id:e}});case 3:n=t.sent,localStorage.setItem("steamID",n.config.params.id),console.log(n.data),c(n.data),window.history.pushState({},null,"/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),console.log("GET STEAM COLLECTION ERROR");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e])}(W);(0,a.useEffect)((function(){ge||(document.body.style.overflow="auto")}),[]);var Te=function(){document.body.style.overflow="auto",he(null)},Ze=function(e){Z(e)};return X?(0,u.jsx)("div",{className:"loading_profile__container",children:(0,u.jsx)("div",{className:"loading_profile",children:(0,u.jsx)("img",{src:s.avatar,alt:"current user avatar"})})}):s?null!==ke?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:[(0,u.jsx)(H,{setNotification:function(e,t){return k({status:e,message:t})},game:ke,closeDetails:function(){return Se(null)},twitchToken:n,addGame:function(e){return p(e)},removeGame:function(e){return g(e)},activeProfile:s}),(0,u.jsx)(Q,{notification:N,displayNotification:j,hideNotification:function(){k({message:"",status:""})}})]})}):de?(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:(0,u.jsx)(J,{collection:c,activeProfile:s,backToHome:function(){return me(!1)},currentTrack:T,playTrack:Ze,isPlaying:I,pausePlayback:function(){return M(!1)},resumePlayback:function(){return M(!0)},setSelectedProfile:function(e){return ce(e)},spotifyToken:Pe,removeGame:function(e){return g(e)},updateCollection:m,userNotes:d})}):(0,u.jsxs)("div",{className:"App",children:[(0,u.jsx)(E,{currentUser:t,activeProfile:s,changeUser:function(e){$(!0),localStorage.setItem("profile",e.name),setTimeout((function(){$(!1)}),2e3)},onLogout:h,fetchSubmittedGame:f,toProfilePage:function(){return localStorage.removeItem("profile")},selectProfile:function(e){return ce(e)},spotifyToken:Pe,twitchToken:n,saveEdit:function(){return ne(!0)},setLoggedUser:function(e){return se(e)},updateCollection:m,currentCollection:c,viewCollection:function(){return me(!0)}}),(0,u.jsx)(y,{setGameDetails:function(e){return Se(e)},addGame:function(e){return p(e)},activeProfile:s}),(0,u.jsx)(D,{twitchToken:n,setGameDetails:function(e){return Se(e)}}),(0,u.jsx)(L,{twitchToken:n,setGameDetails:function(e){return Se(e)}}),(0,u.jsx)(q,{twitchToken:n,setGameDetails:function(e){return Se(e)}}),ge&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h1",{className:"row__preview_close",onClick:Te,children:"X"}),(0,u.jsx)("h1",{className:"row__preview_close options",onClick:function(){xe(!0)},children:(0,u.jsx)(Y.eBn,{})})]}),(0,u.jsx)("div",{className:"".concat(null!==ge&&"game_preview__modal")}),v.genreGamesList.map((function(e){return(0,u.jsx)(x,{activeProfile:s,spotifyToken:Pe,genreDetails:Object.entries(e),playTrack:Ze,currentTrack:T,setGameDetails:function(e){return Se(e)},resumePlayback:function(e){return M(!0)},pausePlayback:function(e){return M(!1)},isPlaying:I,currentGameOpen:ge,openGame:function(e){return function(e){console.log(e),he(e.id),document.body.style.overflow="hidden"}(e)},closeGameWindow:Te,addGame:function(e){return p(e)},setNotification:function(e,t){return k({status:e,message:t})},loading:V,hoverGame:function(e){return be(e)},hoverAway:function(){return be(null)},currentHover:we},Object.keys(e))})),Pe&&(0,u.jsx)(U,{spotifyToken:Pe,playAudio:I,beginPlayback:function(e){return M(!0)},pausePlayback:function(e){return M(!1)},trackUri:null===T||void 0===T?void 0:T.uri}),(0,u.jsx)(Q,{notification:N,displayNotification:j,hideNotification:function(){k({message:"",status:""})}})]}):void 0},$=(0,a.memo)(X)},3676:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_E.9cf6d7f3f8e673367d2a.png"},3224:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_M.37c27952605b5ceea210.png"},1879:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_RP.7e329028594a72ed21ee.png"},1784:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_T.5f77aabf3318dacd4cfc.png"},4654:function(){}}]);
//# sourceMappingURL=34.ede76123.chunk.js.map