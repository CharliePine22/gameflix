"use strict";(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[931],{4931:function(e,s,r){r.r(s),r.d(s,{default:function(){return k}});var a=r(7762),n=r(4165),t=r(5861),i=r(9439),c=r(2791),l=r(1413);function o(e,s){if(null==e)return{};var r,a,n=function(e,s){if(null==e)return{};var r,a,n={},t=Object.keys(e);for(a=0;a<t.length;a++)r=t[a],s.indexOf(r)>=0||(n[r]=e[r]);return n}(e,s);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(a=0;a<t.length;a++)r=t[a],s.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var d=["count","wrapper","className","containerClassName","containerTestId","circle","style"],u=c.createContext({});function m(e){for(var s,r,a,n=e.count,t=void 0===n?1:n,m=e.wrapper,h=e.className,_=e.containerClassName,g=e.containerTestId,p=e.circle,v=void 0!==p&&p,x=e.style,f=o(e,d),j=c.useContext(u),N=(0,l.Z)({},f),b=0,y=Object.entries(f);b<y.length;b++){var k=(0,i.Z)(y[b],2),w=k[0];"undefined"===typeof k[1]&&delete N[w]}var C=(0,l.Z)((0,l.Z)((0,l.Z)({},j),N),{},{circle:v}),S=(0,l.Z)((0,l.Z)({},x),function(e){var s=e.baseColor,r=e.highlightColor,a=e.width,n=e.height,t=e.borderRadius,i=e.circle,c=e.direction,l=e.duration,o=e.enableAnimation,d=void 0===o||o,u={};return"rtl"===c&&(u["--animation-direction"]="reverse"),"number"===typeof l&&(u["--animation-duration"]="".concat(l,"s")),d||(u["--pseudo-element-display"]="none"),"string"!==typeof a&&"number"!==typeof a||(u.width=a),"string"!==typeof n&&"number"!==typeof n||(u.height=n),"string"!==typeof t&&"number"!==typeof t||(u.borderRadius=t),i&&(u.borderRadius="50%"),"undefined"!==typeof s&&(u["--base-color"]=s),"undefined"!==typeof r&&(u["--highlight-color"]=r),u}(C)),Z="react-loading-skeleton";h&&(Z+=" ".concat(h));for(var O=null!==(s=C.inline)&&void 0!==s&&s,I=[],R=Math.ceil(t),G=0;G<R;G++){var D=S;if(R>t&&G===R-1){var E=null!==(r=D.width)&&void 0!==r?r:"100%",P=t%1,T="number"===typeof E?E*P:"calc(".concat(E," * ").concat(P,")");D=(0,l.Z)((0,l.Z)({},D),{},{width:T})}var A=c.createElement("span",{className:Z,style:D,key:G},"\u200c");O?I.push(A):I.push(c.createElement(c.Fragment,{key:G},A,c.createElement("br",null)))}return c.createElement("span",{className:_,"data-testid":g,"aria-live":"polite","aria-busy":null===(a=C.enableAnimation)||void 0===a||a},m?I.map((function(e,s){return c.createElement(m,{key:s},e)})):I)}var h=r(4569),_=r.n(h),g=r(184),p=function(e){var s=e.count;return"full"==e.type?(0,g.jsx)("section",{className:"skeleton_card_wrapper",children:(0,g.jsx)("ul",{className:"list",children:Array(s).fill().map((function(e,s){return(0,g.jsxs)("li",{className:"card",children:[(0,g.jsx)(m,{height:180,className:"card_banner",highlightColor:"#323232"}),(0,g.jsxs)("h4",{className:"card-title",children:[(0,g.jsx)(m,{className:"card_cover",baseCover:"rgb(35, 35, 35)",highlightColor:"#222222",circle:!1})," ","\xa0",(0,g.jsx)(m,{className:"skeleton_title",highlightColor:"#222222",baseCover:"rgb(35, 35, 35)"})]}),(0,g.jsx)("p",{children:(0,g.jsx)(m,{style:{marginLeft:"10px"},className:"card-channel",width:"60%",highlightColor:"#222222"})}),(0,g.jsx)("div",{children:(0,g.jsx)(m,{style:{marginLeft:"10px"},className:"card-metrics",width:"90%",highlightColor:"#222222"})})]},s)}))})}):(0,g.jsx)("section",{className:"skeleton_card_wrapper",children:(0,g.jsx)("ul",{className:"list_small",children:Array(s).fill().map((function(e,s){return(0,g.jsxs)("li",{className:"card_small",children:[(0,g.jsx)(m,{height:104,className:"card_banner_small",highlightColor:"#222222",enableAnimation:!1}),(0,g.jsxs)("h4",{className:"card-title_small",children:[(0,g.jsx)(m,{className:"card_cover_small",circle:!1,highlightColor:"#222222"})," ","\xa0",(0,g.jsx)(m,{className:"skeleton_title_small",highlightColor:"#222222"})]})]},s)}))})})},v=r(7689),x=r(6355),f=r(276),j=r(3676),N=r(1784),b=r(3224),y=r(1879),k=(r(7654),r(5872),function(e){var s,r,l,o=e.setGameDetails,d=e.game,u=e.closeSearchResults,h=e.currentGameOpen,k=e.openGame,w=e.closeGameWindow,C=e.addGameHandler,S=localStorage.getItem("twitch_auth"),Z=JSON.parse(localStorage.getItem("searches")),O=(0,v.TH)(),I=(0,c.useState)(Z),R=(0,i.Z)(I,2),G=R[0],D=R[1],E=(0,c.useState)(""),P=(0,i.Z)(E,2),T=P[0],A=P[1],J=(0,c.useState)(!1),X=(0,i.Z)(J,2),z=X[0],F=X[1],H=O.state.name,K=(0,c.useState)(H),L=(0,i.Z)(K,2),M=L[0],U=L[1],W=(0,c.useState)([]),q=(0,i.Z)(W,2),B=q[0],Q=q[1],V=(0,c.useState)(!1),Y=(0,i.Z)(V,2),$=Y[0],ee=Y[1],se=(0,c.useState)(!1),re=(0,i.Z)(se,2),ae=re[0],ne=re[1],te=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(s){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ne(!0),ee(!1),r=s.replace("Poke","Pok\xe9"),e.next=6,_().post("/app/search_game",{token:S,gameName:r});case 6:return a=e.sent,Q(a.data),""!==H&&(Z?(Z.push(H),D(Z),localStorage.setItem("searches",JSON.stringify(Z))):(localStorage.setItem("searches",JSON.stringify([H])),D(Z))),ne(!1),ee(!0),e.abrupt("return",B);case 14:e.prev=14,e.t0=e.catch(0),ne(!1),ee(!0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(s){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){""!=H&&(window.scrollTo(0,0),te(H))}),[H]);var ie=function(e){var s=Z.filter((function(s){return s!==e}));D([]),localStorage.setItem("searches",JSON.stringify(s))},ce=function(e){"Enter"===e.key&&te(M)},le=function(e){var s,r=[],n=(0,a.Z)(e);try{for(n.s();!(s=n.n()).done;){var t=s.value;-1===r.indexOf(t)&&r.push(t)}}catch(i){n.e(i)}finally{n.f()}return localStorage.setItem("searches",JSON.stringify(r)),r.reverse()},oe=function(e,s){e.stopPropagation(),A(s),k(s)};return console.log(d),ae&&!$?(0,g.jsxs)("div",{className:"search_results",children:[(0,g.jsxs)("div",{className:"search_results__nav",children:[(0,g.jsx)("span",{onClick:u,children:"X"}),(0,g.jsx)("div",{className:"search_results__nav_search",children:(0,g.jsx)("input",{placeholder:"".concat(""!==H?H:"Search..."),value:M,onKeyDown:ce,onChange:function(e){return U(e.target.value)}})})]}),(0,g.jsxs)("div",{className:"search_results__container_skeleton",children:[(0,g.jsxs)("div",{className:"search_results__recents",children:[(0,g.jsx)("h2",{children:"Recent Searches"}),(0,g.jsx)("ul",{className:"recent_searches",children:Z&&le(Z).slice(0,4).map((function(e,s){return(0,g.jsxs)("li",{className:"recent_searches__item",children:[(0,g.jsx)("p",{onClick:function(){return te(e)},children:e}),(0,g.jsx)("span",{onClick:function(){return ie(e)},children:"X"})]},s)}))})]}),(0,g.jsxs)("div",{className:"top_results_row_skeleton",children:[(0,g.jsx)("h2",{children:"Top Results"}),(0,g.jsx)(p,{count:3,type:"full"})]}),(0,g.jsxs)("div",{className:"remainder_results_skeleton",children:[(0,g.jsx)("h2",{children:"Results"}),(0,g.jsx)(p,{count:9})]})]})]}):(0,g.jsxs)("div",{className:"search_results",children:[(0,g.jsxs)("div",{className:"search_results__nav",children:[(0,g.jsx)("span",{onClick:u,children:"X"}),(0,g.jsxs)("div",{className:"search_results__nav_search",children:[(0,g.jsx)("input",{value:M,onChange:function(e){return U(e.target.value)},placeholder:"Search..",onKeyDown:ce}),(0,g.jsx)(x.U41,{className:"search_results__nav_search_icon",onClick:ce})]})]}),(0,g.jsxs)("div",{className:"search_results__container",children:[h===T.id&&(0,g.jsxs)("div",{className:"search_results__game_preview",children:[(0,g.jsx)("h1",{onClick:w,children:"X"}),(0,g.jsx)(f.Z,{style:{top:"230px"},game:T,gameCover:"//images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(null===(s=T.cover)||void 0===s?void 0:s.image_id,".jpg"),ratingImage:function(e){if(!e||!e.age_ratings)return(0,g.jsx)("img",{className:"row__poster__esrb_img",src:y});var s=null===e||void 0===e?void 0:e.age_ratings.filter((function(e){return 1==e.category||2==e.category}));if(0==s.length||!e.age_ratings)return(0,g.jsx)("img",{className:"row__poster__esrb_img",src:y});switch(s[0].rating){case 1:case 2:case 8:case 9:return(0,g.jsx)("img",{className:"row__poster__esrb_img",src:j});case 3:case 4:case 10:return(0,g.jsx)("img",{className:"row__poster__esrb_img",src:N});case 5:case 11:return(0,g.jsx)("img",{className:"row__poster__esrb_img",src:b});default:return(0,g.jsx)("img",{className:"row__poster__esrb_img",src:y})}}(T),addGame:C,displayDetails:o,hideDetails:w,fetchGameDetails:function(e){o(e)},viewingPreview:z,openGame:function(){return F(!0)},closeGame:function(){return F(!1)}})]}),(0,g.jsxs)("div",{className:"search_results__recents",children:[(0,g.jsx)("h2",{children:"Recent Searches"}),(0,g.jsx)("ul",{className:"recent_searches",children:G&&le(G).slice(0,4).map((function(e,s){return(0,g.jsxs)("li",{className:"recent_searches__item",children:[(0,g.jsx)("p",{onClick:function(){return te(e)},children:e}),(0,g.jsx)("span",{onClick:function(){return ie(e)},children:"X"})]},s)}))})]}),0==B.length&&(0,g.jsx)("div",{className:"search_results__error",children:(0,g.jsx)("p",{children:"Sorry, no results for current game, please refine your search and try again!"})}),B.length>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{children:"Top Results"}),(0,g.jsx)("div",{className:"top_results_row",children:null===(r=B.slice(0,3))||void 0===r?void 0:r.map((function(e){var s,r,a,n;return(0,g.jsxs)("div",{className:"top_result_container",onClick:function(){return o(e)},children:[(0,g.jsxs)("div",{className:"top_result_upper",children:[(0,g.jsx)("div",{className:"result_publisher",onClick:function(s){return oe(s,e)},children:(0,g.jsx)("h3",{children:"3D"})}),(0,g.jsx)("img",{src:"//images.igdb.com/igdb/image/upload/t_screenshot_big/".concat(e.artworks?null===(s=e.artworks[0])||void 0===s?void 0:s.image_id:null===(r=e.cover)||void 0===r?void 0:r.image_id,".jpg")})]}),(0,g.jsxs)("div",{className:"top_result_lower",children:[(0,g.jsx)("h3",{className:"game_name",children:e.name||(0,g.jsx)(m,{count:1})}),(0,g.jsx)("ul",{className:"game_theme_list",children:null===(a=e.themes)||void 0===a?void 0:a.map((function(e){return"Sandbox"!==e.name&&(0,g.jsx)("li",{children:e.name},e.id)}))})]}),(0,g.jsx)("div",{className:"game_cover",style:{backgroundSize:"100% 100%",backgroundImage:"url(//images.igdb.com/igdb/image/upload/t_cover_big/".concat(null===(n=e.cover)||void 0===n?void 0:n.image_id,".jpg)"),backgroundPosition:"center"}})]},e.id)}))})]}),B.length>0&&(0,g.jsxs)("div",{className:"remainder_results",children:[(0,g.jsx)("h2",{children:"Results"}),null===(l=B.slice(3))||void 0===l?void 0:l.map((function(e){var s;return void 0!==e.cover&&(0,g.jsxs)("div",{className:"results_container",onClick:function(){return o(e)},children:[(0,g.jsx)("div",{className:"results_container_img",style:{backgroundSize:"cover",backgroundImage:"url(//images.igdb.com/igdb/image/upload/t_cover_big/".concat(e.cover.image_id,".jpg)"),backgroundPosition:"center"}}),(0,g.jsxs)("div",{className:"results_container_content",children:[(0,g.jsx)("h3",{className:"game_name_remainder",children:e.name}),(0,g.jsx)("div",{className:"remainder_3d",onClick:function(s){return oe(s,e)},children:(0,g.jsx)("h3",{children:"3D"})}),(0,g.jsx)("ul",{className:"game_theme_list_lower",children:null===(s=e.themes)||void 0===s?void 0:s.map((function(e,s){return"Sandbox"!==e.name&&s<3&&(0,g.jsx)("li",{children:e.name},e.id)}))})]})]},e.id)}))]})]}),(0,g.jsx)("div",{className:"search_bottom_fade"})]})})}}]);
//# sourceMappingURL=931.6e6994b9.chunk.js.map