(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[626],{606:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return we}});var a=n(9439),r=n(2791),s=n(3433),i=n(4165),o=n(5861),c=n(276),l=n(4569),u=n.n(l),d=n(184),m=function(e){var t=e.delay;return(0,d.jsx)("div",{className:"placeholder",style:{animationDelay:"".concat(t,"ms")},onClick:function(e){return e.stopPropagation()}})},f=n(6355),p=n(458),h=n(3676),g=n(1784),v=n(3224),_=n(1879);var x=function(e){e.activeProfile;var t=e.spotifyToken,n=e.genreDetails,l=e.playTrack,x=e.currentTrack,j=e.setGameDetails,w=e.resumePlayback,N=e.pausePlayback,y=e.isPlaying,A=e.currentGameOpen,b=e.closeGameWindow,k=e.openGame,C=e.addGame,S=e.setNotification,Z=e.loading,I=e.hoverGame,E=e.hoverAway,D=e.currentHover,M=(0,r.useState)(null),T=(0,a.Z)(M,2),P=T[0],G=T[1],L="https://cybrary2022.onrender.com",R=(0,r.useState)([]),U=(0,a.Z)(R,2),F=U[0],O=U[1],B=(0,r.useState)(!1),Q=(0,a.Z)(B,2),H=Q[0],z=Q[1],X=(0,r.useState)(!1),W=(0,a.Z)(X,2),Y=W[0],J=W[1],V=(0,r.useState)(!1),K=(0,a.Z)(V,2),q=K[0],$=K[1],ee=n[0][0],te=n[0][1],ne=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return G(null),S("ERROR","Please connect to Spotify through the nav dropdown!"),e.abrupt("return");case 4:return e.prev=4,$(!0),e.next=8,u().get("".concat(L,"/app/spotify_album"),{params:{game:n.name,token:t,baseURL:L}});case 8:if("OK"===(a=e.sent).data.status){e.next=14;break}console.log(a.data),$(!1),e.next=19;break;case 14:return G(n.id),O(a.data.tracks),z(!0),$(!1),e.abrupt("return",a.data.tracks);case 19:e.next=27;break;case 21:return e.prev=21,e.t0=e.catch(4),console.log(e.t0),console.log("OST FETCH ISSUE"),$(!1),e.abrupt("return");case 27:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(e,t){e.stopPropagation(),C(t)},re=function(e){if(!e||!e.age_ratings)return(0,d.jsx)("img",{className:"row__poster__esrb_img",src:_});var t=null===e||void 0===e?void 0:e.age_ratings.filter((function(e){return 1==e.category||2==e.category}));if(0==t.length||!e.age_ratings)return(0,d.jsx)("img",{className:"row__poster__esrb_img",src:_});switch(t[0].rating){case 1:case 2:case 8:case 9:return(0,d.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb E rating",src:h});case 3:case 4:case 10:return(0,d.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb T rating",src:g});case 5:case 11:return(0,d.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb M rating",src:v});default:return(0,d.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb RP rating",src:_})}};return(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("h2",{className:"row__title",children:ee}),(0,d.jsxs)("div",{className:"row__posters",children:[te.map((function(e){var t,n;return void 0!==e.cover&&(0,d.jsx)(r.Fragment,{children:!Z&&(0,d.jsxs)("div",{className:"row__poster_wrapper ".concat(A==e.id&&"viewing_game"),style:{zIndex:A!==e.id&&null!==A&&"-1"},onMouseOver:function(){return I(e.id)},onMouseLeave:function(){return H?I(e.id):E()},children:[D==e.id&&!A&&(0,d.jsxs)("div",{className:"row__blur_wrapper",children:[q?(0,d.jsxs)("div",{className:"playlist_loading",children:[(0,d.jsx)("div",{className:"playlist_loading_dot"}),(0,d.jsx)("div",{className:"playlist_loading_dot"}),(0,d.jsx)("div",{className:"playlist_loading_dot"})]}):(0,d.jsxs)("div",{className:"row__blur_details",style:{display:P==e.id&&"none"},children:[(0,d.jsxs)("div",{className:"row__blur_item",onClick:function(t){return ae(t,e)},children:[(0,d.jsx)(f.ymq,{className:"blur_item_icon"}),(0,d.jsx)("p",{children:"Add"})]}),(0,d.jsxs)("div",{className:"row__blur_item",onClick:function(){!function(e){b(),j(e)}(e)},children:[(0,d.jsx)(p.QEt,{className:"blur_item_icon more"}),(0,d.jsx)("p",{children:"See Details"})]}),(0,d.jsxs)("div",{onClick:function(t){return function(e,t){e.stopPropagation(),b(),G(t.id),ne(t)}(t,e)},className:"row__blur_item",children:[(0,d.jsx)(f.HcQ,{className:"blur_item_icon music"}),(0,d.jsx)("p",{children:"Play Soundtrack"})]}),(0,d.jsxs)("div",{className:"row__blur_item",onClick:function(){return k(e)},children:[(0,d.jsx)(f.iVx,{className:"blur_item_icon"}),(0,d.jsx)("p",{children:"View Case"})]})]}),H&&P==e.id&&(0,d.jsxs)("div",{className:"soundtrack_container",children:[(0,d.jsx)("span",{onClick:function(e){return function(e){e.stopPropagation(),G(null),z(!1)}(e)},children:"\u2190"}),(0,d.jsx)("h3",{children:"Spotify OST"}),(0,d.jsx)("ul",{className:"soundtracks",children:null===F||void 0===F?void 0:F.map((function(e){return(0,d.jsxs)("li",{onClick:function(e){return e.stopPropagation()},className:"soundtrack",children:[(0,d.jsx)("p",{style:{color:null!==x&&x.name==e.name?"green":"white",fontWeight:null!==x&&x.name==e.name?"600":"400"},children:(t=e.name,t.split("-")[0].split("(")[0])}),null!==x&&x.name!==e.name||!y?(0,d.jsx)(f.gmG,{onClick:function(t){return function(e,t){e.stopPropagation(),null!==x&&t.name==x.name&&w(),l(t)}(t,e)}}):(0,d.jsx)(f.Wh,{onClick:function(e){return N()}})]},e.id);var t}))})]})]}),(0,d.jsx)("div",{className:"row__poster_container",children:(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"row__poster_front",style:{transformStyle:A&&"revert"},children:(0,d.jsx)("img",{loading:"lazy",className:"row__poster",src:"//images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(t=e.cover)||void 0===t?void 0:t.image_id,".jpg"),alt:e.name+" cover image"})})})}),A===e.id&&(0,d.jsx)(c.Z,{game:e,gameCover:"//images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(null===(n=e.cover)||void 0===n?void 0:n.image_id,".jpg"),ratingImage:re(e),addGame:ae,viewingPreview:Y,openGame:function(){return J(!0)},closeGame:function(){return J(!1)}})]})},e.id)})),Z&&(0,d.jsx)("div",{className:"row__loading_container",children:(0,s.Z)(Array(10)).map((function(e,t){return(0,d.jsx)("div",{className:"row__placeholder__wrapper",children:(0,d.jsx)(m,{delay:t},t)},t)}))})]})]})},j=n(7692),w=function(){var e=(0,r.useState)(!1),t=(0,a.Z)(e,2),n=t[0],s=t[1],c=(0,r.useState)([]),l=(0,a.Z)(c,2),d=l[0],m=l[1],f=(0,r.useState)(""),p=(0,a.Z)(f,2),h=p[0],g=p[1],v=(0,r.useState)(""),_=(0,a.Z)(v,2),x=_[0],j=_[1],w=(0,r.useState)(null),N=(0,a.Z)(w,2),y=N[0],A=N[1],b=localStorage.getItem("twitch_auth"),k=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,a,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,u().post("".concat("https://cybrary2022.onrender.com","/app/search_game"),{token:b,gameName:""});case 4:return t=e.sent,e.next=7,t.data.sort((function(e,t){return t.rating-e.rating}));case 7:n=e.sent,a=n[Math.floor(Math.random()*t.data.length-1)],m(n),g(a),r=a.videos.find((function(e){return e.name.includes("Trailer")})),j("https://www.youtube.com/watch?v=".concat(r.video_id)),s(!1),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),A(e.t0),s(!1);case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){!b||d.length>0||k()}),[b]),(0,r.useEffect)((function(){y&&k()}),[y]);return{isLoading:n,serverError:y,currentGame:h,currentGameTrailer:x,displayNewBanner:function(){var e=d[Math.floor(Math.random()*d.length-1)],t=e.videos.find((function(e){return e.name.includes("Trailer")}));g(e),j("https://www.youtube.com/watch?v=".concat(t.video_id))}}},N=n(3134),y=n.n(N);var A=function(e){var t,n,s,i,o,c=e.setGameDetails,l=e.addGame,u=e.activeProfile,m=w(),f=(0,r.useRef)(),p=u.collection&&u.collection.some((function(e){return(null===e||void 0===e?void 0:e.id)===m.currentGame.id})),h=(0,r.useState)(!0),g=(0,a.Z)(h,2),v=g[0],_=g[1],x=(0,r.useState)(!0),N=(0,a.Z)(x,2),A=N[0],b=N[1],k=(0,r.useState)(!1),C=(0,a.Z)(k,2),S=C[0],Z=C[1];return(0,r.useEffect)((function(){if(!m.isLoading&&f){var e=new IntersectionObserver((function(e){(0,a.Z)(e,1)[0].isIntersecting?b(!0):b(!1)}),{root:null,rootMargin:"0px",threshold:.1});f.current&&e.observe(f.current)}}),[f,m.isLoading,m.currentGameTrailer]),(0,r.useEffect)((function(){b(!0)}),[m.currentGameTrailer]),m.isLoading?(0,d.jsx)("div",{className:"banner__loading",children:(0,d.jsx)("div",{className:"banner__spinner"})}):(0,d.jsx)("header",{className:"banner",children:(0,d.jsxs)("div",{ref:f,style:{width:"100%",height:"100%"},children:[m.currentGameTrailer&&(0,d.jsx)(y(),{className:"banner__trailer",url:m.currentGameTrailer,playing:!!A,muted:!!v,onEnded:function(){return Z(!0)},light:!!S&&"//images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(null===(t=m.currentGame.cover)||void 0===t?void 0:t.image_id,".jpg")}),(0,d.jsxs)("div",{className:"banner__contents",children:[(0,d.jsx)("h1",{className:"banner__title",children:null===(n=m.currentGame)||void 0===n?void 0:n.name}),(0,d.jsxs)("div",{className:"banner__buttons",children:[(0,d.jsx)("button",{className:"banner__button",onClick:function(){return c(m.currentGame)},children:"See Details"}),!p&&(0,d.jsx)("button",{className:"banner__button",onClick:function(){return l(m.currentGame)},children:"Add to My List"})]}),(0,d.jsx)("h1",{className:"banner__description",children:(i=null===(s=m.currentGame)||void 0===s?void 0:s.summary,o=150,(null===i||void 0===i?void 0:i.length)>o?i.substr(0,o-1)+"...":i)})]}),(0,d.jsx)("div",{className:"banner--fadeBottom"}),(0,d.jsx)(j.t5J,{size:35,className:"banner__refresh_icon",onClick:m.displayNewBanner}),v?(0,d.jsx)(j.j6J,{size:27,className:"banner__mute_btn",onClick:function(){return _(!1)}}):(0,d.jsx)(j.jZ7,{size:27,className:"banner__volume_btn",onClick:function(){return _(!0)}})]})},m.currentGame.id)},b=n(6475),k=n(7762),C=n(1087),S=n(71),Z=n(6856),I="https://accounts.spotify.com/authorize?client_id=".concat("05e6f02e47724a63b635cfdac09fc991","&response_type=code&redirect_uri=").concat("https://cybrary2022.onrender.com","&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state"),E=function(e){var t="https://cybrary2022.onrender.com",n=e.allProfiles;(0,r.useEffect)((function(){var t=function(t){27===t.keyCode&&e.closeNavDropdown()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]);var a=function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var a,r,s,o,c;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u().get("".concat(t,"/playstation/user_titles"));case 3:a=n.sent,console.log(a.data),r=(0,k.Z)(a.data);try{for(r.s();!(s=r.n()).done;)for(o=s.value,c=0;c<o.earnedTrophies.length;c++)o.earnedTrophies[c].earned?o.allTrophies[c].earned=!0:o.allTrophies[c].earned=!1}catch(i){r.e(i)}finally{r.f()}e.currentCollection.filter((function(n){var r=a.data.some((function(a){n.name.toLowerCase()===a.name.toLowerCase()?(n.trophies=a.allTrophies,u().put("".concat(t,"/app/update_game_trophies"),{email:localStorage.getItem("user"),name:e.activeProfile.name,gameId:n.id,trophies:a.allTrophies})):(console.log("New game bruh"),u().post("".concat(t,"/app/update_collection"),{email:localStorage.getItem("user"),currentProfile:localStorage.getItem("profile"),name:a.name,id:a.id,imageURL:"//images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(a.cover.image_id,".jpg"),playtime:0,origin:"gameflix"}))}));return r})),n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),console.log(n.t0),n.abrupt("return",n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}();return n.sort((function(e,t){return e.name-t.name?1:-1})),(0,d.jsxs)("div",{className:"dropdown",children:[(0,d.jsx)(f.h3_,{className:"dropdown__arrow"}),(0,d.jsx)("div",{className:"dropdown__profiles",children:(0,d.jsxs)("ul",{className:"dropdown__profiles_list",children:[n.map((function(t){if(t.name!==e.activeProfile.name)return(0,d.jsxs)("li",{className:"dropdown__profiles_item",onClick:function(){return function(t){e.changeProfile(t)}(t)},children:[(0,d.jsx)("img",{src:t.avatar,className:"dropdown__profile_icon",alt:"".concat(t.name," avatar icon"),style:{backgroundColor:t.color}}),(0,d.jsx)("p",{className:"dropdown__profile_name",children:t.name})]},t.name)})),(0,d.jsxs)("li",{className:"dropdown__profiles_item",onClick:e.toProfilePage,children:[(0,d.jsx)("span",{className:"dropdown__profiles_manage",children:(0,d.jsx)(Z.zmo,{size:22})}),(0,d.jsx)("p",{className:"dropdown__profile_name",children:"Manage Profiles"})]})]})}),(0,d.jsxs)("div",{className:"dropdown__settings",children:[(0,d.jsxs)("div",{className:"dropdown__settings_item",onClick:function(){return e.editProfile()},children:[(0,d.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,d.jsx)(f.dfI,{size:18})}),(0,d.jsx)("p",{children:"My Profile"})]}),(0,d.jsxs)("div",{className:"dropdown__settings_item",onClick:function(){return e.viewCollection()},children:[(0,d.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,d.jsx)(f.iVx,{size:18})}),(0,d.jsx)("p",{children:"My Collection"})]}),(0,d.jsxs)("div",{className:"dropdown__settings_item",onClick:e.editAccount,children:[(0,d.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,d.jsx)(S.Fuo,{size:18})}),(0,d.jsx)("p",{children:"Account Settings"})]})]}),(0,d.jsxs)("div",{className:"dropdown__settings",children:[(0,d.jsxs)("div",{className:"dropdown__settings_item",onClick:a,children:[(0,d.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,d.jsx)(f.To8,{size:18})}),(0,d.jsx)("p",{children:"Link Playstation"})]}),(0,d.jsxs)("a",{href:I,className:"dropdown__settings_item",children:[(0,d.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,d.jsx)(f.l4C,{size:18,style:{color:e.spotifyToken?"#1DB954":"#FFF"}})}),(0,d.jsx)("p",{children:"Spotify Authentication"})]}),(0,d.jsx)("div",{className:"dropdown__settings_item",style:{alignItems:"center",justifyContent:"center",paddingBottom:"0",paddingLeft:"0"},children:(0,d.jsx)(C.rU,{to:"http://localhost:3001/api/auth/steam",children:(0,d.jsx)("img",{className:"steam_btn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAAjCAYAAAA9riDJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDYzM0ZCMEQ5RDI2MTFFNTk0MTg5ODM2QkQ2QjAwMjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDYzM0ZCMEU5RDI2MTFFNTk0MTg5ODM2QkQ2QjAwMjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNjMzRkIwQjlEMjYxMUU1OTQxODk4MzZCRDZCMDAyMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowNjMzRkIwQzlEMjYxMUU1OTQxODk4MzZCRDZCMDAyMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlFT8bgAABY3SURBVHja7JwJtM3V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"})})})]}),(0,d.jsx)("div",{className:"dropdown__settings_links",children:(0,d.jsx)(C.rU,{to:"/login",className:"dropdown__settings_link",onClick:e.logoutHandler,children:"Sign out of GameFlix"})})]})},D=n(6797),M=n(8820),T=function(e){var t=e.closeAccountSettings,n=e.setLoggedUser,s=e.currentUser,c="https://cybrary2022.onrender.com",l=(0,r.useState)(!1),m=(0,a.Z)(l,2),f=m[0],p=m[1],h=(0,r.useState)(""),g=(0,a.Z)(h,2),v=g[0],_=g[1],x=(0,r.useState)(s.email),j=(0,a.Z)(x,2),w=j[0],N=j[1],y=(0,r.useState)(""),A=(0,a.Z)(y,2),b=A[0],k=A[1],C=(0,r.useState)(!1),S=(0,a.Z)(C,2),Z=S[0],I=S[1],E=(0,r.useState)(s.password),D=(0,a.Z)(E,2),T=D[0],P=D[1],G=(0,r.useState)(!0),L=(0,a.Z)(G,2),R=L[0],U=L[1],F=(0,r.useState)(""),O=(0,a.Z)(F,2),B=O[0],Q=O[1],H=(0,r.useState)(!1),z=(0,a.Z)(H,2),X=z[0],W=z[1];(0,r.useEffect)((function(){if(R){var e=s.password.replace(/./gi,"*");P(e)}else P(s.password)}),[R]);var Y=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(""),e.prev=1,e.next=4,u().post("".concat(c,"/app/update_user_email"),{originalEmail:s.email,newEmail:t});case 4:(a=e.sent).data.status<400?(n(a.data.user),_({type:"success",message:a.data.message}),N(a.data.user.email),k(""),I(!1)):(_({type:"error",message:a.data.message}),k("")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().delete("".concat(c,"/app/delete_account"),{data:{id:s._id}});case 3:window.location="/",localStorage.removeItem("user"),localStorage.removeItem("profile"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)("div",{className:"profile_edit__container",children:[(0,d.jsx)("div",{className:"profile_edit__header",children:(0,d.jsx)("h3",{children:"GAMEFLIX"})}),(0,d.jsxs)("div",{className:"profile_edit__form_wrapper",style:{height:"350px"},children:[(0,d.jsx)("h3",{children:"Account Settings"}),(0,d.jsx)("div",{className:"form_container",children:(0,d.jsxs)("form",{className:"account_edit__form",children:[(0,d.jsxs)("div",{className:"account_email_container",children:["error"==v.type?(0,d.jsx)("p",{className:"account_email_error",children:v.message}):(0,d.jsx)("p",{className:"account_email_success",children:v.message}),(0,d.jsx)("h4",{style:{color:"white",fontSize:"2rem",marginLeft:"2px"},children:"Email"}),(0,d.jsx)("input",{className:"account_email_input",onChange:function(e){return N(e.target.value)},value:w}),Z&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{className:"account_email_input",onChange:function(e){return k(e.target.value)},value:b,placeholder:"Enter new email",autoFocus:!0}),(0,d.jsx)("button",{type:"button",onClick:function(){k(""),I(!1)},className:"account_email_save_btn",children:"Cancel"})]}),(0,d.jsx)("button",{type:"button",onClick:function(){Z?""!==b?Y(b):(I(!1),k("")):(I(!0),W(!1))},className:"save_btn",children:Z?"Save Email":"Change Email"})]}),(0,d.jsxs)("div",{className:"account_password_container",children:[(0,d.jsx)("h4",{style:{color:"white",fontSize:"2rem",marginLeft:"2px"},children:"Password"}),(0,d.jsx)("input",{className:"account_password_input",onChange:function(e){return P(e.target.value)},value:T}),(0,d.jsx)("span",{className:"account_password_visible_icon",onClick:function(){return U(!R)},children:R?(0,d.jsx)(M.p3W,{}):(0,d.jsx)(M.w8I,{})}),X&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{className:"account_password_input",onChange:function(e){return Q(e.target.value)},value:B,placeholder:"Enter new password",autoFocus:!0}),(0,d.jsx)("button",{type:"button",onClick:function(){Q(""),W(!1)},className:"account_password_save_btn",children:"Cancel"})]}),(0,d.jsx)("button",{type:"button",onClick:function(){X?""!==B?b:(W(!1),Q("")):(W(!0),I(!1))},className:"save_btn",children:X?"Save Password":"Change Password"})]})]})}),(0,d.jsxs)("div",{className:"form_actions",style:{justifyContent:"space-between"},children:[(0,d.jsx)("button",{className:"cancel_btn",onClick:t,children:"Back"}),(0,d.jsx)("button",{className:"delete_account_btn",onClick:function(){return p(!0)},children:"Delete Account"})]})]}),f&&(0,d.jsx)("div",{className:"delete_account_modal",children:(0,d.jsxs)("div",{className:"delete_account_modal_content",children:[(0,d.jsx)("h4",{children:"Are you sure you want to delete your account?"}),(0,d.jsxs)("div",{className:"delete_account_modal_actions",children:[(0,d.jsxs)("div",{className:"modal_action_option",children:[(0,d.jsx)("p",{children:"Yes"}),(0,d.jsx)("span",{className:"video-game-button",onClick:J,children:"A"})]}),(0,d.jsxs)("div",{className:"modal_action_option",children:[(0,d.jsx)("p",{children:"No"}),(0,d.jsx)("span",{className:"video-game-button",onClick:function(){return p(!1)},children:"B"})]})]})]})})]})};var P=function(e){var t=(0,r.useState)(!1),n=(0,a.Z)(t,2),s=n[0],i=n[1],o=(0,r.useState)(!1),c=(0,a.Z)(o,2),l=c[0],u=c[1],m=(0,r.useState)(!1),p=(0,a.Z)(m,2),h=p[0],g=p[1],v=(0,r.useRef)(""),_=(0,r.useState)(!1),x=(0,a.Z)(_,2),j=x[0],w=x[1],N=(0,r.useState)(!1),y=(0,a.Z)(N,2),A=y[0],k=y[1],C=e.activeProfile;(0,r.useEffect)((function(){var e=function(){window.addEventListener("scroll",(function(){window.scrollY>100?i(!0):i(!1)}))};return e(),function(){window.removeEventListener("scroll",e)}}),[]);var S=function(){document.body.style.overflowY="scroll",w(!1),k(!1)};return(0,r.useEffect)((function(){var e=function(e){27===e.keyCode&&g(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,d.jsxs)("div",{className:"nav ".concat(s&&"nav__hide"),children:[j&&(0,d.jsx)("div",{className:"nav_edit_profile",children:(0,d.jsx)(D.Z,{currentProfile:C,userEmail:e.currentUser.email,viewAllProfiles:S,saveEdit:function(){e.saveEdit(),w(!1)},getProfile:function(t){return e.selectProfile(t)},twitchToken:e.twitchToken})}),A&&(0,d.jsxs)("div",{className:"nav_edit_profile",children:[" ",(0,d.jsx)(T,{closeAccountSettings:S,setLoggedUser:function(t){return e.setLoggedUser(t)},currentUser:e.currentUser})," "]}),(0,d.jsx)("img",{className:"nav__logo",src:"data:image/png;base64,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",alt:"GameFlix Logo",onClick:function(){return window.location="/"}}),(0,d.jsxs)("div",{className:"nav__right",children:[(0,d.jsxs)("div",{className:"nav__search",children:[h&&(0,d.jsx)("form",{className:"nav__search_form",onSubmit:function(t){t.preventDefault();var n=v.current.value.trim();0!=n.length&&e.fetchSubmittedGame(n)},children:(0,d.jsx)("input",{ref:v,autoFocus:!0,type:"text",placeholder:"Titles, publishers, genres",defaultValue:e.searchedGame?"".concat(e.searchedGame.name):"",onBlur:function(){v.current.value.length>0||g(!1)}})}),(0,d.jsx)(f.Ozl,{className:"nav__search_icon ".concat(h&&"search_active"),onClick:function(){return g(!h)}})]}),(0,d.jsxs)("div",{className:"nav__actions",onMouseLeave:function(){return u(!1)},children:[(0,d.jsx)("div",{className:"nav__avatar_container",onMouseOver:function(){return u(!0)},children:(0,d.jsx)("img",{className:"nav__avatar",src:C.avatar?C.avatar:b,alt:"User's avatar"})}),(0,d.jsx)(f.$Pg,{className:"nav__avatar_arrow",style:{transform:"".concat(l?"rotate(180deg)":"rotate(0deg)")}}),l&&(0,d.jsx)(E,{changeProfile:e.changeUser,activeProfile:C,allProfiles:e.currentUser.profiles,logoutHandler:e.onLogout,closeNavDropdown:function(){u(!1)},toProfilePage:e.toProfilePage,spotifyToken:e.spotifyToken,editProfile:function(){document.body.style.overflowY="hidden",w(!0)},editAccount:function(){document.body.style.overflowY="hidden",k(!0)},updateCollection:e.updateCollection,currentCollection:e.currentCollection,viewCollection:e.viewCollection})]})]})]})},G=function(e){var t=e.twitchToken,n=e.setGameDetails,c=(0,r.useState)([]),l=(0,a.Z)(c,2),p=l[0],h=l[1],g=(0,r.useState)("Week"),v=(0,a.Z)(g,2),_=v[0],x=v[1],j=(0,r.useState)(!1),w=(0,a.Z)(j,2),N=w[0],y=w[1],A=(0,r.useState)(!1),b=(0,a.Z)(A,2),k=b[0],C=b[1],S=(0,r.useState)(!0),Z=(0,a.Z)(S,2),I=Z[0],E=Z[1],D="https://cybrary2022.onrender.com",M=new Date,T=Math.floor(new Date(M.getTime()+6048e5)/1e3),P=Math.floor(new Date(new Date(1e3*T).setMonth(new Date(1e3*T).getMonth()+1)).getTime()/1e3),G=Math.floor(new Date(new Date(1e3*P).setMonth(new Date(1e3*P).getMonth()+12)).getTime()/1e3),L=function(e){var t=[],n=[];return e.map((function(e){-1===t.indexOf(e.game.name)&&(t.push(e.game.name),n.push(e))})),n};(0,r.useEffect)((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n,a,r,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=_,e.next="Month"===e.t0?3:"Year"===e.t0?6:9;break;case 3:return n=T,a=P,e.abrupt("break",12);case 6:return n=P,a=G,e.abrupt("break",12);case 9:return n=Math.floor(M.getTime()/1e3),a=T,e.abrupt("break",12);case 12:e.prev=12,r=3,s=0;case 15:if(!(s<r)){e.next=31;break}return e.prev=16,e.next=19,u().post("".concat(D,"/app/upcoming"),{token:t,currentDate:n,targetDate:a});case 19:return o=e.sent,h(L(o.data)),E(!1),e.abrupt("break",31);case 25:e.prev=25,e.t1=e.catch(16),console.log("Issue fetching data");case 28:s++,e.next=15;break;case 31:e.next=36;break;case 33:e.prev=33,e.t2=e.catch(12),console.log(e.t2.message);case 36:case"end":return e.stop()}}),e,null,[[12,33],[16,25]])})))).apply(this,arguments)}t&&(E(!0),function(){e.apply(this,arguments)}())}),[_,t]);var R=function(e){x(e.target.innerText),y(!1)},U=function(e){var t,n=new Date(e.replace(/-/g,"/")),a=n.getDate();switch(a){case 1:case 21:case 31:t=a+"st";break;case 2:case 22:t=a+"nd";break;case 3:case 23:t=a+"rd";break;default:t=a+"th"}return["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+t+", "+n.getFullYear()};return(0,d.jsxs)("div",{onMouseOver:function(){return C(!0)},onMouseOut:function(){return C(!1)},className:"main_row",children:[(0,d.jsxs)("div",{className:"main_row__filters",onMouseLeave:function(){return y(!1)},children:[(0,d.jsx)("h2",{children:"Coming Soon"}),(0,d.jsxs)("p",{className:"filters_filter",onMouseOver:function(){return y(!0)},children:[_," ",(0,d.jsx)(f.$Pg,{size:10,className:N?"arrow_active":"arrow"})]})," ",N&&(0,d.jsx)("div",{className:"filter_options",children:(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{style:{backgroundColor:"Week"==_?"white":"",color:"Week"==_?"black":""},onClick:R,children:"Week"}),(0,d.jsx)("li",{style:{backgroundColor:"Month"==_?"white":"",color:"Month"==_?"black":""},onClick:R,children:"Month"}),(0,d.jsx)("li",{style:{backgroundColor:"Year"==_?"white":"",color:"Year"==_?"black":""},onClick:R,children:"Year"})]})})]}),(0,d.jsxs)("div",{className:"main_row__row_posters",children:[p&&!I&&p.map((function(e,t){var a;return(0,d.jsxs)("div",{className:"main_row__poster_container ".concat(k&&"dimmed"),onClick:function(){return n(e.game)},children:[(0,d.jsx)("h4",{className:"main__poster_released",children:U(e.human)}),(0,d.jsx)("img",{className:"main_poster",src:"//images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(a=e.game.cover)||void 0===a?void 0:a.image_id,".jpg"),alt:e.name},e.id)]},e.id)})),I&&(0,d.jsx)("div",{className:"main_row__loading_container",children:(0,s.Z)(Array(4)).map((function(e,t){return(0,d.jsx)("div",{className:"main_row__placeholder__wrapper",children:(0,d.jsx)(m,{delay:t},t)},t)}))})]})]})},L=function(e){var t=e.twitchToken,n=e.setGameDetails,l=(0,r.useState)([]),f=(0,a.Z)(l,2),p=f[0],h=f[1],g=(0,r.useState)(""),v=(0,a.Z)(g,2),_=v[0],x=v[1],j=(0,r.useState)(!1),w=(0,a.Z)(j,2),N=w[0],y=(w[1],(0,r.useState)(null)),A=(0,a.Z)(y,2),b=A[0],k=A[1],C=(0,r.useState)(!1),S=(0,a.Z)(C,2),Z=S[0],I=S[1],E="https://cybrary2022.onrender.com",D=Math.floor((new Date).getTime()/1e3),M=JSON.parse(sessionStorage.getItem("trending"));(0,r.useEffect)((function(){if(t){if(M&&M.length>0)return h(M),void I(!1);!function(){e.apply(this,arguments)}()}function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n,a,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.prev=1,n=[],e.next=5,u().post("".concat(E,"/app/trending"),{token:t,currentDate:D});case 5:return a=e.sent,r=new Set,a.data.filter((function(e){return!r.has(e.game.id)&&r.add(e.game.id).add(e.game)})),r.forEach((function(e){return"object"==typeof e&&n.push(e)})),n.sort((function(e,t){return t.release_dates.findLast((function(e){return e.date}))-e.release_dates.findLast((function(e){return e.date}))||t.hypes-e.hypes})),h(n.slice(0,10)),sessionStorage.setItem("trending",JSON.stringify(n.slice(0,10))),I(!1),e.abrupt("return",a);case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:I(!1);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}}),[t]);var T=function(){k(null),x(null)};return Z?(0,d.jsx)("div",{className:"row__loading_container",children:(0,s.Z)(Array(10)).map((function(e,t){return(0,d.jsx)("div",{className:"trending_row__placeholder__wrapper",children:(0,d.jsx)(m,{delay:t},t)},t)}))}):(0,d.jsxs)("div",{className:"trending_row",children:[(0,d.jsx)("h2",{children:"TRENDING TITLES"}),(0,d.jsx)("div",{className:"trending_row__posters",children:p.map((function(e,t){var a;return(0,d.jsx)(r.Fragment,{children:(0,d.jsxs)("div",{className:"trending_row__poster_wrapper",children:[(0,d.jsx)("div",{className:"trending_row__rank",children:t+1}),(0,d.jsxs)("div",{className:"trending_row__poster_container",style:{marginLeft:9==t?"160px":0==t&&"65px"},onClick:function(){return n(e.game)},children:[" ",!Z&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("img",{loading:"lazy",className:"trending_row__poster",src:"//images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(a=e.cover)||void 0===a?void 0:a.image_id,".jpg"),alt:e.name})})]}),b===e.name&&(0,d.jsx)(c.Z,{game:_,displayDetails:N,hideDetails:T})]})},e.name)}))})]})},R=n(6907),U=n(1293),F=n(6234),O=new(n.n(F)())({clientId:"05e6f02e47724a63b635cfdac09fc991"}),B=localStorage.getItem("profile"),Q=function(e){var t=e.trackUri,n=e.playAudio,a=e.beginPlayback,s=e.pausePlayback,i=e.spotifyToken;if((0,r.useEffect)((function(){O.setAccessToken(i)}),[i]),(0,r.useEffect)((function(){a()}),[t]),i)return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"playback_container",children:(0,d.jsx)(U.ZP,{token:i,callback:function(e){e.isPlaying||s()},uris:t?[t]:[],play:n,styles:{color:"white",bgColor:"rgba(0,0,0,0.8)",sliderColor:B.color,trackArtistColor:"white",trackNameColor:B.color}})})})};var H=n(7654),z=n(4942),X=n(1413),W=n(3853),Y=n(5320),J=function(){var e=(0,r.useState)({x:0,y:0}),t=(0,a.Z)(e,2),n=t[0],s=t[1],i=(0,r.useState)(!1),o=(0,a.Z)(i,2),c=o[0],l=o[1],u=(0,r.useState)(!1),d=(0,a.Z)(u,2),m=d[0],f=d[1],p=(0,r.useCallback)((function(e){e.preventDefault(),"user_game_banner_img"!==e.target.className||c||(s({x:e.offsetX,y:e.pageY}),l(!0),f(!1)),"title_list__item"===e.target.className&&(s({x:e.movementX+5,y:e.y+20}),f(!0),l(!1))}),[s]),h=(0,r.useCallback)((function(){m&&f(!1),c&&l(!1)}),[m,c]);return(0,r.useEffect)((function(){return document.addEventListener("click",h),document.addEventListener("contextmenu",p),function(){document.removeEventListener("click",h),document.removeEventListener("contextmenu",p)}})),{anchorPoint:n,showTitleMenu:m,showBannerMenu:c,resetContext:function(){l(!1),f(!1)}}},V=n(9126),K=function(e){var t=e.note,n=e.closeNote,s=e.updateNote,i=e.deleteNote,o=(0,r.useState)(t.note),c=(0,a.Z)(o,2),l=c[0],u=c[1];return(0,d.jsxs)("div",{className:"note_details__container",children:[(0,d.jsx)("span",{className:"note_details__date",children:t.date}),(0,d.jsx)(V.And,{className:"note_details__back_icon",onClick:n}),(0,d.jsxs)("div",{className:"note_details__details",children:[(0,d.jsx)("h4",{className:"note_details_note",children:"Note Details"}),(0,d.jsx)("textarea",{value:l,onChange:function(e){return u(e.target.value)},className:"note_details__editor"})]}),(0,d.jsxs)("div",{className:"note_details__actions",children:[(0,d.jsx)("button",{onClick:function(){return s(t,l)},children:"Save Note"}),(0,d.jsx)("button",{onClick:function(){return i(t.note)},children:"Delete Note"})]})]})},q=new Date,$=q.getFullYear(),ee=q.getMonth()+1,te=q.getDate();te<10&&(te="0"+te),ee<10&&(ee="0"+ee);var ne=ee+"/"+te+"/"+$,ae=function(e){var t,n,s,c,l,m,p,h=e.profile,g=e.windowViewHandler,v=e.viewStatus,_=e.gameNotes,x="https://cybrary2022.onrender.com",j=localStorage.getItem("user"),w=(0,r.useState)(""),N=(0,a.Z)(w,2),y=N[0],A=N[1],b=(0,r.useState)(!1),k=(0,a.Z)(b,2),C=k[0],S=k[1],I=(0,r.useState)(""),E=(0,a.Z)(I,2),D=E[0],T=E[1],P=(0,r.useState)(!1),G=(0,a.Z)(P,2),L=G[0],R=G[1],U=(0,r.useState)(""),F=(0,a.Z)(U,2),O=F[0],B=F[1],Q=(0,r.useState)(null),H=(0,a.Z)(Q,2),z=H[0],X=H[1],W=null===_||void 0===_||null===(t=_.gameNotes)||void 0===t?void 0:t.filter((function(e){return e.tabName==y}))[0],Y=(0,r.useRef)(null),J=(0,r.useRef)(null),V=(0,r.useRef)(null),q=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("".concat(x,"/notes/create_note"),{email:j,profile:h.name});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){if(h.notesId){var e;if(null!==z)return;null===Y||void 0===Y||null===(e=Y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}else q()}),[_,y]),(0,r.useEffect)((function(){var e=function(e){C&&13==e.keyCode&&console.log(D)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,r.useEffect)((function(){var e;_&&(A(null===_||void 0===_||null===(e=_.gameNotes[0])||void 0===e?void 0:e.tabName),console.log("new game"))}),[_]),(0,r.useEffect)((function(){null===z&&(J.current.focus(),S(!1),B(""),T(""))}),[J,W]),(0,r.useEffect)((function(){return function(){return clearTimeout($)}}),[]),console.log(_);var $,ee=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u().put("".concat(x,"/notes/update_notes"),{userNotesId:h.notesId,noteId:_.id,notes:_});case 4:t=e.sent,console.log(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){C?(W.tabName=J.current.innerText,ee(),A(J.current.innerText),S(!1)):S(!0)},ae=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=D){e.next=3;break}return e.abrupt("return");case 3:_.gameNotes.push({tabName:D,notes:[]}),A(D),ee(),T(""),R(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,d.jsxs)("div",{className:"user_notes__wrapper ".concat(!v.notes&&"minimized_notes"),children:[(0,d.jsx)(f.iUH,{style:{transform:v.notes?"rotate(180deg)":"rotate(0)",display:z&&"none"},className:"user_game__minimize_icon",onClick:function(){return g("notes")}}),z?(0,d.jsx)(K,{note:z,closeNote:function(){return X(null)},updateNote:function(e,t){console.log(e),e.note=t,e.date=ne,ee(),X(null)},deleteNote:function(e){var t=W.notes.filter((function(t){return t.note!==e}));W.notes=t,ee(),X(null)}}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h4",{contentEditable:C,suppressContentEditableWarning:!0,onBlur:te,onKeyPress:function(e){e.preventDefault(),console.log(e.currentTarget),"Enter"===e.key&&te()},children:[(0,d.jsx)("p",{ref:J,style:{borderBottom:C?"2px solid #9147ff":"2px solid transparent",userSelect:C?"auto":"none",padding:"0px 6px",transition:"all 200ms"},children:y})," ",(0,d.jsx)(Z.rnx,{className:"edit_tab_icon",onClick:function(){return S(!C)}})," "]}),(0,d.jsx)("div",{className:"user_notes__header",children:(0,d.jsxs)("ul",{className:"user_notes__tabs",children:[null===_||void 0===_||null===(n=_.gameNotes)||void 0===n?void 0:n.map((function(e){return(0,d.jsx)("li",{className:"user_notes__tab",onClick:function(){return A(e.tabName)},style:{borderBottom:y==e.tabName&&"1px solid transparent"},children:e.tabName},e.tabName)})),(0,d.jsx)("li",{className:"user_notes__tab ".concat(L?"add_tab":"new_tab"),onClick:function(e){e.stopPropagation(),R(!0),$=setTimeout((function(){return V.current.scrollIntoView({behavior:"smooth"})}),150)},children:L?(0,d.jsxs)("div",{className:"new_tab__container",children:[(0,d.jsx)("form",{onSubmit:ae,children:(0,d.jsx)("input",{value:D,onChange:function(e){return T(e.target.value)}})}),(0,d.jsx)("p",{onClick:function(e){e.stopPropagation(),R(!1)},children:"X"})]}):(0,d.jsx)(M.Lfi,{})}),(0,d.jsx)("div",{ref:V})]})})]}),(0,d.jsx)("div",{className:"user_notes__notes_wrapper",children:(0,d.jsx)("ul",{className:"user_notes__notes",children:(null===_||void 0===_||null===(s=_.gameNotes)||void 0===s||null===(c=s.filter((function(e){return e.tabName==y}))[0])||void 0===c||null===(l=c.notes)||void 0===l?void 0:l.length)>0?null===_||void 0===_||null===(m=_.gameNotes)||void 0===m||null===(p=m.filter((function(e){return e.tabName==y}))[0])||void 0===p?void 0:p.notes.map((function(e){return(0,d.jsx)("li",{className:"user_note",onClick:function(){return function(e){X(e),R(!1),S(!1)}(e)},children:e.note},e.note)})):(0,d.jsx)("p",{className:"no_notes_msg",children:"No Notes"})})}),(0,d.jsx)("div",{ref:Y,style:{width:"10px",marginLeft:"5px"}}),(0,d.jsx)("div",{className:"user_notes__form_container",style:{display:"".concat(v.notes?"block":"none")},children:(0,d.jsx)("form",{className:"user_notes__form",onSubmit:function(e){e.preventDefault(),""!=O&&(W.notes.push({id:W.notes.length+1,note:O,date:ne}),ee(),B(""))},children:(0,d.jsx)("input",{value:O,onChange:function(e){return B(e.target.value)},className:"user_notes__input",placeholder:"I think Clark Kent is Batman"})})})]})]})},re=new Date,se=re.getFullYear(),ie=re.getMonth()+1,oe=re.getDate();oe<10&&(oe="0"+oe),ie<10&&(ie="0"+ie);var ce=ie+"/"+oe+"/"+se,le=function(e){var t,n=e.game,s=e.activeProfile,c=e.closeStats,l=(e.setProfile,e.setNotification,e.setCurrentGame),m=e.updateCollection,p=e.userNotes,h=J(),g=h.anchorPoint,v=h.showBannerMenu,_=h.resetContext,x=(0,r.useState)({achievements:!0,notes:!0,trophies:!0}),j=(0,a.Z)(x,2),w=j[0],N=j[1],y=(0,r.useState)(n.achievements),A=(0,a.Z)(y,2),b=A[0],k=A[1],C=(0,r.useState)(n.trophies),S=(0,a.Z)(C,2),Z=S[0],I=S[1],E=(0,r.useState)("unlocked"),D=(0,a.Z)(E,2),M=D[0],T=D[1],P=(0,r.useState)("unlocked"),G=(0,a.Z)(P,2),L=G[0],R=G[1],U=(0,r.useState)(Math.floor(n.playtime/60)),F=(0,a.Z)(U,2),O=F[0],B=F[1],Q=(0,r.useState)(!1),H=(0,a.Z)(Q,2),V=H[0],K=H[1],q=(0,r.useState)(n.user_rating),$=(0,a.Z)(q,2),ee=$[0],te=$[1],ne=(0,r.useState)(!1),re=(0,a.Z)(ne,2),se=re[0],ie=re[1],oe=(0,r.useState)(null),le=(0,a.Z)(oe,2),ue=(le[0],le[1],(0,r.useState)(!1)),de=(0,a.Z)(ue,2),me=de[0],fe=de[1],pe=(0,r.useState)(""),he=(0,a.Z)(pe,2),ge=he[0],ve=he[1],_e=(0,r.useState)(n.status),xe=(0,a.Z)(_e,2),je=xe[0],we=xe[1],Ne=(0,r.useState)(!1),ye=(0,a.Z)(Ne,2),Ae=ye[0],be=ye[1],ke="https://cybrary2022.onrender.com",Ce=localStorage.getItem("steamID"),Se=(localStorage.getItem("achivementsConn"),localStorage.getItem("user")),Ze=Math.floor((null===Z||void 0===Z?void 0:Z.filter((function(e){return 1==e.earned})).length)/(null===Z||void 0===Z?void 0:Z.length)*100),Ie=Math.floor((null===b||void 0===b?void 0:b.filter((function(e){return 1==e.achieved||1==e.earned})).length)/(null===b||void 0===b?void 0:b.length)*100);console.log(n);"https://gamefaqs.gamespot.com/search?game=".concat(n.name.replaceAll(" ","+"));(0,r.useEffect)((function(){p.notes_collection.filter((function(e){return e.id==n.id})).length>0||p.notes_collection.push({id:n.id,gameNotes:[{tabName:"Notes",notes:[{id:0,note:"These are your notes for ".concat(n.name,"! Click me to edit this or start your own tab by clicking the +!"),date:ce}]}]})}),[n]),(0,r.useEffect)((function(){var e=function(e){27===e.keyCode&&(ie(!1),be(!1))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,r.useEffect)((function(){if(K(!1),ie(!1),be(!1),we(n.status||"BACKLOG"),B(Math.floor(n.playtime/60)),te(n.user_rating),k(n.achievements),I(n.trophies),Ce){var e=function(e,t){var n=[];return t.map((function(t){var a=e.filter((function(e){return e.name==t.displayName}));a.length>0&&(t.achieved=a[0].achieved),n.push(t)})),n.sort((function(e,t){var n=e.displayName.toUpperCase(),a=t.displayName.toUpperCase();return n<a?-1:n>a?1:0})),n.sort((function(e,t){return e.achieved<t.achieved?1:e.achieved>t.achieved?-1:0})),n},t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var a,r,o,c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u().get("".concat(ke,"/steam/get_game_stats"),{params:{gameId:n.id}});case 2:if(a=t.sent,0!=Object.keys(a.data).length){t.next=6;break}return k(null),t.abrupt("return");case 6:if(t.prev=6,n.achievements){t.next=19;break}return t.next=10,u().get("".concat(ke,"/steam/get_steam_achievements"),{params:{gameId:n.id,steamId:Ce}});case 10:return r=t.sent,o=e(r.data.achievements,a.data.availableGameStats.achievements),t.next=14,u().put("".concat(ke,"/app/update_game_achievements"),{email:Se,currentProfile:s.name,achievements:o,gameId:n.id});case 14:c=t.sent,console.log(c),l(r.data.response.game),m(r.data.response.profile.collection),k(c.data.response.game.achievements);case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[6,21]])})));return function(){return t.apply(this,arguments)}}();t()}else console.log("No steam id")}),[n]);var Ee=function(e){if(!e)return"N/A";var t=e.filter((function(e){return 1==e.achieved||1==e.earned})).length;return t+"/"+e.length};var De=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=20*ee,20*ee>=100&&(t=100),e.prev=2,e.next=5,u().put("".concat(ke,"/app/update_game_rating"),{email:Se,currentProfile:s.name,rating:t,gameId:n.id});case 5:a=e.sent,console.log(a),localStorage.setItem("profile",a.data.response.profile.name),l(a.data.response.game),m(a.data.response.profile.collection),ie(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.playtime!=O){e.next=5;break}return console.log("No new changes"),e.abrupt("return");case 5:return e.prev=5,e.next=8,u().put("".concat(ke,"/app/update_game_playtime"),{email:Se,currentProfile:s.name,playtime:60*O,gameId:n.id});case 8:t=e.sent,console.log(t),localStorage.setItem("profile",t.data.response.profile.name),l(t.data.response.game),m(t.data.response.profile.collection),K(!1),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("HAPPENING"),e.prev=1,e.next=4,u().put("".concat(ke,"/app/update_game_backlog"),{email:Se,currentProfile:s.name,status:t,gameId:n.id});case 4:a=e.sent,console.log(a),localStorage.setItem("profile",a.data.response.profile.name),console.log(a.data),console.log(a.data.response.profile.collection),l(a.data.response.game),m(a.data.response.profile.collection),be(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),Pe=function(e){Te(e),be(!1)},Ge=function(e){N((0,X.Z)((0,X.Z)({},w),{},(0,z.Z)({},e,!w[e])))},Le=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=ge.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u().put("".concat(ke,"/app/update_game_banner"),{email:Se,currentProfile:s.name,url:ge,gameId:n.id});case 5:t=e.sent,localStorage.setItem("profile",t.data.response.profile.name),l(t.data.response.game),m(t.data.response.profile.collection),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:fe(!1),ve("");case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)("div",{className:"user_game__wrapper",children:[me&&(0,d.jsx)("div",{className:"user_game__modal",children:(0,d.jsxs)("div",{className:"modal_content",children:[(0,d.jsx)("h2",{style:{maxWidth:"75%",textAlign:"center",marginBottom:"25px"},children:"Please enter the link to any image or gif below."}),(0,d.jsxs)("div",{className:"modal_form",style:{width:"100%"},children:[(0,d.jsx)("input",{style:{width:"80%"},value:ge,onChange:function(e){return ve(e.target.value)}}),(0,d.jsx)("button",{onClick:Le,children:"Submit"}),(0,d.jsx)("button",{onClick:function(){return fe(!1)},children:"Back"})]})]})}),(0,d.jsxs)("div",{className:"user_game__banner",children:[v&&(0,d.jsxs)("ul",{className:"user_game__banner_context",style:{top:g.y+5,left:g.x},children:[(0,d.jsx)("li",{className:"banner_context__item",onClick:function(e){e.preventDefault(),fe(!0),_()},children:"Set Custom Banner"}),(0,d.jsx)("li",{className:"banner_context__item",children:"Set Custom Logo"}),(0,d.jsx)("li",{className:"banner_context__item",children:"Set Default Image"})]}),(0,d.jsx)("div",{className:"user_game__exit",onClick:c,children:"X"}),(0,d.jsx)("img",{className:"user_game_banner_img",src:n.banner_image||n.imageURL.replace("cover_big_2x","1080p_2x")}),(0,d.jsxs)("div",{className:"user_game__current_stats",children:[(0,d.jsxs)("div",{className:"playtime_container",children:[(0,d.jsx)(W.TCC,{className:"playtime_clock_icon"}),(0,d.jsxs)("div",{className:"stats_item",children:[(0,d.jsx)("h3",{style:{color:V&&"#9147ff"},children:"PLAY TIME"}),(0,d.jsx)("span",{style:{display:V&&"none"},className:"previous_playtime",onClick:function(){return K(!0)},children:function(e){if(e<=0&&"steam"==n.type)return"Not Started";if(e<=0&&"steam"!==n.type)return"0 hours";var t=e%60,a=Math.floor(e/60);return 0==t?a+" hours":"".concat(a,".").concat(t.toString().padStart(2,"0")," hours")}(n.playtime)}),(0,d.jsx)("input",{type:"number",value:O,min:"0",onKeyDown:function(e){"Enter"===e.key&&Me(),"Escape"===e.key&&(K(!1),B(Math.floor(n.playtime/60)))},onChange:function(e){return B(e.target.value)},className:"playtime_input ".concat(V&&"playtime_focused")})]})]}),(0,d.jsx)("div",{className:"rating_container",children:(0,d.jsxs)("div",{className:"stats_item",children:[(0,d.jsx)("h3",{style:{paddingBottom:se&&"4px"},children:"RATING"}),(0,d.jsxs)("span",{onClick:function(){return ie(!0)},className:"previous_rating",style:{display:se&&"none"},children:[n.user_rating||0,"%"]}),(0,d.jsx)("div",{className:"rating_stars",onMouseMove:function(e){var t=e.currentTarget.getBoundingClientRect();Math.floor(e.clientX-t.left);te(Math.floor(e.clientX-t.left)/20)},onClick:De,style:{width:!se&&"0px",display:!se&&"none"},children:(0,d.jsx)(Y.Q,{rating:ee,totalStars:5,width:20,height:20,outlined:!0})})]})}),(0,d.jsxs)("div",{className:"achievement_count_container",children:[(0,d.jsxs)("div",{className:"stats_item",children:[(0,d.jsx)("h3",{style:{paddingTop:"5px"},children:"STATUS"}),(0,d.jsx)("button",{onClick:function(){return be(!Ae)},style:{backgroundColor:"BACKLOG"==je?"dodgerblue":"STARTED"==je?"aqua":"FINISHED"==je?"green":"PLAYING"==je?"pink":"100%"==je?"gold":"ABANDONDED"==je?"red":"grey"},className:"status_btn",children:je})]}),Ae&&(0,d.jsx)("div",{className:"backlog_items",children:(0,d.jsxs)("ul",{className:"backlog_items_list",children:[(0,d.jsx)("li",{style:{backgroundColor:"BACKLOG"==n.status&&"#9147ff",color:"BACKLOG"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Pe("BACKLOG")},children:"Backlog"}),(0,d.jsx)("li",{style:{backgroundColor:"STARTED"==n.status&&"#9147ff",color:"STARTED"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Pe("STARTED")},children:"Started"}),(0,d.jsx)("li",{style:{backgroundColor:"PLAYING"==n.status&&"#9147ff",color:"PLAYING"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Pe("PLAYING")},children:"Currently Playing"}),(0,d.jsx)("li",{style:{backgroundColor:"FINISHED"==n.status&&"#9147ff",color:"FINISHED"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Pe("FINISHED")},children:"Finished"}),(0,d.jsx)("li",{style:{backgroundColor:"100%"==n.status&&"#9147ff",color:"100%"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Pe("100%")},children:"100% Completed"}),(0,d.jsx)("li",{style:{backgroundColor:"ABANDONDED"==n.status&&"#9147ff",color:"ABANDONDED"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Pe("ABANDONDED")},children:"Abandonded"}),(0,d.jsx)("li",{style:{backgroundColor:"NOT OWNED"==n.status&&"#9147ff",color:"NOT OWNED"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Pe("NOT OWNED")},children:"Not Owned"})]})})]}),(0,d.jsx)("div",{className:"music_icon_container",children:(0,d.jsxs)("div",{className:"stats_item",style:{alignItems:"center"},children:[(0,d.jsx)("h3",{children:"MUSIC"}),(0,d.jsx)(f.HcQ,{className:"music_icon"})]})})]})]}),(0,d.jsx)("div",{className:"user_game__data_wrapper",children:(0,d.jsxs)("div",{className:"user_game__data",children:[b&&(0,d.jsx)("div",{className:"user_game__achievements_wrapper ".concat(!w.achievements&&"minimized"),children:(0,d.jsxs)("div",{className:"user_game__achievements",children:[(0,d.jsxs)("div",{className:"user_game__achievements_banner",children:[(0,d.jsx)(f.iUH,{style:{transform:w.achievements?"rotate(180deg)":"rotate(0)"},className:"user_game__minimize_icon",onClick:function(){return Ge("achievements")}}),100===Ie&&(0,d.jsx)(f.PIe,{className:"user_game__completion_medal"}),(0,d.jsx)("h4",{children:(0,d.jsx)("p",{children:"Achievements"})}),(0,d.jsxs)("p",{children:["You've unlocked ",Ee(b)," (",Ie,"%)"]}),(0,d.jsx)("div",{className:"user_game__achievements_progress_bar_container",children:(0,d.jsx)("div",{className:"user_game__achievements_progress_bar",style:{width:"".concat(Ie,"%"),background:s.color}})}),(0,d.jsxs)("div",{className:"user_game__achievements_actions",children:[(0,d.jsx)("button",{className:"unlocked"==M&&"active",onClick:function(){return T("unlocked")},children:"Unlocked"}),(0,d.jsx)("button",{className:"".concat("locked"==M&&"active"),onClick:function(){return T("locked")},children:"In Progress"})]})]}),(0,d.jsx)("ul",{className:"user_game__achievements_list",children:b.filter((function(e){return"unlocked"==M?e.achieved:!e.achieved})).sort((function(e,t){return e.displayName>t.displayName?1:t.displayName>e.displayName?-1:0})).map((function(e){return(0,d.jsxs)("li",{className:"achievement_item",children:[(0,d.jsx)("div",{className:"achievement_item_icon",style:{border:"1px solid ".concat(s.color)},children:(0,d.jsx)("img",{className:"achievement_item_icon__img",src:e.achieved?e.icon:e.icongray})}),(0,d.jsxs)("div",{className:"achievement_item_headers",children:[(0,d.jsx)("h4",{children:e.displayName}),e.description&&(0,d.jsx)("p",{children:e.description})]})]})}))})]})}),Z&&(0,d.jsx)("div",{className:"user_game__achievements_wrapper ".concat(!w.trophies&&"minimized"),children:(0,d.jsxs)("div",{className:"user_game__achievements ".concat(100==Ze&&"completed"),children:[(0,d.jsxs)("div",{className:"user_game__achievements_banner",children:[(0,d.jsx)(f.iUH,{style:{transform:w.trophies?"rotate(180deg)":"rotate(0)"},className:"user_game__minimize_icon",onClick:function(){return Ge("trophies")}}),100===Ze&&(0,d.jsx)(f.PIe,{className:"user_game__completion_medal"}),(0,d.jsx)("h4",{children:(0,d.jsx)("p",{children:"Trophies"})}),(0,d.jsxs)("p",{children:["You've unlocked ",Ee(Z)," (",Ze,"%)"]}),(0,d.jsx)("div",{className:"user_game__achievements_progress_bar_container",children:(0,d.jsx)("div",{className:"user_game__achievements_progress_bar",style:{width:"".concat(Ze,"%"),background:s.color}})}),(0,d.jsxs)("div",{className:"user_game__achievements_actions",children:[(0,d.jsx)("button",{className:"unlocked"==L&&"active",onClick:function(){return R("unlocked")},children:"Unlocked"}),Ze<100&&(0,d.jsx)("button",{className:"".concat("locked"==L&&"active"),onClick:function(){return R("locked")},children:"In Progress"})]})]}),(0,d.jsx)("ul",{className:"user_game__achievements_list",children:Z.filter((function(e){return"unlocked"==L?e.earned:!e.earned})).sort((function(e,t){return e.trophyName>t.trophyName?1:t.trophyName>e.trophyName?-1:0})).map((function(e){return(0,d.jsxs)("li",{className:"achievement_item",children:[(0,d.jsx)("div",{className:"achievement_item_icon",style:{border:"1px solid ".concat(s.color)},children:(0,d.jsx)("img",{className:"achievement_item_icon__img ".concat(!e.earned&&"greyscale"),src:e.trophyIconUrl})}),(0,d.jsxs)("div",{className:"achievement_item_headers",children:[(0,d.jsx)("h4",{children:e.trophyName}),e.trophyDetail&&(0,d.jsx)("p",{children:e.trophyDetail})]})]},e.trophyName)}))})]})}),(0,d.jsx)(ae,{profile:s,windowViewHandler:Ge,viewStatus:w,gameNotes:null===p||void 0===p||null===(t=p.notes_collection)||void 0===t?void 0:t.filter((function(e){return e.id==n.id}))[0]})]})})]})},ue=n.p+"static/media/ps-trophy-bronze.28d42dd144376e70acf4.png",de=n.p+"static/media/ps-trophy-gold.6be79437e2f7d84b2568.png",me=n.p+"static/media/ps-trophy-platinum.3e1d87fe6e2a0976fe1b.png",fe=function(e){var t=e.collection,n=e.activeProfile,i=e.backToHome,o=(e.playTrack,e.currentTrack,e.isPlaying,e.pausePlayback,e.resumePlayback,e.spotifyToken,e.setSelectedProfile),c=e.removeGame,l=e.updateCollection,u=e.userNotes,m=(0,r.useState)(""),p=(0,a.Z)(m,2),h=p[0],g=p[1],v=(0,r.useState)([]),_=(0,a.Z)(v,2),x=_[0],j=_[1],w=(0,r.useState)(!1),N=(0,a.Z)(w,2),y=N[0],A=(N[1],(0,r.useState)(!1)),b=(0,a.Z)(A,2),k=b[0],C=b[1],S=(0,r.useState)(null),Z=(0,a.Z)(S,2),I=Z[0],E=Z[1],D=(0,r.useState)(null),M=(0,a.Z)(D,2),T=M[0],P=M[1],G=(0,r.useState)(!1),L=(0,a.Z)(G,2),R=(L[0],L[1],(0,r.useState)([])),U=(0,a.Z)(R,2),F=U[0],O=U[1],B=(0,r.useState)("playtime"),Q=(0,a.Z)(B,2),H=Q[0],z=Q[1],X=(0,r.useState)("alphabetical"),W=(0,a.Z)(X,2),Y=W[0],V=W[1],K=(0,r.useState)([]),q=(0,a.Z)(K,2),$=q[0],ee=q[1],te=(0,r.useState)("backlog"),ne=(0,a.Z)(te,2),ae=ne[0],re=ne[1],se=((0,r.useRef)(),J()),ie=se.anchorPoint,oe=se.showTitleMenu,ce=[me,de,ue];(0,r.useEffect)((function(){if(""!=h){var e=setTimeout((function(){var e=t.filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())}));j(e)}),250);return function(){return clearTimeout(e)}}j([])}),[h]),(0,r.useEffect)((function(){function e(){window.innerWidth<=600?C(!0):C(!1)}return window.innerWidth<=600&&C(!0),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,r.useEffect)((function(){O("playtime"==H?(0,s.Z)(t).sort((function(e,t){return t[H]-e[H]})):"user_rating"==H?t.filter((function(e){return e.user_rating})).sort((function(e,t){return t.user_rating-e.user_rating})):t.filter((function(e){return e.achievements})).sort((function(e,t){return t.achievements-e.achievements})))}),[H,t]),(0,r.useEffect)((function(){ee("achievements"==Y?(0,s.Z)(t).filter((function(e){return e.achievements})).sort((function(e,t){return t.achievements-e.achievements})):"playtime"==Y?(0,s.Z)(t).filter((function(e){return e.playtime>0})).sort((function(e,t){return t.playtime-e.playtime})):"status"==Y?(0,s.Z)(t).filter((function(e){return e.status==ae.toUpperCase()})):"rating"==Y?(0,s.Z)(t).filter((function(e){return e.user_rating})).sort((function(e,t){return t.user_rating-e.user_rating})):"trophies"==Y?(0,s.Z)(t).filter((function(e){return e.trophies})).sort((function(e,t){return e.trophies-t.trophies})):(0,s.Z)(t).sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})))}),[Y,ae]);var fe=function(e){E(e)},pe=function(e){var t;switch(Y){case"playtime":return Math.floor(e.playtime/60)>=1?(0,d.jsxs)("span",{className:"filter_stat",children:[Math.floor(e.playtime/60)," ",1==Math.floor(e.playtime/60)?"hour":"hours"]}):(0,d.jsxs)("span",{className:"filter_stat",children:[e.playtime," ",1==e.playtime?"minute":"minutes"]});case"rating":return(0,d.jsxs)("span",{className:"filter_stat rating_stat",children:[e.user_rating,"%"]});case"trophies":if(!e.trophies)break;var n=null===e||void 0===e||null===(t=e.trophies)||void 0===t?void 0:t.filter((function(e){return e.earned}));return(0,d.jsxs)("span",{className:"filter_stat",children:[Math.floor(n.length/e.trophies.length*100),"% earned"]})}};return(0,d.jsx)("div",{className:"user_collection__wrapper",children:(0,d.jsxs)("div",{className:"user_collection__container",style:{background:"#111"},children:[(0,d.jsxs)("div",{className:"user_collection__left",style:{height:y&&"250%",marginBottom:y&&"25px",display:k&&I&&"none"},children:[(0,d.jsxs)("div",{className:"user_collection__left_header",children:[(0,d.jsxs)("h2",{children:[(0,d.jsx)("img",{style:{height:"50px",width:"50px",borderRadius:"4px"},src:n.avatar}),n.name.trim(),"'s Collection",(0,d.jsx)(f.xng,{className:"user_collection__home_icon",onClick:i})]}),(0,d.jsxs)("div",{className:"user_collection__search",children:[(0,d.jsx)(f.Ozl,{className:"user_collection__search_icon"}),(0,d.jsx)("input",{className:"user_collection__search_input",value:h,onChange:function(e){return g(e.target.value)}})]})]}),(0,d.jsxs)("ul",{className:"user_collection__title_list",style:{height:y&&"100%",display:y&&"flex"},children:[(0,d.jsxs)("p",{className:"user_collection__total",style:{color:"white",paddingLeft:"7px",marginBottom:"5px",position:"fixed",top:"132px",left:"1px",fontSize:".95rem",width:"100%",height:"22px",background:"linear-gradient(to right, rgba(25,25,25,.5) 0%,rgba(17,17,17,1) 46%,rgba(1,1,1,1) 50%,rgba(10,10,10,1) 53%,rgba(78,78,78,1) 76%,rgba(56,56,56,1) 87%,rgba(27,27,27,1) 100%)",display:"flex",alignItems:"center"},children:[x.length<=0&&""==h?"All":"Results"," ","(",(0,d.jsx)("span",{style:{fontSize:".75rem"},children:""==h?t.length:x.length}),")"]}),""==h?t.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})).map((function(e){return(0,d.jsxs)("li",{className:"title_list__item",onClick:function(){return fe(e)},onContextMenu:function(t){return function(e,t){e.preventDefault(),P(t)}(t,e)},style:{background:(null===I||void 0===I?void 0:I.id)==e.id&&"#9147ff",color:(null===I||void 0===I?void 0:I.id)==e.id&&"white"},children:[" ",(0,d.jsx)("img",{src:e.imageURL}),(0,d.jsx)("p",{children:e.name}),e.name==n.favorite_game&&(0,d.jsx)(f.QJe,{className:"list_item_favorite"}),oe&&(0,d.jsxs)("ul",{onMouseEnter:function(e){return e.stopPropagation(!0)},className:"user_collection__game_context",style:{top:ie.y,left:ie.x,zIndex:6},children:[(0,d.jsx)("li",{className:"banner_context__item",children:"Add to Favorites"}),(0,d.jsx)("li",{className:"banner_context__item",onClick:function(e){return function(e){e.stopPropagation(),Object.keys(I).length>0&&T.id===I.id&&E(null),c(T),P(null)}(e)},children:"Delete Game"})]})]},e.id)})):x.length>0&&""!=h?x.map((function(e){return(0,d.jsxs)("li",{className:"title_list__item",onClick:function(){return fe(e)},children:[" ",(0,d.jsx)("img",{src:e.imageURL}),(0,d.jsx)("p",{children:e.name})]},e.id)})):(0,d.jsx)("p",{style:{color:"white",fontSize:"3.2rem",position:"absolute",top:"44%",left:"16px"},children:"No Matches"}),(0,d.jsx)("div",{className:"user_collection__title_list_shadow"}),(0,d.jsx)("div",{className:"user_collection__title_list_shadow top_shadow"})]}),(0,d.jsx)("div",{className:"user_collection__actions",children:(0,d.jsx)("button",{className:"persona_font",onClick:i,children:"Back"})})]}),(0,d.jsxs)("div",{className:"user_collection__right",children:[null!==I&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(le,{game:I,activeProfile:n,closeStats:function(){return E(null)},setProfile:function(e){return o(e)},setCurrentGame:function(e){return E(e)},updateCollection:l,userNotes:u})}),!I&&(0,d.jsxs)(d.Fragment,{children:[!k&&(0,d.jsxs)("div",{className:"user_collection__spotlight_wrapper",children:[(0,d.jsxs)("div",{className:"spotlight_filters",children:[(0,d.jsxs)("h2",{className:"spotlight_filter",children:["playtime"==H?"Most Played":"user_rating"==H?"Highest Rated":"Most Achievements"," "]}),(0,d.jsxs)("ul",{className:"spotlight_filter__options",children:[(0,d.jsx)("li",{onClick:function(){return z("playtime")},style:{color:"playtime"==H&&"white"},children:"Most Played"}),(0,d.jsx)("li",{onClick:function(){return z("user_rating")},style:{color:"user_rating"==H&&"white"},children:"Highest Rated"}),(0,d.jsx)("li",{onClick:function(){return z("achievements")},style:{color:"achievements"==H&&"white"},children:"Most Achievements"})]})]}),(0,d.jsx)("div",{className:"user_collection__spotlight",children:F.slice(0,3).map((function(e,t){return(0,d.jsxs)("figure",{className:"spotlight_container",onClick:function(){return fe(e)},children:[(0,d.jsx)("img",{className:"spotlight_image",src:e.banner_url||e.imageURL}),(0,d.jsxs)("div",{className:"spotlight_container__row",children:[(0,d.jsx)("img",{className:"spotlight_trophy_image",src:ce[t]}),(0,d.jsx)("figcaption",{className:"spotlight_details",children:(0,d.jsxs)("p",{children:["playtime"==H?"".concat(Math.floor(e.playtime/60)," hours"):"user_rating"==H?e.user_rating+"%":"ACHIEVE"," "]})})]})]},e.id)}))})]}),(0,d.jsxs)("div",{className:"user_collection__list_container",children:[(0,d.jsxs)("div",{className:"user_collection__list_filters",children:[(0,d.jsx)("p",{style:{marginBottom:"2px",fontSize:"1.5rem"},children:"alphabetical"==Y?"All Games":"achievements"==Y?"Achievements":"playtime"==Y?"Playtime":"rating"==Y?"Rating":"status"==Y?"Status":"Trophies"}),(0,d.jsxs)("ul",{className:"user_collection__list_filters__list",children:[(0,d.jsx)("li",{style:{color:"alphabetical"==Y&&"white"},onClick:function(){return V("alphabetical")},children:"All"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"achievements"==Y&&"white"},onClick:function(){return V("achievements")},children:"Achievements"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"playtime"==Y&&"white"},onClick:function(){return V("playtime")},children:"Playtime"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"rating"==Y&&"white"},onClick:function(){return V("rating")},children:"Rating"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"status"==Y&&"white"},onClick:function(){V("status"),re("backlog")},children:"Status"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"trophies"==Y&&"white"},onClick:function(){return V("trophies")},children:"Trophies"})]}),"status"==Y&&(0,d.jsx)("div",{className:"user_collection__list_filters__list",style:{margin:"0"},children:(0,d.jsxs)("ul",{className:"user_collection__list_filters__list_status",style:{flexDirection:"row"},children:[(0,d.jsx)("li",{style:{color:"backlog"==ae&&"white"},onClick:function(){return re("backlog")},children:"Backlog"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"started"==ae&&"white"},onClick:function(){return re("started")},children:"Started"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"playing"==ae&&"white"},onClick:function(){return re("playing")},children:"Playing"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"finished"==ae&&"white"},onClick:function(){return re("finished")},children:"Finished"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"100%"==ae&&"white"},onClick:function(){return re("100%")},children:"100%"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"abandonded"==ae&&"white"},onClick:function(){return re("abandonded")},children:"Abandonded"}),(0,d.jsx)("span",{children:" | "}),(0,d.jsx)("li",{style:{color:"not owned"==ae&&"white"},onClick:function(){return re("not owned")},children:"Not Owned"})]})})]}),(0,d.jsx)("ul",{className:"user_collection__list",children:!k||k&&""==h?$.map((function(e){return(0,d.jsxs)("li",{className:"list_item",onClick:function(){return fe(e)},children:[(0,d.jsxs)("div",{className:"user_collection__poster_container",children:[(0,d.jsx)("div",{className:"gradient"}),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"user_collection__poster_front",children:(0,d.jsx)("img",{loading:"lazy",className:"user_collection__poster",src:e.imageURL,alt:e.name})})})]}),pe(e)]},e.id)})):x.map((function(e){return(0,d.jsx)("li",{className:"list_item",onClick:function(){return fe(e)},children:(0,d.jsxs)("div",{className:"user_collection__poster_container",children:[(0,d.jsx)("div",{className:"gradient"}),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"user_collection__poster_front",children:(0,d.jsx)("img",{loading:"lazy",className:"user_collection__poster",src:k?e.imageURL.replace("cover_big","1080p"):e.imageURL,alt:e.name})})})]})},e.id)}))})]})]})]})]})})},pe=n(5872),he=new Date,ge=(Math.floor(he.getTime()/1e3),[{requestId:"fetchAdventureTitles",genreId:31,title:"ACTION/ADVENTURE GAMES"},{requestId:"fetchArcadeTitles",genreId:33,title:"ARCADE GAMES"},{requestId:"fetchMusicTitles",genreId:7,title:"MUSIC GAMES"},{requestId:"fetchHackTitles",genreId:25,title:"HACK/SLASH TITLES"},{requestId:"fetchFightingTitles",genreId:4,title:"FIGHTING GAMES"},{requestId:"fetchIndieTitles",genreId:32,title:"INDIE GAMES"},{requestId:"fetchMassivelyMultiplayerTitles",genreId:36,title:"MOBA GAMES"},{requestId:"fetchPlatformerTitles",genreId:8,title:"PLATFORMER GAMES"},{requestId:"fetchPuzzleTitles",genreId:9,title:"PUZZLE GAMES"},{requestId:"fetchRacingTitles",genreId:10,title:"RACING GAMES"},{requestId:"fetchRPGTitles",genreId:12,title:"RPG GAMES"},{requestId:"fetchShooterTitles",genreId:5,title:"SHOOTER GAMES"},{requestId:"fetchSimulationTitles",genreId:13,title:"SIMULATION GAMES"},{requestId:"fetchSportsTitles",genreId:14,title:"SPORTS GAMES"},{requestId:"fetchStrategy",genreId:15,title:"STRATEGY GAMES"}]);var ve=function(e){var t=e.twitchToken,n=(e.setGameDetails,(0,r.useState)([])),s=(0,a.Z)(n,2),c=s[0],l=(s[1],(0,r.useState)(!1)),u=(0,a.Z)(l,2),d=(u[0],u[1]);(0,r.useEffect)((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.abrupt("return");case 5:e.prev=5,e.t0=e.catch(1),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[1,5]])})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]);return null===c||void 0===c||c.sort((function(e,t){return e.rating_count>t.rating_count?-1:t.rating_count>e.rating_count?1:0})),""},_e=new URLSearchParams(window.location.search).get("code"),xe=window.location.search.split("?")[1],je=function(e){var t=e.currentUser,n=e.twitchToken,s=e.currentProfile,c=e.currentCollection,l=e.userNotes,m=(e.manageProfiles,e.updateCollection),f=(e.selectProfile,e.fetchGame),p=e.addGame,h=e.removeGame,g=e.logoutUser,v=function(){var e=localStorage.getItem("twitch_auth"),t=(0,r.useState)([]),n=(0,a.Z)(t,2),s=n[0],c=n[1],l=(0,r.useState)(!0),d=(0,a.Z)(l,2),m=d[0],f=d[1],p="https://cybrary2022.onrender.com",h=new Date;(0,r.useEffect)((function(){var t=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("".concat(p,"/app/get_genres"));case 2:if(t=e.sent,a=new Date(t.data.last_updated),!(h>a.setDate(a.getDate()+1))){e.next=8;break}return e.abrupt("return",n());case 8:return c(t.data[0].genres_list),f(!1),e.abrupt("return",t.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Promise.all(ge.map((function(t){return u().post("".concat(p,"/app/game_genre"),{token:e,genreId:t.genreId,genreTitle:t.title})})));case 4:n=t.sent,a=n.map((function(e){return e.data})),g(a),f(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var g=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("".concat(p,"/app/update_genres"),{genreList:t,date:h});case 2:n=e.sent,c(n.data.genres_list);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{genreGamesList:s,isLoading:m}}(),_=(0,r.useState)(!1),j=(0,a.Z)(_,2),w=j[0],N=(j[1],(0,r.useState)({status:"",message:""})),y=(0,a.Z)(N,2),b=y[0],k=y[1],C=(0,r.useState)(null),S=(0,a.Z)(C,2),Z=S[0],I=S[1],E=(0,r.useState)(!1),D=(0,a.Z)(E,2),M=D[0],T=D[1],U=(0,r.useState)(),F=(0,a.Z)(U,2),O=F[0],B=(F[1],(0,r.useState)(!1)),z=(0,a.Z)(B,2),X=z[0],W=z[1],Y=(0,r.useState)(!1),J=(0,a.Z)(Y,2),V=(J[0],J[1]),K=(0,r.useState)(null),q=(0,a.Z)(K,2),$=(q[0],q[1]),ee=(0,r.useState)(null),te=(0,a.Z)(ee,2),ne=(te[0],te[1]),ae=(0,r.useState)(!1),re=(0,a.Z)(ae,2),se=re[0],ie=re[1],oe=(0,r.useState)(null),ce=(0,a.Z)(oe,2),le=ce[0],ue=ce[1],de=(0,r.useState)(!1),me=(0,a.Z)(de,2),he=(me[0],me[1]),je=(0,r.useState)(null),we=(0,a.Z)(je,2),Ne=we[0],ye=we[1],Ae=(0,r.useState)(null),be=(0,a.Z)(Ae,2),ke=be[0],Ce=be[1],Se=function(e){var t=(0,r.useState)(),n=(0,a.Z)(t,2),s=n[0],c=n[1],l=(0,r.useState)(),d=(0,a.Z)(l,2),m=d[0],f=d[1],p=(0,r.useState)(),h=(0,a.Z)(p,2),g=h[0],v=h[1],_="https://cybrary2022.onrender.com",x=sessionStorage.getItem("spotify_auth");return(0,r.useEffect)((function(){if(x)return console.log(x),void c(JSON.parse(x));if(e){var t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u().post("".concat(_,"/app/spotify_authentication"),{code:e,baseURL:_});case 3:n=t.sent,c(n.data.tokenRequest.body.access_token),f(n.data.tokenRequest.body.refresh_token),v(n.data.tokenRequest.body.expires_in),sessionStorage.setItem("spotify_auth",JSON.stringify(n.data.tokenRequest.body.access_token)),window.history.pushState({},null,"/"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),window.location="/";case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]),(0,r.useEffect)((function(){if(m&&g){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().post("".concat(_,"/app/refresh_token"),{refreshToken:m,baseURL:_});case 3:t=e.sent,c(t.data.body.body.access_token),f(t.data.body.body.refresh_token),v(t.data.body.body.expires_in),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("REFRESH TOKEN ERROR"),window.location="/";case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=setInterval((function(){e()}),1e3*(g-60));return function(){return clearTimeout(t)}}}),[m,g]),s}(_e);!function(e){var t=(0,r.useState)([]),n=(0,a.Z)(t,2),s=n[0],c=n[1];(0,r.useEffect)((function(){if(e){var t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u().get("".concat("https://cybrary2022.onrender.com","/steam/get_owned_games"),{params:{id:e}});case 3:n=t.sent,localStorage.setItem("steamID",n.config.params.id),console.log(n.data),c(n.data),window.history.pushState({},null,"/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),console.log("GET STEAM COLLECTION ERROR");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e])}(xe);(0,r.useEffect)((function(){le||(document.body.style.overflow="auto")}),[]);var Ze=function(){document.body.style.overflow="auto",ue(null)},Ie=function(e){I(e)};return X?(0,d.jsx)("div",{className:"loading_profile__container",children:(0,d.jsx)("div",{className:"loading_profile",children:(0,d.jsx)("img",{src:s.avatar,alt:"current user avatar"})})}):s?null!==ke?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(H.Z,{setNotification:function(e,t){return k({status:e,message:t})},game:ke,closeDetails:function(){return Ce(null)},twitchToken:n,addGame:function(e){return p(e)},removeGame:function(e){return h(e)},activeProfile:s}),(0,d.jsx)(pe.Z,{notification:b,displayNotification:w,hideNotification:function(){k({message:"",status:""})}})]}):se?(0,d.jsx)(fe,{collection:c,activeProfile:s,backToHome:function(){return ie(!1)},currentTrack:Z,playTrack:Ie,isPlaying:M,pausePlayback:function(){return T(!1)},resumePlayback:function(){return T(!0)},setSelectedProfile:function(e){return ne(e)},spotifyToken:Se,removeGame:function(e){return h(e)},updateCollection:m,userNotes:l}):(0,d.jsxs)("div",{className:"App",children:[(0,d.jsx)(P,{currentUser:t,activeProfile:s,changeUser:function(e){W(!0),localStorage.setItem("profile",e.name),setTimeout((function(){W(!1)}),2e3)},onLogout:g,fetchSubmittedGame:f,toProfilePage:function(){return localStorage.removeItem("profile")},selectProfile:function(e){return ne(e)},spotifyToken:Se,twitchToken:n,saveEdit:function(){return V(!0)},setLoggedUser:function(e){return $(e)},updateCollection:m,currentCollection:c,viewCollection:function(){return ie(!0)}}),(0,d.jsx)(A,{setGameDetails:function(e){return Ce(e)},addGame:function(e){return p(e)},activeProfile:s}),(0,d.jsx)(G,{twitchToken:n,setGameDetails:function(e){return Ce(e)}}),(0,d.jsx)(ve,{twitchToken:n,setGameDetails:function(e){return Ce(e)}}),(0,d.jsx)(L,{twitchToken:n,setGameDetails:function(e){return Ce(e)}}),le&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h1",{className:"row__preview_close",onClick:Ze,children:"X"}),(0,d.jsx)("h1",{className:"row__preview_close options",onClick:function(){he(!0)},children:(0,d.jsx)(R.eBn,{})})]}),(0,d.jsx)("div",{className:"".concat(null!==le&&"game_preview__modal")}),v.genreGamesList.map((function(e){return(0,d.jsx)(x,{activeProfile:s,spotifyToken:Se,genreDetails:Object.entries(e),playTrack:Ie,currentTrack:Z,setGameDetails:function(e){return Ce(e)},resumePlayback:function(e){return T(!0)},pausePlayback:function(e){return T(!1)},isPlaying:M,currentGameOpen:le,openGame:function(e){return function(e){console.log(e),ue(e.id),document.body.style.overflow="hidden"}(e)},closeGameWindow:Ze,addGame:function(e){return p(e)},setNotification:function(e,t){return k({status:e,message:t})},loading:O,hoverGame:function(e){return ye(e)},hoverAway:function(){return ye(null)},currentHover:Ne},Object.keys(e))})),Se&&(0,d.jsx)(Q,{spotifyToken:Se,playAudio:M,beginPlayback:function(e){return T(!0)},pausePlayback:function(e){return T(!1)},trackUri:null===Z||void 0===Z?void 0:Z.uri}),(0,d.jsx)(pe.Z,{notification:b,displayNotification:w,hideNotification:function(){k({message:"",status:""})}})]}):void 0},we=(0,r.memo)(je)},4654:function(){}}]);
//# sourceMappingURL=626.9322066c.chunk.js.map