"use strict";(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[427],{1403:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var s=n(3433),a=n(9439),i=n(2791),r=n(6355),o=n(4942),l=n(1413),c=n(4165),u=n(5861),d=n(4569),m=n.n(d),h=n(3853),_=n(5320),p=function(){var e=(0,i.useState)({x:0,y:0}),t=(0,a.Z)(e,2),n=t[0],s=t[1],r=(0,i.useState)(!1),o=(0,a.Z)(r,2),l=o[0],c=o[1],u=(0,i.useState)(!1),d=(0,a.Z)(u,2),m=d[0],h=d[1],_=(0,i.useCallback)((function(e){e.preventDefault(),"user_game_banner_img"!==e.target.className||l||(s({x:e.offsetX,y:e.pageY}),c(!0),h(!1)),"title_list__item"===e.target.className&&(s({x:e.movementX+5,y:e.y+20}),h(!0),c(!1))}),[s]),p=(0,i.useCallback)((function(){m&&h(!1),l&&c(!1)}),[m,l]);return(0,i.useEffect)((function(){return document.addEventListener("click",p),document.addEventListener("contextmenu",_),function(){document.removeEventListener("click",p),document.removeEventListener("contextmenu",_)}})),{anchorPoint:n,showTitleMenu:m,showBannerMenu:l,resetContext:function(){c(!1),h(!1)}}},f=n(8820),g=n(6856),x=n(9126),v=n(184),N=function(e){var t=e.note,n=e.closeNote,s=e.updateNote,r=e.deleteNote,o=(0,i.useState)(t.note),l=(0,a.Z)(o,2),c=l[0],u=l[1];return(0,v.jsxs)("div",{className:"note_details__container",children:[(0,v.jsx)("span",{className:"note_details__date",children:t.date}),(0,v.jsx)(x.And,{className:"note_details__back_icon",onClick:n}),(0,v.jsxs)("div",{className:"note_details__details",children:[(0,v.jsx)("h4",{className:"note_details_note",children:"Note Details"}),(0,v.jsx)("textarea",{value:c,onChange:function(e){return u(e.target.value)},className:"note_details__editor"})]}),(0,v.jsxs)("div",{className:"note_details__actions",children:[(0,v.jsx)("button",{onClick:function(){return s(t,c)},children:"Save Note"}),(0,v.jsx)("button",{onClick:function(){return r(t.note)},children:"Delete Note"})]})]})},j=new Date,y=j.getFullYear(),k=j.getMonth()+1,b=j.getDate();b<10&&(b="0"+b),k<10&&(k="0"+k);var w=k+"/"+b+"/"+y,C=function(e){var t,n,s,o,l,d,h,_=e.profile,p=e.windowViewHandler,x=e.viewStatus,j=e.gameNotes,y="https://cybrary2022.onrender.com",k=localStorage.getItem("user"),b=(0,i.useState)(""),C=(0,a.Z)(b,2),S=C[0],Z=C[1],I=(0,i.useState)(!1),E=(0,a.Z)(I,2),D=E[0],A=E[1],P=(0,i.useState)(""),T=(0,a.Z)(P,2),L=T[0],M=T[1],B=(0,i.useState)(!1),R=(0,a.Z)(B,2),O=R[0],U=R[1],z=(0,i.useState)(""),G=(0,a.Z)(z,2),F=G[0],H=G[1],Y=(0,i.useState)(null),K=(0,a.Z)(Y,2),W=K[0],X=K[1],V=null===j||void 0===j||null===(t=j.gameNotes)||void 0===t?void 0:t.filter((function(e){return e.tabName==S}))[0],Q=(0,i.useRef)(null),q=(0,i.useRef)(null),J=(0,i.useRef)(null),$=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().post("".concat(y,"/notes/create_note"),{email:k,profile:_.name});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){if(_.notesId){var e;if(null!==W)return;null===Q||void 0===Q||null===(e=Q.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}else $()}),[j,S]),(0,i.useEffect)((function(){var e=function(e){D&&13==e.keyCode&&console.log(L)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,i.useEffect)((function(){var e;j&&(Z(null===j||void 0===j||null===(e=j.gameNotes[0])||void 0===e?void 0:e.tabName),console.log("new game"))}),[j]),(0,i.useEffect)((function(){null===W&&(q.current.focus(),A(!1),H(""),M(""))}),[q,V]),(0,i.useEffect)((function(){return function(){return clearTimeout(ee)}}),[]),console.log(j);var ee,te=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m().put("".concat(y,"/notes/update_notes"),{userNotesId:_.notesId,noteId:j.id,notes:j});case 4:t=e.sent,console.log(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){D?(V.tabName=q.current.innerText,te(),Z(q.current.innerText),A(!1)):A(!0)},se=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=L){e.next=3;break}return e.abrupt("return");case 3:j.gameNotes.push({tabName:L,notes:[]}),Z(L),te(),M(""),U(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"user_notes__wrapper ".concat(!x.notes&&"minimized_notes"),children:[(0,v.jsx)(r.iUH,{style:{transform:x.notes?"rotate(180deg)":"rotate(0)",display:W&&"none"},className:"user_game__minimize_icon",onClick:function(){return p("notes")}}),W?(0,v.jsx)(N,{note:W,closeNote:function(){return X(null)},updateNote:function(e,t){console.log(e),e.note=t,e.date=w,te(),X(null)},deleteNote:function(e){var t=V.notes.filter((function(t){return t.note!==e}));V.notes=t,te(),X(null)}}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("h4",{contentEditable:D,suppressContentEditableWarning:!0,onBlur:ne,onKeyPress:function(e){e.preventDefault(),console.log(e.currentTarget),"Enter"===e.key&&ne()},children:[(0,v.jsx)("p",{ref:q,style:{borderBottom:D?"2px solid #9147ff":"2px solid transparent",userSelect:D?"auto":"none",padding:"0px 6px",transition:"all 200ms"},children:S})," ",(0,v.jsx)(g.rnx,{className:"edit_tab_icon",onClick:function(){return A(!D)}})," "]}),(0,v.jsx)("div",{className:"user_notes__header",children:(0,v.jsxs)("ul",{className:"user_notes__tabs",children:[null===j||void 0===j||null===(n=j.gameNotes)||void 0===n?void 0:n.map((function(e){return(0,v.jsx)("li",{className:"user_notes__tab",onClick:function(){return Z(e.tabName)},style:{borderBottom:S==e.tabName&&"1px solid transparent"},children:e.tabName},e.tabName)})),(0,v.jsx)("li",{className:"user_notes__tab ".concat(O?"add_tab":"new_tab"),onClick:function(e){e.stopPropagation(),U(!0),ee=setTimeout((function(){return J.current.scrollIntoView({behavior:"smooth"})}),150)},children:O?(0,v.jsxs)("div",{className:"new_tab__container",children:[(0,v.jsx)("form",{onSubmit:se,children:(0,v.jsx)("input",{value:L,onChange:function(e){return M(e.target.value)}})}),(0,v.jsx)("p",{onClick:function(e){e.stopPropagation(),U(!1)},children:"X"})]}):(0,v.jsx)(f.Lfi,{})}),(0,v.jsx)("div",{ref:J})]})})]}),(0,v.jsx)("div",{className:"user_notes__notes_wrapper",children:(0,v.jsx)("ul",{className:"user_notes__notes",children:(null===j||void 0===j||null===(s=j.gameNotes)||void 0===s||null===(o=s.filter((function(e){return e.tabName==S}))[0])||void 0===o||null===(l=o.notes)||void 0===l?void 0:l.length)>0?null===j||void 0===j||null===(d=j.gameNotes)||void 0===d||null===(h=d.filter((function(e){return e.tabName==S}))[0])||void 0===h?void 0:h.notes.map((function(e){return(0,v.jsx)("li",{className:"user_note",onClick:function(){return function(e){X(e),U(!1),A(!1)}(e)},children:e.note},e.note)})):(0,v.jsx)("p",{className:"no_notes_msg",children:"No Notes"})})}),(0,v.jsx)("div",{ref:Q,style:{width:"10px",marginLeft:"5px"}}),(0,v.jsx)("div",{className:"user_notes__form_container",style:{display:"".concat(x.notes?"block":"none")},children:(0,v.jsx)("form",{className:"user_notes__form",onSubmit:function(e){e.preventDefault(),""!=F&&(V.notes.push({id:V.notes.length+1,note:F,date:w}),te(),H(""))},children:(0,v.jsx)("input",{value:F,onChange:function(e){return H(e.target.value)},className:"user_notes__input",placeholder:"I think Clark Kent is Batman"})})})]})]})},S=new Date,Z=S.getFullYear(),I=S.getMonth()+1,E=S.getDate();E<10&&(E="0"+E),I<10&&(I="0"+I);var D=I+"/"+E+"/"+Z,A=function(e){var t,n=e.game,s=e.activeProfile,d=e.closeStats,f=(e.setProfile,e.setNotification,e.setCurrentGame),g=e.updateCollection,x=e.userNotes,N=p(),j=N.anchorPoint,y=N.showBannerMenu,k=N.resetContext,b=(0,i.useState)({achievements:!0,notes:!0,trophies:!0}),w=(0,a.Z)(b,2),S=w[0],Z=w[1],I=(0,i.useState)(n.achievements),E=(0,a.Z)(I,2),A=E[0],P=E[1],T=(0,i.useState)(n.trophies),L=(0,a.Z)(T,2),M=L[0],B=L[1],R=(0,i.useState)("unlocked"),O=(0,a.Z)(R,2),U=O[0],z=O[1],G=(0,i.useState)("unlocked"),F=(0,a.Z)(G,2),H=F[0],Y=F[1],K=(0,i.useState)(Math.floor(n.playtime/60)),W=(0,a.Z)(K,2),X=W[0],V=W[1],Q=(0,i.useState)(!1),q=(0,a.Z)(Q,2),J=q[0],$=q[1],ee=(0,i.useState)(n.user_rating),te=(0,a.Z)(ee,2),ne=te[0],se=te[1],ae=(0,i.useState)(!1),ie=(0,a.Z)(ae,2),re=ie[0],oe=ie[1],le=(0,i.useState)(null),ce=(0,a.Z)(le,2),ue=(ce[0],ce[1],(0,i.useState)(!1)),de=(0,a.Z)(ue,2),me=de[0],he=de[1],_e=(0,i.useState)(""),pe=(0,a.Z)(_e,2),fe=pe[0],ge=pe[1],xe=(0,i.useState)(n.status),ve=(0,a.Z)(xe,2),Ne=ve[0],je=ve[1],ye=(0,i.useState)(!1),ke=(0,a.Z)(ye,2),be=ke[0],we=ke[1],Ce="https://cybrary2022.onrender.com",Se=localStorage.getItem("steamID"),Ze=(localStorage.getItem("achivementsConn"),localStorage.getItem("user")),Ie=Math.floor((null===M||void 0===M?void 0:M.filter((function(e){return 1==e.earned})).length)/(null===M||void 0===M?void 0:M.length)*100),Ee=Math.floor((null===A||void 0===A?void 0:A.filter((function(e){return 1==e.achieved||1==e.earned})).length)/(null===A||void 0===A?void 0:A.length)*100);console.log(n);"https://gamefaqs.gamespot.com/search?game=".concat(n.name.replaceAll(" ","+"));(0,i.useEffect)((function(){x.notes_collection.filter((function(e){return e.id==n.id})).length>0||x.notes_collection.push({id:n.id,gameNotes:[{tabName:"Notes",notes:[{id:0,note:"These are your notes for ".concat(n.name,"! Click me to edit this or start your own tab by clicking the +!"),date:D}]}]})}),[n]),(0,i.useEffect)((function(){var e=function(e){27===e.keyCode&&(oe(!1),we(!1))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,i.useEffect)((function(){if($(!1),oe(!1),we(!1),je(n.status||"BACKLOG"),V(Math.floor(n.playtime/60)),se(n.user_rating),P(n.achievements),B(n.trophies),Se){var e=function(e,t){var n=[];return t.map((function(t){var s=e.filter((function(e){return e.name==t.displayName}));s.length>0&&(t.achieved=s[0].achieved),n.push(t)})),n.sort((function(e,t){var n=e.displayName.toUpperCase(),s=t.displayName.toUpperCase();return n<s?-1:n>s?1:0})),n.sort((function(e,t){return e.achieved<t.achieved?1:e.achieved>t.achieved?-1:0})),n},t=function(){var t=(0,u.Z)((0,c.Z)().mark((function t(){var a,i,r,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m().get("".concat(Ce,"/steam/get_game_stats"),{params:{gameId:n.id}});case 2:if(a=t.sent,0!=Object.keys(a.data).length){t.next=6;break}return P(null),t.abrupt("return");case 6:if(t.prev=6,n.achievements){t.next=19;break}return t.next=10,m().get("".concat(Ce,"/steam/get_steam_achievements"),{params:{gameId:n.id,steamId:Se}});case 10:return i=t.sent,r=e(i.data.achievements,a.data.availableGameStats.achievements),t.next=14,m().put("".concat(Ce,"/app/update_game_achievements"),{email:Ze,currentProfile:s.name,achievements:r,gameId:n.id});case 14:o=t.sent,console.log(o),f(i.data.response.game),g(i.data.response.profile.collection),P(o.data.response.game.achievements);case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(6),console.log(t.t0);case 24:case"end":return t.stop()}}),t,null,[[6,21]])})));return function(){return t.apply(this,arguments)}}();t()}else console.log("No steam id")}),[n]);var De=function(e){if(!e)return"N/A";var t=e.filter((function(e){return 1==e.achieved||1==e.earned})).length;return t+"/"+e.length};var Ae=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(){var t,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=20*ne,20*ne>=100&&(t=100),e.prev=2,e.next=5,m().put("".concat(Ce,"/app/update_game_rating"),{email:Ze,currentProfile:s.name,rating:t,gameId:n.id});case 5:a=e.sent,console.log(a),localStorage.setItem("profile",a.data.response.profile.name),f(a.data.response.game),g(a.data.response.profile.collection),oe(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.playtime!=X){e.next=5;break}return console.log("No new changes"),e.abrupt("return");case 5:return e.prev=5,e.next=8,m().put("".concat(Ce,"/app/update_game_playtime"),{email:Ze,currentProfile:s.name,playtime:60*X,gameId:n.id});case 8:t=e.sent,console.log(t),localStorage.setItem("profile",t.data.response.profile.name),f(t.data.response.game),g(t.data.response.profile.collection),$(!1),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("HAPPENING"),e.prev=1,e.next=4,m().put("".concat(Ce,"/app/update_game_backlog"),{email:Ze,currentProfile:s.name,status:t,gameId:n.id});case 4:a=e.sent,console.log(a),localStorage.setItem("profile",a.data.response.profile.name),console.log(a.data),console.log(a.data.response.profile.collection),f(a.data.response.game),g(a.data.response.profile.collection),we(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),Le=function(e){Te(e),we(!1)},Me=function(e){Z((0,l.Z)((0,l.Z)({},S),{},(0,o.Z)({},e,!S[e])))},Be=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=fe.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,m().put("".concat(Ce,"/app/update_game_banner"),{email:Ze,currentProfile:s.name,url:fe,gameId:n.id});case 5:t=e.sent,localStorage.setItem("profile",t.data.response.profile.name),f(t.data.response.game),g(t.data.response.profile.collection),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:he(!1),ge("");case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"user_game__wrapper",children:[me&&(0,v.jsx)("div",{className:"user_game__modal",children:(0,v.jsxs)("div",{className:"modal_content",children:[(0,v.jsx)("h2",{style:{maxWidth:"75%",textAlign:"center",marginBottom:"25px"},children:"Please enter the link to any image or gif below."}),(0,v.jsxs)("div",{className:"modal_form",style:{width:"100%"},children:[(0,v.jsx)("input",{style:{width:"80%"},value:fe,onChange:function(e){return ge(e.target.value)}}),(0,v.jsx)("button",{onClick:Be,children:"Submit"}),(0,v.jsx)("button",{onClick:function(){return he(!1)},children:"Back"})]})]})}),(0,v.jsxs)("div",{className:"user_game__banner",children:[y&&(0,v.jsxs)("ul",{className:"user_game__banner_context",style:{top:j.y+5,left:j.x},children:[(0,v.jsx)("li",{className:"banner_context__item",onClick:function(e){e.preventDefault(),he(!0),k()},children:"Set Custom Banner"}),(0,v.jsx)("li",{className:"banner_context__item",children:"Set Custom Logo"}),(0,v.jsx)("li",{className:"banner_context__item",children:"Set Default Image"})]}),(0,v.jsx)("div",{className:"user_game__exit",onClick:d,children:"X"}),(0,v.jsx)("img",{className:"user_game_banner_img",src:n.banner_image||n.imageURL.replace("cover_big_2x","1080p_2x")}),(0,v.jsxs)("div",{className:"user_game__current_stats",children:[(0,v.jsxs)("div",{className:"playtime_container",children:[(0,v.jsx)(h.TCC,{className:"playtime_clock_icon"}),(0,v.jsxs)("div",{className:"stats_item",children:[(0,v.jsx)("h3",{style:{color:J&&"#9147ff"},children:"PLAY TIME"}),(0,v.jsx)("span",{style:{display:J&&"none"},className:"previous_playtime",onClick:function(){return $(!0)},children:function(e){if(e<=0&&"steam"==n.type)return"Not Started";if(e<=0&&"steam"!==n.type)return"0 hours";var t=e%60,s=Math.floor(e/60);return 0==t?s+" hours":"".concat(s,".").concat(t.toString().padStart(2,"0")," hours")}(n.playtime)}),(0,v.jsx)("input",{type:"number",value:X,min:"0",onKeyDown:function(e){"Enter"===e.key&&Pe(),"Escape"===e.key&&($(!1),V(Math.floor(n.playtime/60)))},onChange:function(e){return V(e.target.value)},className:"playtime_input ".concat(J&&"playtime_focused")})]})]}),(0,v.jsx)("div",{className:"rating_container",children:(0,v.jsxs)("div",{className:"stats_item",children:[(0,v.jsx)("h3",{style:{paddingBottom:re&&"4px"},children:"RATING"}),(0,v.jsxs)("span",{onClick:function(){return oe(!0)},className:"previous_rating",style:{display:re&&"none"},children:[n.user_rating||0,"%"]}),(0,v.jsx)("div",{className:"rating_stars",onMouseMove:function(e){var t=e.currentTarget.getBoundingClientRect();Math.floor(e.clientX-t.left);se(Math.floor(e.clientX-t.left)/20)},onClick:Ae,style:{width:!re&&"0px",display:!re&&"none"},children:(0,v.jsx)(_.Q,{rating:ne,totalStars:5,width:20,height:20,outlined:!0})})]})}),(0,v.jsxs)("div",{className:"achievement_count_container",children:[(0,v.jsxs)("div",{className:"stats_item",children:[(0,v.jsx)("h3",{style:{paddingTop:"5px"},children:"STATUS"}),(0,v.jsx)("button",{onClick:function(){return we(!be)},style:{backgroundColor:"BACKLOG"==Ne?"dodgerblue":"STARTED"==Ne?"aqua":"FINISHED"==Ne?"green":"PLAYING"==Ne?"pink":"100%"==Ne?"gold":"ABANDONDED"==Ne?"red":"grey"},className:"status_btn",children:Ne})]}),be&&(0,v.jsx)("div",{className:"backlog_items",children:(0,v.jsxs)("ul",{className:"backlog_items_list",children:[(0,v.jsx)("li",{style:{backgroundColor:"BACKLOG"==n.status&&"#9147ff",color:"BACKLOG"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Le("BACKLOG")},children:"Backlog"}),(0,v.jsx)("li",{style:{backgroundColor:"STARTED"==n.status&&"#9147ff",color:"STARTED"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Le("STARTED")},children:"Started"}),(0,v.jsx)("li",{style:{backgroundColor:"PLAYING"==n.status&&"#9147ff",color:"PLAYING"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Le("PLAYING")},children:"Currently Playing"}),(0,v.jsx)("li",{style:{backgroundColor:"FINISHED"==n.status&&"#9147ff",color:"FINISHED"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Le("FINISHED")},children:"Finished"}),(0,v.jsx)("li",{style:{backgroundColor:"100%"==n.status&&"#9147ff",color:"100%"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Le("100%")},children:"100% Completed"}),(0,v.jsx)("li",{style:{backgroundColor:"ABANDONDED"==n.status&&"#9147ff",color:"ABANDONDED"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Le("ABANDONDED")},children:"Abandonded"}),(0,v.jsx)("li",{style:{backgroundColor:"NOT OWNED"==n.status&&"#9147ff",color:"NOT OWNED"==n.status&&"white"},className:"backlog_items_item",onClick:function(){Le("NOT OWNED")},children:"Not Owned"})]})})]}),(0,v.jsx)("div",{className:"music_icon_container",children:(0,v.jsxs)("div",{className:"stats_item",style:{alignItems:"center"},children:[(0,v.jsx)("h3",{children:"MUSIC"}),(0,v.jsx)(r.HcQ,{className:"music_icon"})]})})]})]}),(0,v.jsx)("div",{className:"user_game__data_wrapper",children:(0,v.jsxs)("div",{className:"user_game__data",children:[A&&(0,v.jsx)("div",{className:"user_game__achievements_wrapper ".concat(!S.achievements&&"minimized"),children:(0,v.jsxs)("div",{className:"user_game__achievements",children:[(0,v.jsxs)("div",{className:"user_game__achievements_banner",children:[(0,v.jsx)(r.iUH,{style:{transform:S.achievements?"rotate(180deg)":"rotate(0)"},className:"user_game__minimize_icon",onClick:function(){return Me("achievements")}}),100===Ee&&(0,v.jsx)(r.PIe,{className:"user_game__completion_medal"}),(0,v.jsx)("h4",{children:(0,v.jsx)("p",{children:"Achievements"})}),(0,v.jsxs)("p",{children:["You've unlocked ",De(A)," (",Ee,"%)"]}),(0,v.jsx)("div",{className:"user_game__achievements_progress_bar_container",children:(0,v.jsx)("div",{className:"user_game__achievements_progress_bar",style:{width:"".concat(Ee,"%"),background:s.color}})}),(0,v.jsxs)("div",{className:"user_game__achievements_actions",children:[(0,v.jsx)("button",{className:"unlocked"==U&&"active",onClick:function(){return z("unlocked")},children:"Unlocked"}),(0,v.jsx)("button",{className:"".concat("locked"==U&&"active"),onClick:function(){return z("locked")},children:"In Progress"})]})]}),(0,v.jsx)("ul",{className:"user_game__achievements_list",children:A.filter((function(e){return"unlocked"==U?e.achieved:!e.achieved})).sort((function(e,t){return e.displayName>t.displayName?1:t.displayName>e.displayName?-1:0})).map((function(e){return(0,v.jsxs)("li",{className:"achievement_item",children:[(0,v.jsx)("div",{className:"achievement_item_icon",style:{border:"1px solid ".concat(s.color)},children:(0,v.jsx)("img",{className:"achievement_item_icon__img",src:e.achieved?e.icon:e.icongray})}),(0,v.jsxs)("div",{className:"achievement_item_headers",children:[(0,v.jsx)("h4",{children:e.displayName}),e.description&&(0,v.jsx)("p",{children:e.description})]})]})}))})]})}),M&&(0,v.jsx)("div",{className:"user_game__achievements_wrapper ".concat(!S.trophies&&"minimized"),children:(0,v.jsxs)("div",{className:"user_game__achievements ".concat(100==Ie&&"completed"),children:[(0,v.jsxs)("div",{className:"user_game__achievements_banner",children:[(0,v.jsx)(r.iUH,{style:{transform:S.trophies?"rotate(180deg)":"rotate(0)"},className:"user_game__minimize_icon",onClick:function(){return Me("trophies")}}),100===Ie&&(0,v.jsx)(r.PIe,{className:"user_game__completion_medal"}),(0,v.jsx)("h4",{children:(0,v.jsx)("p",{children:"Trophies"})}),(0,v.jsxs)("p",{children:["You've unlocked ",De(M)," (",Ie,"%)"]}),(0,v.jsx)("div",{className:"user_game__achievements_progress_bar_container",children:(0,v.jsx)("div",{className:"user_game__achievements_progress_bar",style:{width:"".concat(Ie,"%"),background:s.color}})}),(0,v.jsxs)("div",{className:"user_game__achievements_actions",children:[(0,v.jsx)("button",{className:"unlocked"==H&&"active",onClick:function(){return Y("unlocked")},children:"Unlocked"}),Ie<100&&(0,v.jsx)("button",{className:"".concat("locked"==H&&"active"),onClick:function(){return Y("locked")},children:"In Progress"})]})]}),(0,v.jsx)("ul",{className:"user_game__achievements_list",children:M.filter((function(e){return"unlocked"==H?e.earned:!e.earned})).sort((function(e,t){return e.trophyName>t.trophyName?1:t.trophyName>e.trophyName?-1:0})).map((function(e){return(0,v.jsxs)("li",{className:"achievement_item",children:[(0,v.jsx)("div",{className:"achievement_item_icon",style:{border:"1px solid ".concat(s.color)},children:(0,v.jsx)("img",{className:"achievement_item_icon__img ".concat(!e.earned&&"greyscale"),src:e.trophyIconUrl})}),(0,v.jsxs)("div",{className:"achievement_item_headers",children:[(0,v.jsx)("h4",{children:e.trophyName}),e.trophyDetail&&(0,v.jsx)("p",{children:e.trophyDetail})]})]},e.trophyName)}))})]})}),(0,v.jsx)(C,{profile:s,windowViewHandler:Me,viewStatus:S,gameNotes:null===x||void 0===x||null===(t=x.notes_collection)||void 0===t?void 0:t.filter((function(e){return e.id==n.id}))[0]})]})})]})},P=n.p+"static/media/ps-trophy-bronze.28d42dd144376e70acf4.png",T=n.p+"static/media/ps-trophy-gold.6be79437e2f7d84b2568.png",L=n.p+"static/media/ps-trophy-platinum.3e1d87fe6e2a0976fe1b.png",M=function(e){var t=e.collection,n=e.activeProfile,o=e.backToHome,l=(e.playTrack,e.currentTrack,e.isPlaying,e.pausePlayback,e.resumePlayback,e.spotifyToken,e.setSelectedProfile),c=e.removeGame,u=e.updateCollection,d=e.userNotes,m=(0,i.useState)(""),h=(0,a.Z)(m,2),_=h[0],f=h[1],g=(0,i.useState)([]),x=(0,a.Z)(g,2),N=x[0],j=x[1],y=(0,i.useState)(!1),k=(0,a.Z)(y,2),b=k[0],w=(k[1],(0,i.useState)(!1)),C=(0,a.Z)(w,2),S=C[0],Z=C[1],I=(0,i.useState)(null),E=(0,a.Z)(I,2),D=E[0],M=E[1],B=(0,i.useState)(null),R=(0,a.Z)(B,2),O=R[0],U=R[1],z=(0,i.useState)(!1),G=(0,a.Z)(z,2),F=(G[0],G[1],(0,i.useState)([])),H=(0,a.Z)(F,2),Y=H[0],K=H[1],W=(0,i.useState)("playtime"),X=(0,a.Z)(W,2),V=X[0],Q=X[1],q=(0,i.useState)("alphabetical"),J=(0,a.Z)(q,2),$=J[0],ee=J[1],te=(0,i.useState)([]),ne=(0,a.Z)(te,2),se=ne[0],ae=ne[1],ie=(0,i.useState)("backlog"),re=(0,a.Z)(ie,2),oe=re[0],le=re[1],ce=((0,i.useRef)(),p()),ue=ce.anchorPoint,de=ce.showTitleMenu,me=[L,T,P];(0,i.useEffect)((function(){if(""!=_){var e=setTimeout((function(){var e=t.filter((function(e){return e.name.toLowerCase().includes(_.toLowerCase())}));j(e)}),250);return function(){return clearTimeout(e)}}j([])}),[_]),(0,i.useEffect)((function(){function e(){window.innerWidth<=600?Z(!0):Z(!1)}return window.innerWidth<=600&&Z(!0),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,i.useEffect)((function(){K("playtime"==V?(0,s.Z)(t).sort((function(e,t){return t[V]-e[V]})):"user_rating"==V?t.filter((function(e){return e.user_rating})).sort((function(e,t){return t.user_rating-e.user_rating})):t.filter((function(e){return e.achievements})).sort((function(e,t){return t.achievements-e.achievements})))}),[V,t]),(0,i.useEffect)((function(){ae("achievements"==$?(0,s.Z)(t).filter((function(e){return e.achievements})).sort((function(e,t){return t.achievements-e.achievements})):"playtime"==$?(0,s.Z)(t).filter((function(e){return e.playtime>0})).sort((function(e,t){return t.playtime-e.playtime})):"status"==$?(0,s.Z)(t).filter((function(e){return e.status==oe.toUpperCase()})):"rating"==$?(0,s.Z)(t).filter((function(e){return e.user_rating})).sort((function(e,t){return t.user_rating-e.user_rating})):"trophies"==$?(0,s.Z)(t).filter((function(e){return e.trophies})).sort((function(e,t){return e.trophies-t.trophies})):(0,s.Z)(t).sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})))}),[$,oe]);var he=function(e){M(e)},_e=function(e){var t;switch($){case"playtime":return Math.floor(e.playtime/60)>=1?(0,v.jsxs)("span",{className:"filter_stat",children:[Math.floor(e.playtime/60)," ",1==Math.floor(e.playtime/60)?"hour":"hours"]}):(0,v.jsxs)("span",{className:"filter_stat",children:[e.playtime," ",1==e.playtime?"minute":"minutes"]});case"rating":return(0,v.jsxs)("span",{className:"filter_stat rating_stat",children:[e.user_rating,"%"]});case"trophies":if(!e.trophies)break;var n=null===e||void 0===e||null===(t=e.trophies)||void 0===t?void 0:t.filter((function(e){return e.earned}));return(0,v.jsxs)("span",{className:"filter_stat",children:[Math.floor(n.length/e.trophies.length*100),"% earned"]})}};return(0,v.jsx)("div",{className:"user_collection__wrapper",children:(0,v.jsxs)("div",{className:"user_collection__container",style:{background:"#111"},children:[(0,v.jsxs)("div",{className:"user_collection__left",style:{height:b&&"250%",marginBottom:b&&"25px",display:S&&D&&"none"},children:[(0,v.jsxs)("div",{className:"user_collection__left_header",children:[(0,v.jsxs)("h2",{children:[(0,v.jsx)("img",{style:{height:"50px",width:"50px",borderRadius:"4px"},src:n.avatar}),n.name.trim(),"'s Collection",(0,v.jsx)(r.xng,{className:"user_collection__home_icon",onClick:o})]}),(0,v.jsxs)("div",{className:"user_collection__search",children:[(0,v.jsx)(r.Ozl,{className:"user_collection__search_icon"}),(0,v.jsx)("input",{className:"user_collection__search_input",value:_,onChange:function(e){return f(e.target.value)}})]})]}),(0,v.jsxs)("ul",{className:"user_collection__title_list",style:{height:b&&"100%",display:b&&"flex"},children:[(0,v.jsxs)("p",{className:"user_collection__total",style:{color:"white",paddingLeft:"7px",marginBottom:"5px",position:"fixed",top:"132px",left:"1px",fontSize:".95rem",width:"100%",height:"22px",background:"linear-gradient(to right, rgba(25,25,25,.5) 0%,rgba(17,17,17,1) 46%,rgba(1,1,1,1) 50%,rgba(10,10,10,1) 53%,rgba(78,78,78,1) 76%,rgba(56,56,56,1) 87%,rgba(27,27,27,1) 100%)",display:"flex",alignItems:"center"},children:[N.length<=0&&""==_?"All":"Results"," ","(",(0,v.jsx)("span",{style:{fontSize:".75rem"},children:""==_?t.length:N.length}),")"]}),""==_?t.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})).map((function(e){return(0,v.jsxs)("li",{className:"title_list__item",onClick:function(){return he(e)},onContextMenu:function(t){return function(e,t){e.preventDefault(),U(t)}(t,e)},style:{background:(null===D||void 0===D?void 0:D.id)==e.id&&"#9147ff",color:(null===D||void 0===D?void 0:D.id)==e.id&&"white"},children:[" ",(0,v.jsx)("img",{src:e.imageURL}),(0,v.jsx)("p",{children:e.name}),e.name==n.favorite_game&&(0,v.jsx)(r.QJe,{className:"list_item_favorite"}),de&&(0,v.jsxs)("ul",{onMouseEnter:function(e){return e.stopPropagation(!0)},className:"user_collection__game_context",style:{top:ue.y,left:ue.x,zIndex:6},children:[(0,v.jsx)("li",{className:"banner_context__item",children:"Add to Favorites"}),(0,v.jsx)("li",{className:"banner_context__item",onClick:function(e){return function(e){e.stopPropagation(),Object.keys(D).length>0&&O.id===D.id&&M(null),c(O),U(null)}(e)},children:"Delete Game"})]})]},e.id)})):N.length>0&&""!=_?N.map((function(e){return(0,v.jsxs)("li",{className:"title_list__item",onClick:function(){return he(e)},children:[" ",(0,v.jsx)("img",{src:e.imageURL}),(0,v.jsx)("p",{children:e.name})]},e.id)})):(0,v.jsx)("p",{style:{color:"white",fontSize:"3.2rem",position:"absolute",top:"44%",left:"16px"},children:"No Matches"}),(0,v.jsx)("div",{className:"user_collection__title_list_shadow"}),(0,v.jsx)("div",{className:"user_collection__title_list_shadow top_shadow"})]}),(0,v.jsx)("div",{className:"user_collection__actions",children:(0,v.jsx)("button",{className:"persona_font",onClick:o,children:"Back"})})]}),(0,v.jsxs)("div",{className:"user_collection__right",children:[null!==D&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(A,{game:D,activeProfile:n,closeStats:function(){return M(null)},setProfile:function(e){return l(e)},setCurrentGame:function(e){return M(e)},updateCollection:u,userNotes:d})}),!D&&(0,v.jsxs)(v.Fragment,{children:[!S&&(0,v.jsxs)("div",{className:"user_collection__spotlight_wrapper",children:[(0,v.jsxs)("div",{className:"spotlight_filters",children:[(0,v.jsxs)("h2",{className:"spotlight_filter",children:["playtime"==V?"Most Played":"user_rating"==V?"Highest Rated":"Most Achievements"," "]}),(0,v.jsxs)("ul",{className:"spotlight_filter__options",children:[(0,v.jsx)("li",{onClick:function(){return Q("playtime")},style:{color:"playtime"==V&&"white"},children:"Most Played"}),(0,v.jsx)("li",{onClick:function(){return Q("user_rating")},style:{color:"user_rating"==V&&"white"},children:"Highest Rated"}),(0,v.jsx)("li",{onClick:function(){return Q("achievements")},style:{color:"achievements"==V&&"white"},children:"Most Achievements"})]})]}),(0,v.jsx)("div",{className:"user_collection__spotlight",children:Y.slice(0,3).map((function(e,t){return(0,v.jsxs)("figure",{className:"spotlight_container",onClick:function(){return he(e)},children:[(0,v.jsx)("img",{className:"spotlight_image",src:e.banner_url||e.imageURL}),(0,v.jsxs)("div",{className:"spotlight_container__row",children:[(0,v.jsx)("img",{className:"spotlight_trophy_image",src:me[t]}),(0,v.jsx)("figcaption",{className:"spotlight_details",children:(0,v.jsxs)("p",{children:["playtime"==V?"".concat(Math.floor(e.playtime/60)," hours"):"user_rating"==V?e.user_rating+"%":"ACHIEVE"," "]})})]})]},e.id)}))})]}),(0,v.jsxs)("div",{className:"user_collection__list_container",children:[(0,v.jsxs)("div",{className:"user_collection__list_filters",children:[(0,v.jsx)("p",{style:{marginBottom:"2px",fontSize:"1.5rem"},children:"alphabetical"==$?"All Games":"achievements"==$?"Achievements":"playtime"==$?"Playtime":"rating"==$?"Rating":"status"==$?"Status":"Trophies"}),(0,v.jsxs)("ul",{className:"user_collection__list_filters__list",children:[(0,v.jsx)("li",{style:{color:"alphabetical"==$&&"white"},onClick:function(){return ee("alphabetical")},children:"All"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"achievements"==$&&"white"},onClick:function(){return ee("achievements")},children:"Achievements"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"playtime"==$&&"white"},onClick:function(){return ee("playtime")},children:"Playtime"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"rating"==$&&"white"},onClick:function(){return ee("rating")},children:"Rating"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"status"==$&&"white"},onClick:function(){ee("status"),le("backlog")},children:"Status"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"trophies"==$&&"white"},onClick:function(){return ee("trophies")},children:"Trophies"})]}),"status"==$&&(0,v.jsx)("div",{className:"user_collection__list_filters__list",style:{margin:"0"},children:(0,v.jsxs)("ul",{className:"user_collection__list_filters__list_status",style:{flexDirection:"row"},children:[(0,v.jsx)("li",{style:{color:"backlog"==oe&&"white"},onClick:function(){return le("backlog")},children:"Backlog"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"started"==oe&&"white"},onClick:function(){return le("started")},children:"Started"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"playing"==oe&&"white"},onClick:function(){return le("playing")},children:"Playing"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"finished"==oe&&"white"},onClick:function(){return le("finished")},children:"Finished"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"100%"==oe&&"white"},onClick:function(){return le("100%")},children:"100%"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"abandonded"==oe&&"white"},onClick:function(){return le("abandonded")},children:"Abandonded"}),(0,v.jsx)("span",{children:" | "}),(0,v.jsx)("li",{style:{color:"not owned"==oe&&"white"},onClick:function(){return le("not owned")},children:"Not Owned"})]})})]}),(0,v.jsx)("ul",{className:"user_collection__list",children:!S||S&&""==_?se.map((function(e){return(0,v.jsxs)("li",{className:"list_item",onClick:function(){return he(e)},children:[(0,v.jsxs)("div",{className:"user_collection__poster_container",children:[(0,v.jsx)("div",{className:"gradient"}),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"user_collection__poster_front",children:(0,v.jsx)("img",{loading:"lazy",className:"user_collection__poster",src:e.imageURL,alt:e.name})})})]}),_e(e)]},e.id)})):N.map((function(e){return(0,v.jsx)("li",{className:"list_item",onClick:function(){return he(e)},children:(0,v.jsxs)("div",{className:"user_collection__poster_container",children:[(0,v.jsx)("div",{className:"gradient"}),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"user_collection__poster_front",children:(0,v.jsx)("img",{loading:"lazy",className:"user_collection__poster",src:S?e.imageURL.replace("cover_big","1080p"):e.imageURL,alt:e.name})})})]})},e.id)}))})]})]})]})]})})}}}]);
//# sourceMappingURL=427.9d054d72.chunk.js.map