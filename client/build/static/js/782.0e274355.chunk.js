"use strict";(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[782],{6797:function(e,n,t){t.d(n,{Z:function(){return p}});var a=t(4165),r=t(5861),s=t(9439),i=t(2791),c=(t(9583),t(184)),l=function(e){var n=e.list,t=e.selectGame;return(0,c.jsx)("div",{className:"search_list_container",children:(0,c.jsx)("ul",{className:"search_list",children:n.slice(0,5).map((function(e){return(0,c.jsxs)("li",{className:"search_list_item",onClick:function(){return t(e)},children:[(0,c.jsx)("img",{className:"item_thumbnail",src:e.cover.url}),(0,c.jsx)("p",{className:"item_title",children:e.name})]})}))})})},o=t(4569),u=t.n(o),d=t(6856),f=t(4257),m=t(6355),p=function(e){var n="https://cybrary2022.onrender.com",t=e.currentProfile,o=t.isAdmin,p=(0,i.useState)(!1),_=(0,s.Z)(p,2),v=_[0],h=_[1],x=(0,i.useState)(!1),j=(0,s.Z)(x,2),g=j[0],N=j[1],k=(0,i.useState)(t.name),w=(0,s.Z)(k,2),C=w[0],b=w[1],S=(0,i.useRef)(""),Z=(0,i.useState)(t.favorite_game),y=(0,s.Z)(Z,2),E=y[0],F=y[1],P=(0,i.useState)(0),A=(0,s.Z)(P,2),L=A[0],R=A[1],G=(0,i.useState)(""),U=(0,s.Z)(G,2),M=U[0],I=U[1],T=(0,i.useState)([]),O=(0,s.Z)(T,2),z=O[0],B=O[1],D=(0,i.useRef)(""),X=(0,i.useState)(t.favorite_console),H=(0,s.Z)(X,2),J=H[0],W=H[1],Y=(0,i.useState)(""),K=(0,s.Z)(Y,2),Q=(K[0],K[1]),q=(0,i.useState)(t.avatar),V=(0,s.Z)(q,2),$=V[0],ee=V[1],ne=(0,i.useState)(null),te=(0,s.Z)(ne,2),ae=(te[0],te[1],(0,i.useRef)("")),re=(0,i.useState)(""),se=(0,s.Z)(re,2),ie=se[0],ce=se[1],le=(0,i.useState)(!1),oe=(0,s.Z)(le,2),ue=oe[0],de=oe[1],fe=(0,i.useState)(!1),me=(0,s.Z)(fe,2),pe=me[0],_e=me[1],ve=(0,i.useState)(!1),he=(0,s.Z)(ve,2),xe=he[0],je=he[1],ge=(0,i.useState)(t.color),Ne=(0,s.Z)(ge,2),ke=Ne[0],we=Ne[1],Ce=(0,i.useRef)(""),be=(0,i.useState)(!1),Se=(0,s.Z)(be,2),Ze=Se[0],ye=Se[1],Ee=(0,i.useState)(t.favorite_genre),Fe=(0,s.Z)(Ee,2),Pe=Fe[0],Ae=Fe[1];console.log("");(0,i.useEffect)((function(){if(""!=E&&E!=t.favorite_game&&!g){var s=setTimeout((function(){N(!0);var t=function(){var t=(0,r.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u().post("".concat(n,"/app/search_game"),{gameName:E,token:e.twitchToken});case 2:r=t.sent,B(r.data),N(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),500);return function(){return clearTimeout(s)}}B([])}),[E]),(0,i.useEffect)((function(){var e=function(e){27===e.keyCode&&je(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,i.useEffect)((function(){function e(e){Ce.current&&!Ce.current.contains(e.target)&&ye(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[Ce]);var Le=function(){var s=(0,r.Z)((0,a.Z)().mark((function r(){var s;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return h(!0),a.prev=1,a.next=4,u().delete("".concat(n,"/app/delete_profile"),{data:{email:e.userEmail,name:t.name}});case 4:s=a.sent,console.log(s),e.saveEdit(),e.viewAllProfiles(),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),console.log(a.t0);case 13:h(!1);case 14:case"end":return a.stop()}}),r,null,[[1,10]])})));return function(){return s.apply(this,arguments)}}(),Re=function(){var s=(0,r.Z)((0,a.Z)().mark((function r(s,i){var c,l,o;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(h(!0),(c=new FormData).append("email",e.userEmail),c.append("name",t.name),"file"!=i){a.next=19;break}return c.append("avatar",s.target.files[0]),a.prev=6,a.next=9,u().post("".concat(n,"/app/update_avatar_file"),c);case 9:a.sent,ee(URL.createObjectURL(s.target.files[0])),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(6),console.log(a.t0);case 16:h(!1),a.next=32;break;case 19:return l={email:e.userEmail,name:t.name,avatar:ie},a.prev=20,a.next=23,u().post("".concat(n,"/app/update_avatar_link"),l);case 23:o=a.sent,console.log(o.data),ee(ie),a.next=31;break;case 28:a.prev=28,a.t1=a.catch(20),console.log(a.t1);case 31:h(!1);case 32:case"end":return a.stop()}}),r,null,[[6,13],[20,28]])})));return function(e,n){return s.apply(this,arguments)}}(),Ge=function(){var s=(0,r.Z)((0,a.Z)().mark((function r(s){var i,c;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),h(!0),i={email:e.userEmail,originalName:t.name,newName:C.trim(),newColor:ke,favoriteGenre:Pe.trim(),favoriteGame:E.trim(),gameId:L,imageURL:M,favoriteConsole:J.trim(),twitchToken:e.twitchToken},a.prev=3,a.next=6,u().post("".concat(n,"/app/update_user_profile"),i);case 6:c=a.sent,localStorage.setItem("user",JSON.stringify(c.data.response.user)),Q(c.data.message),e.saveEdit(),e.viewAllProfiles(),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(3),Q(a.t0);case 16:h(!1);case 17:case"end":return a.stop()}}),r,null,[[3,13]])})));return function(e){return s.apply(this,arguments)}}();return v?(0,c.jsxs)("div",{className:"profile_edit__container",children:[(0,c.jsx)("div",{className:"profile_edit__header",children:(0,c.jsx)("h3",{children:"GAMEFLIX"})}),(0,c.jsx)("div",{className:"profile_edit__form_wrapper",children:(0,c.jsx)("div",{className:"profile__loading",children:(0,c.jsx)("div",{className:"profile__loading_spinner"})})})]}):(0,c.jsxs)("div",{className:"profile_edit__container",children:[(0,c.jsx)("div",{className:"profile_edit__header",children:(0,c.jsx)("h3",{children:"GAMEFLIX"})}),(0,c.jsxs)("div",{className:"profile_edit__form_wrapper",children:[(0,c.jsx)("h3",{children:!0!==t?"Edit Profile":"Create Profile"}),(0,c.jsxs)("div",{className:"form_container ".concat(pe&&"avatar_select_container"),children:[(0,c.jsxs)("div",{style:{paddingTop:pe&&"10px"},className:"form_avatar_container",children:[(0,c.jsx)("img",{className:"current_avatar ".concat(pe&&"avatar_select"),style:{backgroundColor:ke||t.color},src:$}),!pe&&(0,c.jsx)("span",{className:"current_avatar_edit",onClick:function(){return _e(!0)},children:(0,c.jsx)(d.zmo,{style:{height:"100%"}})})]}),(0,c.jsxs)("div",{className:"form_right",children:[!pe&&(0,c.jsxs)("form",{className:"profile_edit__form",children:[(0,c.jsx)("input",{className:"name_input",onChange:function(e){return b(e.target.value)},value:C,autoFocus:!0}),(0,c.jsx)("p",{children:"Color"}),(0,c.jsx)("input",{className:"color_input",style:{color:ke},onChange:function(e){return we(e.target.value)},value:ke}),(0,c.jsx)("button",{type:"button",onClick:function(){return je(!xe)},style:{backgroundColor:ke}}),xe&&(0,c.jsx)(f.xS,{color:ke,onChangeComplete:function(e){return we(e.hex)},className:"profile_color_palette"})]}),(0,c.jsxs)("div",{className:"form_personal ".concat(pe&&"personal_avatar"),children:[(0,c.jsx)("h4",{style:{textAlign:pe?"center":"left"},children:pe?"Current":"Your Playstyle"}),pe&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"upload_avatar_actions ".concat(ue&&"img_link_actions"),children:[(0,c.jsx)("input",{className:"upload_file_input",type:"file",accept:"image/*",style:{display:"none"},multiple:!1,ref:ae,onChange:function(e){return Re(e,"file")}}),!ue&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:function(){return ae.current.click()},children:"Upload"}),(0,c.jsx)("p",{children:"OR"})]}),(0,c.jsx)("button",{onClick:function(e){ue?Re(e,"link"):de(!0)},children:ue?"Submit":"Enter link"}),ue&&(0,c.jsx)("input",{className:"console_input ".concat(pe&&"img_input"),placeholder:"Enter link to image or gif",value:ie,onChange:function(e){return ce(e.target.value)}})]})}),!pe&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"form_personal_title",children:"Favorite Title"}),(0,c.jsx)("input",{ref:S,value:E,className:"title_input",onBlur:function(){z.length},onChange:function(e){S.current=E,F(e.target.value)}}),g&&(0,c.jsx)("div",{className:"profile__search_loading",children:(0,c.jsx)("div",{className:"profile__search_loading_spinner"})}),z.length>0&&""!==E&&(0,c.jsx)(l,{list:z,selectGame:function(e){var n;F(e.name),R(e.id),I("//images.igdb.com/igdb/image/upload/t_cover_big/".concat(null===(n=e.cover)||void 0===n?void 0:n.image_id,".jpg")),B([])}})]}),!pe&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"form_personal_console",children:"Favorite Console"}),(0,c.jsx)("input",{ref:S,value:J,onChange:function(e){D.current=J,W(e.target.value)},className:"console_input ".concat(pe&&"img_input"),placeholder:pe?"https://www.example.com":""})]}),(0,c.jsxs)("div",{className:"genre_dropdown",children:[!pe&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"form_personal_genre",children:"Favorite Genre"}),(0,c.jsxs)("button",{onClick:function(){return ye(!Ze)},children:[void 0!==Pe?"".concat(Pe):"Action"," ",(0,c.jsx)(m.iUH,{className:"genre_arrow"})]})]}),Ze&&(0,c.jsx)("div",{ref:Ce,className:"genre_dropdown_content",children:["Action","Adventure","Arcade","Card & Board","Family","Fighting","Indie","MMO (Massive Multiplayer)","Platformer","Puzzle","Racing","RPG","Shooter","Sports","Strategy"].map((function(e){return(0,c.jsx)("span",{onClick:function(){return function(e){Ae(e),ye(!1)}(e)},children:e},e)}))})]})]})]})]}),(0,c.jsxs)("div",{className:"form_actions",children:[!pe&&(0,c.jsx)("button",{className:"save_btn",onClick:Ge,children:"Save"}),(0,c.jsx)("button",{className:"cancel_btn",onClick:function(){pe?(_e(!1),de(!1)):e.viewAllProfiles()},children:pe?"Back":"Cancel"}),!o&&(0,c.jsx)("button",{className:"delete_profile_btn justify-start",onClick:Le,children:"Delete Profile"})]})]})]})}},6782:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var a=t(9439),r=t(2791),s=t(6475),i=t(6856),c=t(6797),l=t(4165),o=t(5861),u=t(4257),d=t(6355),f=t(4569),m=t.n(f),p=(t(9583),t(184)),_=function(e){var n=(0,r.useState)(!1),t=(0,a.Z)(n,2),i=t[0],c=t[1],f=(0,r.useState)(!1),_=(0,a.Z)(f,2),v=_[0],h=_[1],x=(0,r.useState)(""),j=(0,a.Z)(x,2),g=j[0],N=j[1],k=(0,r.useState)(""),w=(0,a.Z)(k,2),C=w[0],b=w[1],S=(0,r.useState)(!1),Z=(0,a.Z)(S,2),y=Z[0],E=Z[1],F=(0,r.useState)(null),P=(0,a.Z)(F,2),A=(P[0],P[1],(0,r.useState)("")),L=(0,a.Z)(A,2),R=L[0],G=L[1],U=(0,r.useState)(""),M=(0,a.Z)(U,2),I=M[0],T=M[1],O=(0,r.useState)(""),z=(0,a.Z)(O,2),B=z[0],D=z[1],X=(0,r.useState)(null),H=(0,a.Z)(X,2),J=H[0],W=H[1],Y=(0,r.useState)(!0),K=(0,a.Z)(Y,2),Q=K[0],q=K[1],V=(0,r.useState)(""),$=(0,a.Z)(V,2),ee=$[0],ne=$[1],te=(0,r.useState)(!1),ae=(0,a.Z)(te,2),re=ae[0],se=ae[1],ie=(0,r.useRef)(""),ce=(0,r.useRef)(""),le=(0,r.useState)(!1),oe=(0,a.Z)(le,2),ue=oe[0],de=oe[1],fe=(0,r.useState)(""),me=(0,a.Z)(fe,2),pe=me[0],_e=me[1];(0,r.useEffect)((function(){var e=function(e){27===e.keyCode&&h(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,r.useEffect)((function(){function e(e){ce.current&&!ce.current.contains(e.target)&&de(!1)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[ce]);var ve=function(e,n){"file"==n?W(URL.createObjectURL(e.target.files[0])):(se(!0),q(!1))},he=function(){var n=(0,o.Z)((0,l.Z)().mark((function n(t){var a,r;return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),c(!0),h(!1),""!=R.trim()){n.next=10;break}return E(!0),b("Please enter a valid name!"),c(!1),n.abrupt("return");case 10:if(""!=I.trim()){n.next=15;break}return E(!0),b("Please enter a valid game console!"),c(!1),n.abrupt("return");case 15:return a={email:e.userEmail,avatar:J,name:R.trim(),color:g,favoriteGenre:pe.trim(),favoriteGame:B.trim(),favoriteConsole:I.trim()},n.prev=16,n.next=19,m().post("".concat("https://cybrary2022.onrender.com","/app/create_new_profile"),a);case 19:r=n.sent,localStorage.setItem("user",JSON.stringify(r.data.response)),e.updateUser(),e.viewAllProfiles(),n.next=28;break;case 25:n.prev=25,n.t0=n.catch(16),console.log(n.t0);case 28:q(!0),c(!1);case 30:case"end":return n.stop()}}),n,null,[[16,25]])})));return function(e){return n.apply(this,arguments)}}();return i?(0,p.jsxs)("div",{className:"profile_edit__container",children:[(0,p.jsx)("div",{className:"profile_edit__header",children:(0,p.jsx)("h3",{children:"GAMEFLIX"})}),(0,p.jsx)("div",{className:"profile_edit__form_wrapper",children:(0,p.jsx)("div",{className:"profile__loading",children:(0,p.jsx)("div",{className:"profile__loading_spinner"})})})]}):(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"profile_edit__container",children:[(0,p.jsx)("div",{className:"profile_edit__header",children:(0,p.jsx)("h3",{children:"GAMEFLIX"})}),(0,p.jsxs)("div",{className:"profile_edit__form_wrapper",children:[(0,p.jsxs)("div",{className:"avatar_link_modal ".concat(0==re&&0==Q&&"modal_hidden"," ").concat(0==re&&1==Q&&"avatar_link_modal_launch"),children:[(0,p.jsx)("h3",{children:"Avatar Link"}),(0,p.jsxs)("div",{className:"modal_content",children:[(0,p.jsx)("p",{children:"Please enter the link to any image or gif below."}),(0,p.jsxs)("div",{className:"modal_form",children:[(0,p.jsx)("input",{value:ee,onChange:function(e){return ne(e.target.value)}}),(0,p.jsx)("button",{onClick:function(e){W(ee),se(!1)},children:"Submit"}),(0,p.jsx)("button",{onClick:function(){return se(!1)},children:"Back"})]})]})]}),(0,p.jsx)("h3",{children:"Create Profile"}),(0,p.jsxs)("div",{className:"form_container",children:[(0,p.jsxs)("div",{className:"form_avatar_container",children:[(0,p.jsx)("img",{style:{backgroundColor:""==g?"#FFF":g,objectFit:"cover"},className:"current_avatar",src:null==J?s:J}),(0,p.jsxs)("div",{className:"profile_avatar_actions",children:[(0,p.jsxs)("span",{className:"avatar_file_option",children:[(0,p.jsx)("input",{className:"upload_file_input",type:"file",accept:"image/*",style:{display:"none"},multiple:!1,ref:ie,onChange:function(e){return ve(e,"file")}}),(0,p.jsx)(d.Qvc,{onClick:function(e){return ie.current.click()}})]}),(0,p.jsx)("span",{className:"avatar_link_option",children:(0,p.jsx)(d.gjK,{onClick:function(e){return ve("link")}})})]})]}),(0,p.jsxs)("div",{className:"form_right",children:[(0,p.jsxs)("form",{className:"profile_edit__form",children:[(0,p.jsx)("input",{className:"name_input",placeholder:"Name",onChange:function(e){G(e.target.value),E(!1)},value:R,autoFocus:!0}),(0,p.jsx)("p",{children:"Color"}),(0,p.jsx)("input",{className:"color_input",style:{color:g,fontWeight:"500"},onChange:function(e){return N(e.target.value)},value:g}),(0,p.jsx)("button",{type:"button",onClick:function(){return h(!v)},style:{backgroundColor:g}}),v&&(0,p.jsx)(u.xS,{color:g,onChangeComplete:function(e){return N(e.hex)},className:"profile_color_palette"})]}),(0,p.jsxs)("div",{className:"form_personal",children:[(0,p.jsx)("h4",{children:"Your Playstyle"}),(0,p.jsx)("p",{className:"form_personal_console",children:"Favorite Console"}),(0,p.jsx)("input",{value:I,onChange:function(e){T(e.target.value)},className:"console_input"}),(0,p.jsx)("p",{className:"form_personal_title",children:"Favorite Title"}),(0,p.jsx)("input",{value:B,className:"title_input",onChange:function(e){D(e.target.value)}}),(0,p.jsxs)("div",{className:"genre_dropdown",children:[(0,p.jsx)("p",{className:"form_personal_genre",children:"Favorite Genre"}),(0,p.jsxs)("button",{onClick:function(){return de(!ue)},children:[""!==pe?"".concat(pe):"Action"," ",(0,p.jsx)(d.iUH,{className:"genre_arrow"})]}),ue&&(0,p.jsx)("div",{ref:ce,className:"genre_dropdown_content",children:["Action","Adventure","Arcade","Card & Board","Family","Fighting","Indie","MMO (Massive Multiplayer)","Platformer","Puzzle","Racing","RPG","Shooter","Sports","Strategy"].map((function(e){return(0,p.jsx)("span",{onClick:function(){return function(e){_e(e),de(!1)}(e)},children:e},e)}))})]})]})]})]}),(0,p.jsxs)("div",{className:"form_actions",children:[(0,p.jsx)("button",{className:"save_btn",onClick:he,children:"Save"}),(0,p.jsx)("button",{className:"cancel_btn",onClick:e.viewAllProfiles,children:"Cancel"})]}),y&&(0,p.jsx)("p",{className:"create_profile_error",children:C})]})]})})},v=function(e){var n=(0,r.useState)(!1),t=(0,a.Z)(n,2),l=t[0],o=t[1],u=(0,r.useState)(null),d=(0,a.Z)(u,2),f=d[0],m=d[1],v=(0,r.useState)(null),h=(0,a.Z)(v,2),x=h[0],j=h[1],g=function(n){l?m(n):function(n){localStorage.setItem("profile",n.name),e.selectProfile(n)}(n)};if((0,r.useEffect)((function(){j(e.currentUser.profiles)}),[e.currentUser]),null!=x)return console.log(x),null!==f&&"new"!==f?(0,p.jsx)(c.Z,{saveEdit:e.saveEdit,currentProfile:f,viewAllProfiles:function(){return m(null)},userEmail:e.currentUser.email,getProfile:function(e){return console.log(e)},twitchToken:e.twitchToken}):null!==f&&"new"==f?(0,p.jsx)(_,{updateUser:function(){e.updatingUser()},userEmail:e.currentUser.email,viewAllProfiles:function(){return m(null)}}):(x.sort((function(e,n){return e.isAdmin?-1:n.isAdmin?1:0})),(0,p.jsxs)("div",{className:"profile__page",children:[(0,p.jsx)("div",{className:"profile_edit__header",children:(0,p.jsx)("h3",{children:"GAMEFLIX"})}),(0,p.jsxs)("div",{className:"profile__container",children:[(0,p.jsx)("h3",{children:"Who's gaming?"}),(0,p.jsx)("ul",{className:"profile__list",children:x.map((function(e){return(0,p.jsxs)("li",{className:"profile__user",onClick:function(){return g(e)},children:[(0,p.jsx)("img",{className:"profile__user_avatar ".concat(l&&"editing"),style:{backgroundColor:e.color},src:e.avatar?"".concat(e.avatar):s}),l&&(0,p.jsx)(i.zmo,{className:"edit-icon"}),(0,p.jsx)("span",{className:"profile__user_name",children:e.name})]},e.name)}))}),(0,p.jsxs)("div",{className:"profile__actions",children:[(0,p.jsx)("button",{className:"profile__manage_btn ".concat(l&&"edit_btn"),onClick:function(){return o(!l)},children:l?"Done":"Manage Profiles"}),x.length<5&&(0,p.jsx)("button",{className:"profile__new_btn",onClick:function(){return m("new")},children:"New Profile"})]})]})]}))}},9583:function(){},6475:function(e,n,t){e.exports=t.p+"static/media/basic_avatar.9eeabb71d2fe70b7ff75.png"}}]);
//# sourceMappingURL=782.0e274355.chunk.js.map