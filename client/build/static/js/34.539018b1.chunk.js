(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[34],{1679:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $}});var r=n(9439),a=n(2791),s=n(3433),i=n(4165),o=n(5861),c=n(4569),l=n.n(c),u=n(184),d=function(e){var t=e.delay;return(0,u.jsx)("div",{className:"placeholder",style:{animationDelay:"".concat(t,"ms")},onClick:function(e){return e.stopPropagation()}})},m=n(6355),f=n(458),g=n(3676),p=n(1784),h=n(3224),v=n(1879),w=(0,a.lazy)((function(){return Promise.resolve().then(n.bind(n,276))}));var A=function(e){e.activeProfile;var t=e.spotifyToken,n=e.genreDetails,c=e.playTrack,A=e.currentTrack,j=e.setGameDetails,x=e.resumePlayback,b=e.pausePlayback,y=e.isPlaying,_=e.currentGameOpen,k=e.closeGameWindow,N=e.openGame,S=e.addGame,C=e.setNotification,Z=e.loading,I=e.hoverGame,E=e.hoverAway,M=e.currentHover,D=(0,a.useState)(null),T=(0,r.Z)(D,2),G=T[0],P=T[1],F="https://cybrary2022.onrender.com",R=(0,a.useState)([]),U=(0,r.Z)(R,2),O=U[0],Q=U[1],L=(0,a.useState)(!1),B=(0,r.Z)(L,2),z=B[0],H=B[1],X=(0,a.useState)(!1),J=(0,r.Z)(X,2),W=J[0],Y=J[1],V=(0,a.useState)(!1),K=(0,r.Z)(V,2),q=K[0],$=K[1],ee=n[0][0],te=n[0][1],ne=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return P(null),C("ERROR","Please connect to Spotify through the nav dropdown!"),e.abrupt("return");case 4:return e.prev=4,$(!0),e.next=8,l().get("".concat(F,"/app/spotify_album"),{params:{game:n.name,token:t,baseURL:F}});case 8:if("OK"===(r=e.sent).data.status){e.next=14;break}console.log(r.data),$(!1),e.next=19;break;case 14:return P(n.id),Q(r.data.tracks),H(!0),$(!1),e.abrupt("return",r.data.tracks);case 19:e.next=27;break;case 21:return e.prev=21,e.t0=e.catch(4),console.log(e.t0),console.log("OST FETCH ISSUE"),$(!1),e.abrupt("return");case 27:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(t){return e.apply(this,arguments)}}(),re=function(e,t){e.stopPropagation(),S(t)},ae=function(e){if(!e||!e.age_ratings)return(0,u.jsx)("img",{className:"row__poster__esrb_img",src:v});var t=null===e||void 0===e?void 0:e.age_ratings.filter((function(e){return 1==e.category||2==e.category}));if(0==t.length||!e.age_ratings)return(0,u.jsx)("img",{className:"row__poster__esrb_img",src:v});switch(t[0].rating){case 1:case 2:case 8:case 9:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb E rating",src:g});case 3:case 4:case 10:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb T rating",src:p});case 5:case 11:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb M rating",src:h});default:return(0,u.jsx)("img",{className:"row__poster__esrb_img",alt:"esrb RP rating",src:v})}};return(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("h2",{className:"row__title",children:ee}),(0,u.jsxs)("div",{className:"row__posters",children:[te.map((function(e){var t,n;return void 0!==e.cover&&(0,u.jsx)(a.Fragment,{children:!Z&&(0,u.jsxs)("div",{className:"row__poster_wrapper ".concat(_==e.id&&"viewing_game"),style:{zIndex:_!==e.id&&null!==_&&"-1"},onMouseOver:function(){return I(e.id)},onMouseLeave:function(){return z?I(e.id):E()},children:[M==e.id&&!_&&(0,u.jsxs)("div",{className:"row__blur_wrapper",children:[q?(0,u.jsxs)("div",{className:"playlist_loading",children:[(0,u.jsx)("div",{className:"playlist_loading_dot"}),(0,u.jsx)("div",{className:"playlist_loading_dot"}),(0,u.jsx)("div",{className:"playlist_loading_dot"})]}):(0,u.jsxs)("div",{className:"row__blur_details",style:{display:G==e.id&&"none"},children:[(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(t){return re(t,e)},children:[(0,u.jsx)(m.ymq,{className:"blur_item_icon"}),(0,u.jsx)("p",{children:"Add"})]}),(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){!function(e){k(),j(e)}(e)},children:[(0,u.jsx)(f.QEt,{className:"blur_item_icon more"}),(0,u.jsx)("p",{children:"See Details"})]}),(0,u.jsxs)("div",{onClick:function(t){return function(e,t){e.stopPropagation(),k(),P(t.id),ne(t)}(t,e)},className:"row__blur_item",children:[(0,u.jsx)(m.HcQ,{className:"blur_item_icon music"}),(0,u.jsx)("p",{children:"Play Soundtrack"})]}),(0,u.jsxs)("div",{className:"row__blur_item",onClick:function(){return N(e)},children:[(0,u.jsx)(m.iVx,{className:"blur_item_icon"}),(0,u.jsx)("p",{children:"View Case"})]})]}),z&&G==e.id&&(0,u.jsxs)("div",{className:"soundtrack_container",children:[(0,u.jsx)("span",{onClick:function(e){return function(e){e.stopPropagation(),P(null),H(!1)}(e)},children:"\u2190"}),(0,u.jsx)("h3",{children:"Spotify OST"}),(0,u.jsx)("ul",{className:"soundtracks",children:null===O||void 0===O?void 0:O.map((function(e){return(0,u.jsxs)("li",{onClick:function(e){return e.stopPropagation()},className:"soundtrack",children:[(0,u.jsx)("p",{style:{color:null!==A&&A.name==e.name?"green":"white",fontWeight:null!==A&&A.name==e.name?"600":"400"},children:(t=e.name,t.split("-")[0].split("(")[0])}),null!==A&&A.name!==e.name||!y?(0,u.jsx)(m.gmG,{onClick:function(t){return function(e,t){e.stopPropagation(),null!==A&&t.name==A.name&&x(),c(t)}(t,e)}}):(0,u.jsx)(m.Wh,{onClick:function(e){return b()}})]},e.id);var t}))})]})]}),(0,u.jsx)("div",{className:"row__poster_container",children:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"row__poster_front",style:{transformStyle:_&&"revert"},children:(0,u.jsx)("img",{loading:"lazy",className:"row__poster",src:"https://images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(t=e.cover)||void 0===t?void 0:t.image_id,".jpg"),alt:e.name+" cover image"})})})}),_===e.id&&(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:(0,u.jsx)(w,{game:e,gameCover:"https://images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(null===(n=e.cover)||void 0===n?void 0:n.image_id,".jpg"),ratingImage:ae(e),addGame:re,viewingPreview:W,openGame:function(){return Y(!0)},closeGame:function(){return Y(!1)}})})]})},e.id)})),Z&&(0,u.jsx)("div",{className:"row__loading_container",children:(0,s.Z)(Array(10)).map((function(e,t){return(0,u.jsx)("div",{className:"row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))})]})]})},j=n(7692),x=function(){var e=(0,a.useState)(!1),t=(0,r.Z)(e,2),n=t[0],s=t[1],c=(0,a.useState)([]),u=(0,r.Z)(c,2),d=u[0],m=u[1],f=(0,a.useState)(""),g=(0,r.Z)(f,2),p=g[0],h=g[1],v=(0,a.useState)(""),w=(0,r.Z)(v,2),A=w[0],j=w[1],x=(0,a.useState)(null),b=(0,r.Z)(x,2),y=b[0],_=b[1],k=localStorage.getItem("twitch_auth"),N=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,l().post("".concat("https://cybrary2022.onrender.com","/app/search_game"),{token:k,gameName:""});case 4:return t=e.sent,e.next=7,t.data.sort((function(e,t){return t.rating-e.rating}));case 7:n=e.sent,r=n[Math.floor(Math.random()*t.data.length-1)],m(n),h(r),a=r.videos.find((function(e){return e.name.includes("Trailer")})),j("https://www.youtube.com/watch?v=".concat(a.video_id)),s(!1),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),_(e.t0),s(!1);case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){!k||d.length>0||N()}),[k]),(0,a.useEffect)((function(){y&&N()}),[y]);return{isLoading:n,serverError:y,currentGame:p,currentGameTrailer:A,displayNewBanner:function(){var e=d[Math.floor(Math.random()*d.length-1)],t=e.videos.find((function(e){return e.name.includes("Trailer")}));h(e),j("https://www.youtube.com/watch?v=".concat(t.video_id))}}},b=n(3134),y=n.n(b);var _=function(e){var t,n,s,i,o,c=e.setGameDetails,l=e.addGame,d=e.activeProfile,m=x(),f=(0,a.useRef)(),g=d.collection&&d.collection.some((function(e){return(null===e||void 0===e?void 0:e.id)===m.currentGame.id})),p=(0,a.useState)(!0),h=(0,r.Z)(p,2),v=h[0],w=h[1],A=(0,a.useState)(!0),b=(0,r.Z)(A,2),_=b[0],k=b[1],N=(0,a.useState)(!1),S=(0,r.Z)(N,2),C=S[0],Z=S[1];return(0,a.useEffect)((function(){if(!m.isLoading&&f){var e=new IntersectionObserver((function(e){(0,r.Z)(e,1)[0].isIntersecting?k(!0):k(!1)}),{root:null,rootMargin:"0px",threshold:.1});f.current&&e.observe(f.current)}}),[f,m.isLoading,m.currentGameTrailer]),(0,a.useEffect)((function(){k(!0)}),[m.currentGameTrailer]),m.isLoading?(0,u.jsx)("div",{className:"banner__loading",children:(0,u.jsx)("div",{className:"banner__spinner"})}):(0,u.jsx)("header",{className:"banner",children:(0,u.jsxs)("div",{ref:f,style:{width:"100%",height:"100%"},children:[m.currentGameTrailer&&(0,u.jsx)(y(),{className:"banner__trailer",url:m.currentGameTrailer,playing:!!_,muted:!!v,onEnded:function(){return Z(!0)},light:!!C&&"//images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(null===(t=m.currentGame.cover)||void 0===t?void 0:t.image_id,".jpg")}),(0,u.jsxs)("div",{className:"banner__contents",children:[(0,u.jsx)("h1",{className:"banner__title",children:null===(n=m.currentGame)||void 0===n?void 0:n.name}),(0,u.jsxs)("div",{className:"banner__buttons",children:[(0,u.jsx)("button",{className:"banner__button",onClick:function(){return c(m.currentGame)},children:"See Details"}),!g&&(0,u.jsx)("button",{className:"banner__button",onClick:function(){return l(m.currentGame)},children:"Add to My List"})]}),(0,u.jsx)("h1",{className:"banner__description",children:(i=null===(s=m.currentGame)||void 0===s?void 0:s.summary,o=150,(null===i||void 0===i?void 0:i.length)>o?i.substr(0,o-1)+"...":i)})]}),(0,u.jsx)("div",{className:"banner--fadeBottom"}),(0,u.jsx)(j.t5J,{size:35,className:"banner__refresh_icon",onClick:m.displayNewBanner}),v?(0,u.jsx)(j.j6J,{size:27,className:"banner__mute_btn",onClick:function(){return w(!1)}}):(0,u.jsx)(j.jZ7,{size:27,className:"banner__volume_btn",onClick:function(){return w(!0)}})]})},m.currentGame.id)},k=n(6475),N=n(7762),S=n(1087),C=n(71),Z=n(6856),I="https://accounts.spotify.com/authorize?client_id=".concat("05e6f02e47724a63b635cfdac09fc991","&response_type=code&redirect_uri=").concat("https://cybrary2022.onrender.com","&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state"),E=function(e){var t="https://cybrary2022.onrender.com",n=e.allProfiles;(0,a.useEffect)((function(){var t=function(t){27===t.keyCode&&e.closeNavDropdown()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]);var r=function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var r,a,s,o,c;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l().get("".concat(t,"/playstation/user_titles"));case 3:r=n.sent,console.log(r.data),a=(0,N.Z)(r.data);try{for(a.s();!(s=a.n()).done;)for(o=s.value,c=0;c<o.earnedTrophies.length;c++)o.earnedTrophies[c].earned?o.allTrophies[c].earned=!0:o.allTrophies[c].earned=!1}catch(i){a.e(i)}finally{a.f()}e.currentCollection.filter((function(n){var a=r.data.some((function(r){n.name.toLowerCase()===r.name.toLowerCase()?(n.trophies=r.allTrophies,l().put("".concat(t,"/app/update_game_trophies"),{email:localStorage.getItem("user"),name:e.activeProfile.name,gameId:n.id,trophies:r.allTrophies})):(console.log("New game bruh"),l().post("".concat(t,"/app/update_collection"),{email:localStorage.getItem("user"),currentProfile:localStorage.getItem("profile"),name:r.name,id:r.id,imageURL:"//images.igdb.com/igdb/image/upload/t_1080p_2x/".concat(r.cover.image_id,".jpg"),playtime:0,origin:"gameflix"}))}));return a})),n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),console.log(n.t0),n.abrupt("return",n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}();return n.sort((function(e,t){return e.name-t.name?1:-1})),(0,u.jsxs)("div",{className:"dropdown",children:[(0,u.jsx)(m.h3_,{className:"dropdown__arrow"}),(0,u.jsx)("div",{className:"dropdown__profiles",children:(0,u.jsxs)("ul",{className:"dropdown__profiles_list",children:[n.map((function(t){if(t.name!==e.activeProfile.name)return(0,u.jsxs)("li",{className:"dropdown__profiles_item",onClick:function(){return function(t){e.changeProfile(t)}(t)},children:[(0,u.jsx)("img",{src:t.avatar,className:"dropdown__profile_icon",alt:"".concat(t.name," avatar icon"),style:{backgroundColor:t.color}}),(0,u.jsx)("p",{className:"dropdown__profile_name",children:t.name})]},t.name)})),(0,u.jsxs)("li",{className:"dropdown__profiles_item",onClick:e.toProfilePage,children:[(0,u.jsx)("span",{className:"dropdown__profiles_manage",children:(0,u.jsx)(Z.zmo,{size:22})}),(0,u.jsx)("p",{className:"dropdown__profile_name",children:"Manage Profiles"})]})]})}),(0,u.jsxs)("div",{className:"dropdown__settings",children:[(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:function(){return e.editProfile()},children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.dfI,{size:18})}),(0,u.jsx)("p",{children:"My Profile"})]}),(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:function(){return e.viewCollection()},children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.iVx,{size:18})}),(0,u.jsx)("p",{children:"My Collection"})]}),(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:e.editAccount,children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(C.Fuo,{size:18})}),(0,u.jsx)("p",{children:"Account Settings"})]})]}),(0,u.jsxs)("div",{className:"dropdown__settings",children:[(0,u.jsxs)("div",{className:"dropdown__settings_item",onClick:r,children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.To8,{size:18})}),(0,u.jsx)("p",{children:"Link Playstation"})]}),(0,u.jsxs)("a",{href:I,className:"dropdown__settings_item",children:[(0,u.jsx)("span",{className:"dropdown__settings_item_icon",children:(0,u.jsx)(m.l4C,{size:18,style:{color:e.spotifyToken?"#1DB954":"#FFF"}})}),(0,u.jsx)("p",{children:"Spotify Authentication"})]}),(0,u.jsx)("div",{className:"dropdown__settings_item",style:{alignItems:"center",justifyContent:"center",paddingBottom:"0",paddingLeft:"0"},children:(0,u.jsx)(S.rU,{to:"http://localhost:3001/api/auth/steam",children:(0,u.jsx)("img",{className:"steam_btn",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAAjCAYAAAA9riDJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDYzM0ZCMEQ5RDI2MTFFNTk0MTg5ODM2QkQ2QjAwMjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDYzM0ZCMEU5RDI2MTFFNTk0MTg5ODM2QkQ2QjAwMjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNjMzRkIwQjlEMjYxMUU1OTQxODk4MzZCRDZCMDAyMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowNjMzRkIwQzlEMjYxMUU1OTQxODk4MzZCRDZCMDAyMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlFT8bgAABY3SURBVHja7JwJtM3VF8fP4xUNlBJNeileIVTGIo2eeYrQHEqjSv1FhTTqT6VVqJBoQJH80fTQrFlU0iDl0aCSBkkq+Z/P7u7f2u/43fte3n1vZa131vqte+/vd8Y9fPfe5+zfzdi8ebOjbNmyJcd/cGW5RPH3XFyJu1/Uutt6r7jqpKNNUX6XVNviflac9RLf8/yVW69evVx+ZCLQ/sF58+bN6//+++9n//HHH2VdaSkt20nJzMzcvP/++7f9/fffRzVs2HB85p9//pmTm5vbf/HixbVKyVO8BUTh+uuvv/J9ZmRkyFWmTBn5tHXtpUXr2PpxbbSuXmXLlo2+x83H1qXvwvSZbL7hXO2nnXNRiwfksitWrKjlBbq/v/JEoN99991sFlVaileYsYae3s4T3nlLKN+hO8KDsO2www4gjjBc62odKyjU56Iu7fjOM+rSLmF1IwGiHn3vuOOO8l2FVcdgLoxh6+o8tF+9KIzJc9sX7W1ftNN5quKpUum9dJbVq1dnH3zwwTkIdJYncKmbUQLCjCBv3LgxumC+Mr5cuXJyIXQwHeHYtGmT++2336SeCqkKBUKn9WmvikKbsC51ypcv73beeWf5RBB5Tt1ff/1V5kJ7+gnr0Rf1qMMnwsrYO+20k9ThO4U52nVReMbFHFSQVVnUWqSr+HmV9evPylQESCfz4sxsnIksbH86v9DMFaZdiGrpLoxh5xe3Rp4jbBs2bHC//PKLq1GjhuvcubOrXbu2CCVCu3LlSvfqq6+6N998U+odfvjhrm3btiJcio66FkVHBOzpp5+WdtWqVXOnnXaaq1Spkghh6D6sXbvWTZgwIRI2+mMc5tajRw/n/U+Zw6OPPup++OGHfOiM0NM/9bj32GOPuY8//tjttttu0ZwQ5J9++skdeeSRrkuXLiLsI0eOdN9//707/vjj3R577OG+/fZb5+O0iC7p5gc0TptAW5OjOyfKXBZtzVRhhdqaO/rX9vSVSrhUmLWtIhpIlU5UYBx1H1gz/SsCBX5eJNC1atVygwcPlvs//vijMJw2CLkPbtw333zjPvjgA5lzxYoVBQlZC9/pl++0g7YINPVQCOaSlZUlgqOoa0291lG3gfmgXPvuu69r166d3Ktatarz7qebN29ehLzMnb4oBx54oKzx5JNPdldffXXk6lDoi7rHHHOMO+igg6Ix9tlnH/fzzz/L/GmrLlFxgAv0yLQCWFTGsnCIeeihhwrzvvrqKyFm9+7d3dKlS93nn38ui7JFiWJ9PvUpYR6ThFF16tRxs2bNyicwtq4uiEvXBPOuv/56QZ3PPvvM7brrrlFdHTMMaiyyhdbG1lXlYc0wkDUyFojKpSZW0VDp06lTJ7n33XffuYsvvliQjvV17NhR5o1AscZly5YJwtEGdB0yZIirV6+e+/LLL92VV14pSMw4CIsqjALTww8/7ObOnet22WWXyIWgT+rwm3HgE7QCmRUMWF+TJk3cK6+8Is+Zv/KAtkoPlI9277zzTkQb5tGoUSPXoEGDfIqcl5cnSuMDtwjR6dP6+WlFaPXjihhpCgIw4bvuukuYBTFh1h133OH2228/EW7MjfplZtslX9CDIEB0TLEKKahDH5g09cni6sIEytixYwVFqFOzZk1hDEiIYKlCWSuiQqf+rPXvLKKrkNNWgx8EjvqMwxjQgefMS/1hq7B2fPVZv/76a/fII4+4ChUqCN2gCf2D1qwZgV6/fn1ED1wDEBF6qytlrSxCxMV9lJg+QUj6V5RmntzLyckRuuHqoJj169eXtSxevFhozZptQEiB3rgfr732mgiy0uaEE07IZz25x7xRUlwWhFr7THV2UWSELqrLoQxu1qyZCPMpp5wipvKwww4TwsEYiICpbNGihWvZsqUgJs+vuOIKd+mll7o1a9Y4H6XKYkEYBAXm06+PYMWU0R50iquLEMCYESNGyNgoUp8+fWR+MKpVq1bC5AcffFCQrnnz5lIfSzJjxgx35plnihUAGSdOnOiOOOIId8YZZ7hBgwZJ/dNPP12+I0QdOnRwe+21lwgVirpq1SoZByVini+++KIw2yK9BmiY80MOOcTtvffebtKkSe7ZZ58V6wWz6QsBV0VnHayfT6tg/AZ1+VQltAX67r777iLI0J0+58+fHymuBpv46YAF448ePVrWeMABB7imTZu6RYsWRXS1AMR4KBnuB77xU089Jffh61FHHSX0pDC2rpn2+M8Ic7gdmG6ELqOmqiiXTgwTVLlyZffkk0+6AQMGiOBBOEwqxEebL7nkEkFuCA1jCUAgIsQBJbgHamjkDTFgHvcRoGR1dRvs9ddfl7lMnTo1UlSEHwYhcJhLmEQ72rz33nvCSBgybdo0EUgEmTrZ2dmiRDAC1GKubdq0EbPK+Jhd1qUMBw0//fRTUQ4Yq7RVgUZBEawxY8YIaiFouCDXXnutGzZsmDv11FMjJdbtMbuFpkV3D3TbLIwLjjvuOKH/RRddJErN+pibxhXwhDbdunWT+lhOePLGG2/InBFM6Kxuia6PNvyeMmWK8A83SdfId+ovXLhQLIoNxMPtO+uypfNKG0IrSoBul112mZgeUKJu3boSeesCuI9wDh8+XFCuffv2Iow8J1KHUAgMddUPtr6W+nFxdTXggzEUkEPN3+zZs8Wn7Nu3b7RrQEGwmHevXr1E0KiHEGN2QS31DSGUujRYFcafPHmya926dT6kwTroujRYtLsg6lcTCzz33HOi6KqU1atXd2effba0e+aZZ/K5K8kOaOIOMigACgqsLg19oYzqK7MOEBblhv64SnynIIz4vOxWYDUQfutuwI+XXnpJQIU2BJTERig3NGddWLS42MO6GelG58iHtsFEUXY41LTDhFGjRslv0McGWfhlEHPgwIH5gkIN7tS0Wi22BFGkiqtrt7Mo+NwwyppvG4RSYDa/cUUQYuaOGcYdUmWoUqWK7EyoQILoIBiCyzM7P5TFBqxxSKRj4zcvX77c5ebmilW54YYbxM9ESNRMxwWmqU4FtSBUuDL0g+lnXnwi2Gr12BKkQBcQHOvFc4JNCutjbriQFlSgF34xYICbggWgDnwFEHimcYKlgeVncRVB6HQJNBMG3UCtW2+9VfxK9j0hpvpSuAz33nuv1FFfC6HSEyqCFnsKZk+l1KTrs7Cu9gFCI8i4HP37948CMQIgNddaYDLtcTX69esnbgRuEwEaSPXRRx8J6qifyFqmT58u21u6W8G42idzUmaqxVBB1l0X4gxQnp0EBJo67A7gy1JAUpAdkx7uvIT7t1ZB7HP4AB2sDw0dUSL6xr/GWjInlBffnXo8g06033PPPSWOYJ9bTzMtSr/99tvurbfekrkTDyxYsEAUk98hWJWEMFOwJiLQ6di2o7zwwguCDBBGdwsg3tChQ2VBEBgUQoAwWR9++KEIAXuaCADf2Z7S41cVUoSMQBP0YA+XvpPVRUvPP//8COHwE6lPMEcfOleidNCJZ9Dg5ptvljaqQIx1zTXXyFroZ/z48aJQCDNBLoEqQSQ+M75n165dZQysUM+ePUVA6Js+7Z4440IDfHV1ZeiX9bMlR0CpAhq6Kiok4dajVWoKPjzz0XrcR5hZD/VxB5kfMc4tt9zivvjiC2nP/KiLtSAwxHVCcEFgu6cN7YktAA0EmO+4SfTJs9Ci6s5QcbgZtuAepgWhLVLpMa4NAlSrFanxq4l6MVkQgPr2MMImx+gWWvg8rKuMDX3PZPvK9hRNj2YVDXVs5mVpw3eCXnxMXBT2t0EpRWaLYrp260NT7rvvPglAiS9ANkVl/NI5c+YIXbAE1hWjb5QInxahD9eoLgq+LDsQ9uBC+9DtNdriQuFmEQzyqTkeGvQRI+BOAUYoMH2i2IzPWqALSM5448aNE2SkLxSa52wrajCpfCsJlGaNGTNnzpzug4huxW0OFKX04EMVQIU5nSd4xZmPwdyVWQiSzb9ItXZtC/O5AJIw2Uf31C1NwhwNzc1QIdRgyPYbl/dh4wu1GgoUqoz25NMmTYVug92nD10eq8DKXz07KG4ee0sxI1MTTkpCIBRt1Oe0mWLFbY7SUVQA7J6wCnIqGoaJQmrFtI0KjrpPdq/WjmmDXxvcqmLpZ1wOi3VbwjlZPugcw/wZK7zW/bACnSp/piR4TECaNpejsCVEsu1FmEOh3pY12GyzZPnFNpAK3Zc4l8sqlvafLB85DiHD+4VB0rhTVAtaYd8lFRSKQJcUQpcWl1KwClKOOOGJiwm21XrGKUFhNwMKmmdx7TuHhV20Ekfo0lJaiquwFSwIbbOmUmlfaCLDev8EIeL2T7f3sq20KIj2hc3/DusXph+bcVjQvX86p5IuHO6IQIdv0tp9w3Bx6udZZ18jZrvlVZB5+yd+3rYKRNyhRHEKs7V0cTkWIT2TzcueKobbn8nqxx3CWFqH/cS9JxgHWmGwV9g5xdEmnOO2vPCRqkgylc1ztdtTJ554otvCJFicv35K7GOec8457sILL4yCECZKEgwb8Jy02UlagugYujCOWv0XN+Pxx7faFw4VKGRCHFKEa1ChsBF+nD+3LamMcbkJukfN4Q2niZw0hrsK4Q6AXZudB1t1jRs3ltwOaGvf3YtDTPhF/YYNGri7R4/Ot4XGMT39KM/CbbiTPJ/zVq2KcmDILSExiaxAFVyVCfqpWqWK+++IEVvtmiSLFezLFjofTic5zY0Dy4J4kQqg5KSQzeg4YejcqZNs8PMWxSeffCKb5Yu8a5Jds+bfZ+Zm6+jArCw5PpX0PXMgoMSzCd16sWHvEu+1tWvbVgT8vL59t8pFtsIYJobHIY4ykvTOyZMmuTa+b7uzYNHPEifMGwmRKu5VsnBMDhZq16oln5zMhUrE3MePG+dmPvGEnKzZ+duDGOjI6SG01tO7EIlDfnHYQ8KR0LNdO9fV07NX795RP8oz+8YP8+HUcIM31ZwiUsj428XzneP+8GCM+yRUSRJQop+4/8ywVlwV9ByvDJzaIsjIFQdJKF9BQBFaWpu5FxZ5g6dOnTrdvbDWDs3iE57oLJQj2vYdOsiR7CHZ2fKbhVzkNb5c+fJuyZIlrlHDhrLIVatXu2s9YXh7A+KC2MpICHxpv36SQ8BR6W4VK0r+AovlPugGsXj96JpEH+yp6jto9AMKkUhDAlHvXr3kOclCtCUX4+QuXVwFz0COnyeMHy/5CEcffbScwKk1aXnSSa6rJyx1YTZpnAj/1YMGRfMmz4IcbcZo3KSJ1CH/giN1juw3+Gj6c6/gjEudHr4dAkXeQ6eOHeVIn2P+U3v2lEw++nz55ZfdkMGDZQ38/tIDwFFNm8o4Tfy9JX4MTuRa5eS4S/xaeHUJpJz4wAORYFw/bJhE8pjWm2680c2ZO9f18ULb3PMEutEPloE+mZuO0yLgGXX1zXLmzRH3XE+jH/34gwYOdM8//7yr4gGnu7c2Sif4fLRHV04QSUKDLqSKsn7ACAUl07J3Yr2cNqqCVvZ8gKfQ5z8DBogFW5mXJyd78B4aVU/QHQQnffcIz+NatWu71q1auRpeIZGfOv436E7wF4fS69atW1ZGETp2XzQJzLNAjj2ZPALJArjHkTZCiRsBYuuJFBeTfn/pUhEOzBv1aQf6IwBrvebOmz9fcjWYx7O5udKGxHxNI0VYczyi8Jy+MMdoJbkgCCUE4V7zZs0kv4LyuJ+LRWYEhTG1LgTs2aPH3/OeMUMEACWAkfz+dPlySbQaOmSI5D584y9ySHRc8jme9szckkBQEnsqeGVFGH9ev95N930c26KFvMgwL5Fkz9yo29sLI+tkfjffdJOAAkLx2YoVojQWYP5KuH/kOrf3CIxS86obCgatsQqSlJSgJ0g4f8GCrXjWy7uMav7h6Tiv+CgI+czwjzL2nntE0JVOFydoyvhcjNemdWuhAYoOTUgEa9yokayX/I7LvFIp30hyIm/mtttvj1AWC8ZaSQOAznxefvnl+XiM4iEjJ/g1Aqgtjj1WwEPlKi7jsAyb0cn+TMSFf2iS+H3L8OHu7UWLohc4daFkW3HvfO86QEAr0C95hELLyJXVNhRyE8hTIEIl7ZHFZ/lFkCNMgUlRkJpoQz41mXBqCtFmTOSkyZOFobwXp89ne+Sx7goKjJltmeifnIRo3h6BISiMpB+YRL4FqZQ8Z1zWznfuMS7MwAKQo2HdC/Iz6tWtK2YWE4t7xfoozK2pnyOFdbJe1qnjCH19TBIGb0u85QGloCHzA72wQryF4xJjk2gEPbGuIK2WrXhmzDi7XPTJehYldrzWQyc/N6UTCqNjTPbjwS9BUs+vpzzyItj0zXr5RNF1HCwPZR9PSwsuh/k6JLThgvFJH0pD/HTuKQA8PnOm/KZfVZRQqJMKdEEBkvi5Fr0TgSOuRO8+fWTgs886K59vBDM7e9QDuc4yz6LgyH/HX1/tGbLMayZoMerOO6Pc6vDEzfrZMBG0ov0B1aqJ9qvygTRWMEBFXo/ijQ4tP/h59zn33L/n7X09EOj+CRPc0OuuEwuhqae8ns9FQeAYt0HiJVPMti2neV8U04hPujaRl239Psag8FIAb/Fc5U29CjHWgfWEO0BTp00TAa7srREuFRl1CKD0m6gn/rGhZ0YMz6xfSluUHsHkTZw5s2fLffKcLZ1UIjIS63jBIyZrxL3DLSTGYp1XXXWVCCNv4ajCLPTux/fr1omVQhBRxGbeCtKGJC3q8LnSWxAX869QgCNrqesFnhcvmDsW2cZDkUDjk8UJtHUzwm0ayS0w2XAJirvD69d3E++/X5LHBTVMwZ+c5TURU0i+cYZhAGhDSuUYHyTcfffdooWLPHPbtmkjiwj/j8PmU/Cd4AL/ceqUKeKrwnhQByI+/NBDEqhpwT0gQHlg4kQRSOZK5hwCzHfQh9/4oSM9Y3AJmC/3L/AIfsEFF8jaQEGyBYn6F3hXAj81oleCiQjIQm+yN3o0o2/Wutj7ospsrNZov17eYQSx6XOmRyIYXzWRiRf+lRfresvHJi/7flkfLpwEzoaen3iXDnrSt4vhWZgViC8MX371rscr/jt94O9aOhG4W5qTJoxy4Svzm/RaUPt/s2aJX4yi20DutpEjJa6AViA7Pvh9PkDGkrAePsncs+vQefI2DP2SxkrKKvIxdsyYWITOqFGjxnSvNd1S7YWmij5THZjYHQs1EXG5AHGRexjRhttetl6c/2/nYreqrKlKld8Qbu0lO2ZOVi8OHMLnocCG+9k2eSjkSUGHJckOwkKAsi8ghLst4QsEcXMNd4Fs0pM9q7C7XMm26KxcaBsAElQeedtt+f5xCVeQVFs7Hx8jzMj0WpXnNWdz3L+OqiAlE+iCTgBDIhZ0oBC3x2yFwG6DpcpqS/bqUkjoVHvMcSeZcVt5yU7WUp2uFZQDYXOZw33acKssVZ/J5hUKZBxv4g7JkvGtIGBSUIkT6IJOJtkN+cW7bmEKKtbMjuufoZF5GZUqVcrxDv+d/mbpv4+Wln9VGkF4Cp3qUGXTpk0frlmz5nJQeYX3o38vV65cDQ/pe/hOypSSs7T8W0rcaWrwfPPGjRs/9og9ysvu9AxjxuUf/P33rFIylpbtqMg/+Hu5lX/w/78AAwANdeAVO7K2TAAAAABJRU5ErkJggg=="})})})]}),(0,u.jsx)("div",{className:"dropdown__settings_links",children:(0,u.jsx)(S.rU,{to:"/login",className:"dropdown__settings_link",onClick:e.logoutHandler,children:"Sign out of GameFlix"})})]})},M=n(6797),D=n(8820),T=function(e){var t=e.closeAccountSettings,n=e.setLoggedUser,s=e.currentUser,c="https://cybrary2022.onrender.com",d=(0,a.useState)(!1),m=(0,r.Z)(d,2),f=m[0],g=m[1],p=(0,a.useState)(""),h=(0,r.Z)(p,2),v=h[0],w=h[1],A=(0,a.useState)(s.email),j=(0,r.Z)(A,2),x=j[0],b=j[1],y=(0,a.useState)(""),_=(0,r.Z)(y,2),k=_[0],N=_[1],S=(0,a.useState)(!1),C=(0,r.Z)(S,2),Z=C[0],I=C[1],E=(0,a.useState)(s.password),M=(0,r.Z)(E,2),T=M[0],G=M[1],P=(0,a.useState)(!0),F=(0,r.Z)(P,2),R=F[0],U=F[1],O=(0,a.useState)(""),Q=(0,r.Z)(O,2),L=Q[0],B=Q[1],z=(0,a.useState)(!1),H=(0,r.Z)(z,2),X=H[0],J=H[1];(0,a.useEffect)((function(){if(R){var e=s.password.replace(/./gi,"*");G(e)}else G(s.password)}),[R]);var W=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(""),e.prev=1,e.next=4,l().post("".concat(c,"/app/update_user_email"),{originalEmail:s.email,newEmail:t});case 4:(r=e.sent).data.status<400?(n(r.data.user),w({type:"success",message:r.data.message}),b(r.data.user.email),N(""),I(!1)):(w({type:"error",message:r.data.message}),N("")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().delete("".concat(c,"/app/delete_account"),{data:{id:s._id}});case 3:window.location="/",localStorage.removeItem("user"),localStorage.removeItem("profile"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:"profile_edit__container",children:[(0,u.jsx)("div",{className:"profile_edit__header",children:(0,u.jsx)("h3",{children:"GAMEFLIX"})}),(0,u.jsxs)("div",{className:"profile_edit__form_wrapper",style:{height:"350px"},children:[(0,u.jsx)("h3",{children:"Account Settings"}),(0,u.jsx)("div",{className:"form_container",children:(0,u.jsxs)("form",{className:"account_edit__form",children:[(0,u.jsxs)("div",{className:"account_email_container",children:["error"==v.type?(0,u.jsx)("p",{className:"account_email_error",children:v.message}):(0,u.jsx)("p",{className:"account_email_success",children:v.message}),(0,u.jsx)("h4",{style:{color:"white",fontSize:"2rem",marginLeft:"2px"},children:"Email"}),(0,u.jsx)("input",{className:"account_email_input",onChange:function(e){return b(e.target.value)},value:x}),Z&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{className:"account_email_input",onChange:function(e){return N(e.target.value)},value:k,placeholder:"Enter new email",autoFocus:!0}),(0,u.jsx)("button",{type:"button",onClick:function(){N(""),I(!1)},className:"account_email_save_btn",children:"Cancel"})]}),(0,u.jsx)("button",{type:"button",onClick:function(){Z?""!==k?W(k):(I(!1),N("")):(I(!0),J(!1))},className:"save_btn",children:Z?"Save Email":"Change Email"})]}),(0,u.jsxs)("div",{className:"account_password_container",children:[(0,u.jsx)("h4",{style:{color:"white",fontSize:"2rem",marginLeft:"2px"},children:"Password"}),(0,u.jsx)("input",{className:"account_password_input",onChange:function(e){return G(e.target.value)},value:T}),(0,u.jsx)("span",{className:"account_password_visible_icon",onClick:function(){return U(!R)},children:R?(0,u.jsx)(D.p3W,{}):(0,u.jsx)(D.w8I,{})}),X&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{className:"account_password_input",onChange:function(e){return B(e.target.value)},value:L,placeholder:"Enter new password",autoFocus:!0}),(0,u.jsx)("button",{type:"button",onClick:function(){B(""),J(!1)},className:"account_password_save_btn",children:"Cancel"})]}),(0,u.jsx)("button",{type:"button",onClick:function(){X?""!==L?k:(J(!1),B("")):(J(!0),I(!1))},className:"save_btn",children:X?"Save Password":"Change Password"})]})]})}),(0,u.jsxs)("div",{className:"form_actions",style:{justifyContent:"space-between"},children:[(0,u.jsx)("button",{className:"cancel_btn",onClick:t,children:"Back"}),(0,u.jsx)("button",{className:"delete_account_btn",onClick:function(){return g(!0)},children:"Delete Account"})]})]}),f&&(0,u.jsx)("div",{className:"delete_account_modal",children:(0,u.jsxs)("div",{className:"delete_account_modal_content",children:[(0,u.jsx)("h4",{children:"Are you sure you want to delete your account?"}),(0,u.jsxs)("div",{className:"delete_account_modal_actions",children:[(0,u.jsxs)("div",{className:"modal_action_option",children:[(0,u.jsx)("p",{children:"Yes"}),(0,u.jsx)("span",{className:"video-game-button",onClick:Y,children:"A"})]}),(0,u.jsxs)("div",{className:"modal_action_option",children:[(0,u.jsx)("p",{children:"No"}),(0,u.jsx)("span",{className:"video-game-button",onClick:function(){return g(!1)},children:"B"})]})]})]})})]})};var G=function(e){var t=(0,a.useState)(!1),n=(0,r.Z)(t,2),s=n[0],i=n[1],o=(0,a.useState)(!1),c=(0,r.Z)(o,2),l=c[0],d=c[1],f=(0,a.useState)(!1),g=(0,r.Z)(f,2),p=g[0],h=g[1],v=(0,a.useRef)(""),w=(0,a.useState)(!1),A=(0,r.Z)(w,2),j=A[0],x=A[1],b=(0,a.useState)(!1),y=(0,r.Z)(b,2),_=y[0],N=y[1],S=e.activeProfile;(0,a.useEffect)((function(){var e=function(){window.addEventListener("scroll",(function(){window.scrollY>100?i(!0):i(!1)}))};return e(),function(){window.removeEventListener("scroll",e)}}),[]);var C=function(){document.body.style.overflowY="scroll",x(!1),N(!1)};return(0,a.useEffect)((function(){var e=function(e){27===e.keyCode&&h(!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),(0,u.jsxs)("div",{className:"nav ".concat(s&&"nav__hide"),children:[j&&(0,u.jsx)("div",{className:"nav_edit_profile",children:(0,u.jsx)(M.Z,{currentProfile:S,userEmail:e.currentUser.email,viewAllProfiles:C,saveEdit:function(){e.saveEdit(),x(!1)},getProfile:function(t){return e.selectProfile(t)},twitchToken:e.twitchToken})}),_&&(0,u.jsxs)("div",{className:"nav_edit_profile",children:[" ",(0,u.jsx)(T,{closeAccountSettings:C,setLoggedUser:function(t){return e.setLoggedUser(t)},currentUser:e.currentUser})," "]}),(0,u.jsx)("img",{className:"nav__logo",src:"data:image/png;base64,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",alt:"GameFlix Logo",onClick:function(){return window.location="/"}}),(0,u.jsxs)("div",{className:"nav__right",children:[(0,u.jsxs)("div",{className:"nav__search",children:[p&&(0,u.jsx)("form",{className:"nav__search_form",onSubmit:function(t){t.preventDefault();var n=v.current.value.trim();0!=n.length&&e.fetchSubmittedGame(n)},children:(0,u.jsx)("input",{ref:v,autoFocus:!0,type:"text",placeholder:"Titles, publishers, genres",defaultValue:e.searchedGame?"".concat(e.searchedGame.name):"",onBlur:function(){v.current.value.length>0||h(!1)}})}),(0,u.jsx)(m.Ozl,{className:"nav__search_icon ".concat(p&&"search_active"),onClick:function(){return h(!p)}})]}),(0,u.jsxs)("div",{className:"nav__actions",onMouseLeave:function(){return d(!1)},children:[(0,u.jsx)("div",{className:"nav__avatar_container",onMouseOver:function(){return d(!0)},children:(0,u.jsx)("img",{className:"nav__avatar",src:S.avatar?S.avatar:k,alt:"User's avatar"})}),(0,u.jsx)(m.$Pg,{className:"nav__avatar_arrow",style:{transform:"".concat(l?"rotate(180deg)":"rotate(0deg)")}}),l&&(0,u.jsx)(E,{changeProfile:e.changeUser,activeProfile:S,allProfiles:e.currentUser.profiles,logoutHandler:e.onLogout,closeNavDropdown:function(){d(!1)},toProfilePage:e.toProfilePage,spotifyToken:e.spotifyToken,editProfile:function(){document.body.style.overflowY="hidden",x(!0)},editAccount:function(){document.body.style.overflowY="hidden",N(!0)},updateCollection:e.updateCollection,currentCollection:e.currentCollection,viewCollection:e.viewCollection})]})]})]})},P=function(e){var t=e.twitchToken,n=e.setGameDetails,c=(0,a.useState)([]),f=(0,r.Z)(c,2),g=f[0],p=f[1],h=(0,a.useState)("Week"),v=(0,r.Z)(h,2),w=v[0],A=v[1],j=(0,a.useState)(!1),x=(0,r.Z)(j,2),b=x[0],y=x[1],_=(0,a.useState)(!1),k=(0,r.Z)(_,2),N=k[0],S=k[1],C=(0,a.useState)(!0),Z=(0,r.Z)(C,2),I=Z[0],E=Z[1],M="https://cybrary2022.onrender.com",D=new Date,T=Math.floor(new Date(D.getTime()+6048e5)/1e3),G=Math.floor(new Date(new Date(1e3*T).setMonth(new Date(1e3*T).getMonth()+1)).getTime()/1e3),P=Math.floor(new Date(new Date(1e3*G).setMonth(new Date(1e3*G).getMonth()+12)).getTime()/1e3),F=function(e){var t=[],n=[];return e.map((function(e){-1===t.indexOf(e.game.name)&&(t.push(e.game.name),n.push(e))})),n};(0,a.useEffect)((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n,r,a,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=w,e.next="Month"===e.t0?3:"Year"===e.t0?6:9;break;case 3:return n=T,r=G,e.abrupt("break",12);case 6:return n=G,r=P,e.abrupt("break",12);case 9:return n=Math.floor(D.getTime()/1e3),r=T,e.abrupt("break",12);case 12:e.prev=12,a=3,s=0;case 15:if(!(s<a)){e.next=31;break}return e.prev=16,e.next=19,l().post("".concat(M,"/app/upcoming"),{token:t,currentDate:n,targetDate:r});case 19:return o=e.sent,p(F(o.data)),E(!1),e.abrupt("break",31);case 25:e.prev=25,e.t1=e.catch(16),console.log("Issue fetching data");case 28:s++,e.next=15;break;case 31:e.next=36;break;case 33:e.prev=33,e.t2=e.catch(12),console.log(e.t2.message);case 36:case"end":return e.stop()}}),e,null,[[12,33],[16,25]])})))).apply(this,arguments)}t&&(E(!0),function(){e.apply(this,arguments)}())}),[w,t]);var R=function(e){A(e.target.innerText),y(!1)},U=function(e){var t,n=new Date(e.replace(/-/g,"/")),r=n.getDate();switch(r){case 1:case 21:case 31:t=r+"st";break;case 2:case 22:t=r+"nd";break;case 3:case 23:t=r+"rd";break;default:t=r+"th"}return["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+t+", "+n.getFullYear()};return(0,u.jsxs)("div",{onMouseOver:function(){return S(!0)},onMouseOut:function(){return S(!1)},className:"main_row",children:[(0,u.jsxs)("div",{className:"main_row__filters",onMouseLeave:function(){return y(!1)},children:[(0,u.jsx)("h2",{children:"Coming Soon"}),(0,u.jsxs)("p",{className:"filters_filter",onMouseOver:function(){return y(!0)},children:[w," ",(0,u.jsx)(m.$Pg,{size:10,className:b?"arrow_active":"arrow"})]})," ",b&&(0,u.jsx)("div",{className:"filter_options",children:(0,u.jsxs)("ul",{children:[(0,u.jsx)("li",{style:{backgroundColor:"Week"==w?"white":"",color:"Week"==w?"black":""},onClick:R,children:"Week"}),(0,u.jsx)("li",{style:{backgroundColor:"Month"==w?"white":"",color:"Month"==w?"black":""},onClick:R,children:"Month"}),(0,u.jsx)("li",{style:{backgroundColor:"Year"==w?"white":"",color:"Year"==w?"black":""},onClick:R,children:"Year"})]})})]}),(0,u.jsxs)("div",{className:"main_row__row_posters",children:[g&&!I&&g.map((function(e,t){var r;return(0,u.jsxs)("div",{className:"main_row__poster_container ".concat(N&&"dimmed"),onClick:function(){return n(e.game)},children:[(0,u.jsx)("h4",{className:"main__poster_released",children:U(e.human)}),(0,u.jsx)("img",{className:"main_poster",src:"//images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(r=e.game.cover)||void 0===r?void 0:r.image_id,".jpg"),alt:e.name},e.id)]},e.id)})),I&&(0,u.jsx)("div",{className:"main_row__loading_container",children:(0,s.Z)(Array(4)).map((function(e,t){return(0,u.jsx)("div",{className:"main_row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))})]})]})},F=function(e){var t=e.twitchToken,n=e.setGameDetails,c=(0,a.useState)([]),m=(0,r.Z)(c,2),f=m[0],g=m[1],p=(0,a.useState)(!1),h=(0,r.Z)(p,2),v=h[0],w=h[1],A="https://cybrary2022.onrender.com",j=Math.floor((new Date).getTime()/1e3),x=JSON.parse(sessionStorage.getItem("trending"));return(0,a.useEffect)((function(){if(t){if(x&&x.length>0)return g(x),void w(!1);!function(){e.apply(this,arguments)}()}function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,n=[],e.next=5,l().post("".concat(A,"/app/trending"),{token:t,currentDate:j});case 5:return r=e.sent,a=new Set,r.data.filter((function(e){return!a.has(e.game.id)&&a.add(e.game.id).add(e.game)})),a.forEach((function(e){return"object"==typeof e&&n.push(e)})),n.sort((function(e,t){return t.release_dates.findLast((function(e){return e.date}))-e.release_dates.findLast((function(e){return e.date}))||t.hypes-e.hypes})),g(n.slice(0,10)),sessionStorage.setItem("trending",JSON.stringify(n.slice(0,10))),w(!1),e.abrupt("return",r);case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:w(!1);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}}),[t]),v?(0,u.jsx)("div",{className:"row__loading_container",children:(0,s.Z)(Array(10)).map((function(e,t){return(0,u.jsx)("div",{className:"trending_row__placeholder__wrapper",children:(0,u.jsx)(d,{delay:t},t)},t)}))}):(0,u.jsxs)("div",{className:"trending_row",children:[(0,u.jsx)("h2",{children:"TRENDING TITLES"}),(0,u.jsx)("div",{className:"trending_row__posters",children:f.map((function(e,t){var r;return(0,u.jsx)(a.Fragment,{children:(0,u.jsxs)("div",{className:"trending_row__poster_wrapper",children:[(0,u.jsx)("div",{className:"trending_row__rank",children:t+1}),(0,u.jsxs)("div",{className:"trending_row__poster_container",style:{marginLeft:9==t?"160px":0==t&&"65px"},onClick:function(){return n(e)},children:[" ",!v&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("img",{loading:"lazy",className:"trending_row__poster",src:"https://images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(null===(r=e.cover)||void 0===r?void 0:r.image_id,".jpg"),alt:e.name})})]})]})},e.name)}))})]})},R=(n(276),function(e){var t=e.twitchToken,n=(e.setGameDetails,(0,a.useState)([])),s=(0,r.Z)(n,2),c=s[0],l=(s[1],(0,a.useState)(!1)),u=(0,r.Z)(l,2),d=(u[0],u[1]);(0,a.useEffect)((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.abrupt("return");case 5:e.prev=5,e.t0=e.catch(1),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[1,5]])})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]);return null===c||void 0===c||c.sort((function(e,t){return e.rating_count>t.rating_count?-1:t.rating_count>e.rating_count?1:0})),""}),U=n(1293),O=n(6234),Q=new(n.n(O)())({clientId:"05e6f02e47724a63b635cfdac09fc991"}),L=localStorage.getItem("profile"),B=function(e){var t=e.trackUri,n=e.playAudio,r=e.beginPlayback,s=e.pausePlayback,i=e.spotifyToken;if((0,a.useEffect)((function(){Q.setAccessToken(i)}),[i]),(0,a.useEffect)((function(){r()}),[t]),i)return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"playback_container",children:(0,u.jsx)(U.ZP,{token:i,callback:function(e){e.isPlaying||s()},uris:t?[t]:[],play:n,styles:{color:"white",bgColor:"rgba(0,0,0,0.8)",sliderColor:L.color,trackArtistColor:"white",trackNameColor:L.color}})})})};var z=new Date,H=(Math.floor(z.getTime()/1e3),[{requestId:"fetchAdventureTitles",genreId:31,title:"ACTION/ADVENTURE GAMES"},{requestId:"fetchArcadeTitles",genreId:33,title:"ARCADE GAMES"},{requestId:"fetchMusicTitles",genreId:7,title:"MUSIC GAMES"},{requestId:"fetchHackTitles",genreId:25,title:"HACK/SLASH TITLES"},{requestId:"fetchFightingTitles",genreId:4,title:"FIGHTING GAMES"},{requestId:"fetchIndieTitles",genreId:32,title:"INDIE GAMES"},{requestId:"fetchMassivelyMultiplayerTitles",genreId:36,title:"MOBA GAMES"},{requestId:"fetchPlatformerTitles",genreId:8,title:"PLATFORMER GAMES"},{requestId:"fetchPuzzleTitles",genreId:9,title:"PUZZLE GAMES"},{requestId:"fetchRacingTitles",genreId:10,title:"RACING GAMES"},{requestId:"fetchRPGTitles",genreId:12,title:"RPG GAMES"},{requestId:"fetchShooterTitles",genreId:5,title:"SHOOTER GAMES"},{requestId:"fetchSimulationTitles",genreId:13,title:"SIMULATION GAMES"},{requestId:"fetchSportsTitles",genreId:14,title:"SPORTS GAMES"},{requestId:"fetchStrategy",genreId:15,title:"STRATEGY GAMES"}]);var X=n(6907),J=(0,a.lazy)((function(){return n.e(938).then(n.bind(n,7654))})),W=(0,a.lazy)((function(){return n.e(37).then(n.bind(n,5872))})),Y=(0,a.lazy)((function(){return Promise.all([n.e(803),n.e(427)]).then(n.bind(n,1403))})),V=new URLSearchParams(window.location.search).get("code"),K=window.location.search.split("?")[1],q=function(e){var t=e.currentUser,n=e.twitchToken,s=e.currentProfile,c=e.currentCollection,d=e.userNotes,m=(e.manageProfiles,e.updateCollection),f=(e.selectProfile,e.fetchGame),g=e.addGame,p=e.removeGame,h=e.logoutUser,v=function(){var e=localStorage.getItem("twitch_auth"),t=(0,a.useState)([]),n=(0,r.Z)(t,2),s=n[0],c=n[1],u=(0,a.useState)(!0),d=(0,r.Z)(u,2),m=d[0],f=d[1],g="https://cybrary2022.onrender.com",p=new Date;(0,a.useEffect)((function(){var t=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().get("".concat(g,"/app/get_genres"));case 2:if(t=e.sent,r=new Date(t.data.last_updated),!(p>r.setDate(r.getDate()+1))){e.next=8;break}return e.abrupt("return",n());case 8:return c(t.data[0].genres_list),f(!1),e.abrupt("return",t.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Promise.all(H.map((function(t){return l().post("".concat(g,"/app/game_genre"),{token:e,genreId:t.genreId,genreTitle:t.title})})));case 4:n=t.sent,r=n.map((function(e){return e.data})),h(r),f(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var h=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().post("".concat(g,"/app/update_genres"),{genreList:t,date:p});case 2:n=e.sent,c(n.data.genres_list);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{genreGamesList:s,isLoading:m}}(),w=(0,a.useState)(!1),j=(0,r.Z)(w,2),x=j[0],b=(j[1],(0,a.useState)({status:"",message:""})),y=(0,r.Z)(b,2),k=y[0],N=y[1],S=(0,a.useState)(null),C=(0,r.Z)(S,2),Z=C[0],I=C[1],E=(0,a.useState)(!1),M=(0,r.Z)(E,2),D=M[0],T=M[1],U=(0,a.useState)(),O=(0,r.Z)(U,2),Q=O[0],L=(O[1],(0,a.useState)(!1)),z=(0,r.Z)(L,2),q=z[0],$=z[1],ee=(0,a.useState)(!1),te=(0,r.Z)(ee,2),ne=(te[0],te[1]),re=(0,a.useState)(null),ae=(0,r.Z)(re,2),se=(ae[0],ae[1]),ie=(0,a.useState)(null),oe=(0,r.Z)(ie,2),ce=(oe[0],oe[1]),le=(0,a.useState)(!1),ue=(0,r.Z)(le,2),de=ue[0],me=ue[1],fe=(0,a.useState)(null),ge=(0,r.Z)(fe,2),pe=ge[0],he=ge[1],ve=(0,a.useState)(!1),we=(0,r.Z)(ve,2),Ae=(we[0],we[1]),je=(0,a.useState)(null),xe=(0,r.Z)(je,2),be=xe[0],ye=xe[1],_e=(0,a.useState)(null),ke=(0,r.Z)(_e,2),Ne=ke[0],Se=ke[1],Ce=function(e){var t=(0,a.useState)(),n=(0,r.Z)(t,2),s=n[0],c=n[1],u=(0,a.useState)(),d=(0,r.Z)(u,2),m=d[0],f=d[1],g=(0,a.useState)(),p=(0,r.Z)(g,2),h=p[0],v=p[1],w="https://cybrary2022.onrender.com",A=sessionStorage.getItem("spotify_auth");return(0,a.useEffect)((function(){if(A)return console.log(A),void c(JSON.parse(A));if(e){var t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l().post("".concat(w,"/app/spotify_authentication"),{code:e,baseURL:w});case 3:n=t.sent,c(n.data.tokenRequest.body.access_token),f(n.data.tokenRequest.body.refresh_token),v(n.data.tokenRequest.body.expires_in),sessionStorage.setItem("spotify_auth",JSON.stringify(n.data.tokenRequest.body.access_token)),window.history.pushState({},null,"/"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),window.location="/";case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]),(0,a.useEffect)((function(){if(m&&h){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().post("".concat(w,"/app/refresh_token"),{refreshToken:m,baseURL:w});case 3:t=e.sent,c(t.data.body.body.access_token),f(t.data.body.body.refresh_token),v(t.data.body.body.expires_in),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("REFRESH TOKEN ERROR"),window.location="/";case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=setInterval((function(){e()}),1e3*(h-60));return function(){return clearTimeout(t)}}}),[m,h]),s}(V);!function(e){var t=(0,a.useState)([]),n=(0,r.Z)(t,2),s=n[0],c=n[1];(0,a.useEffect)((function(){if(e){var t=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l().get("".concat("https://cybrary2022.onrender.com","/steam/get_owned_games"),{params:{id:e}});case 3:n=t.sent,localStorage.setItem("steamID",n.config.params.id),console.log(n.data),c(n.data),window.history.pushState({},null,"/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),console.log("GET STEAM COLLECTION ERROR");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e])}(K);(0,a.useEffect)((function(){pe||(document.body.style.overflow="auto")}),[]);var Ze=function(){document.body.style.overflow="auto",he(null)},Ie=function(e){I(e)};return q?(0,u.jsx)("div",{className:"loading_profile__container",children:(0,u.jsx)("div",{className:"loading_profile",children:(0,u.jsx)("img",{src:s.avatar,alt:"current user avatar"})})}):s?null!==Ne?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:[(0,u.jsx)(J,{setNotification:function(e,t){return N({status:e,message:t})},game:Ne,closeDetails:function(){return Se(null)},twitchToken:n,addGame:function(e){return g(e)},removeGame:function(e){return p(e)},activeProfile:s}),(0,u.jsx)(W,{notification:k,displayNotification:x,hideNotification:function(){N({message:"",status:""})}})]})}):de?(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(u.Fragment,{children:"..."}),children:(0,u.jsx)(Y,{collection:c,activeProfile:s,backToHome:function(){return me(!1)},currentTrack:Z,playTrack:Ie,isPlaying:D,pausePlayback:function(){return T(!1)},resumePlayback:function(){return T(!0)},setSelectedProfile:function(e){return ce(e)},spotifyToken:Ce,removeGame:function(e){return p(e)},updateCollection:m,userNotes:d})}):(0,u.jsxs)("div",{className:"App",children:[(0,u.jsx)(G,{currentUser:t,activeProfile:s,changeUser:function(e){$(!0),localStorage.setItem("profile",e.name),setTimeout((function(){$(!1)}),2e3)},onLogout:h,fetchSubmittedGame:f,toProfilePage:function(){return localStorage.removeItem("profile")},selectProfile:function(e){return ce(e)},spotifyToken:Ce,twitchToken:n,saveEdit:function(){return ne(!0)},setLoggedUser:function(e){return se(e)},updateCollection:m,currentCollection:c,viewCollection:function(){return me(!0)}}),(0,u.jsx)(_,{setGameDetails:function(e){return Se(e)},addGame:function(e){return g(e)},activeProfile:s}),(0,u.jsx)(P,{twitchToken:n,setGameDetails:function(e){return Se(e)}}),(0,u.jsx)(R,{twitchToken:n,setGameDetails:function(e){return Se(e)}}),(0,u.jsx)(F,{twitchToken:n,setGameDetails:function(e){return Se(e)}}),pe&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h1",{className:"row__preview_close",onClick:Ze,children:"X"}),(0,u.jsx)("h1",{className:"row__preview_close options",onClick:function(){Ae(!0)},children:(0,u.jsx)(X.eBn,{})})]}),(0,u.jsx)("div",{className:"".concat(null!==pe&&"game_preview__modal")}),v.genreGamesList.map((function(e){return(0,u.jsx)(A,{activeProfile:s,spotifyToken:Ce,genreDetails:Object.entries(e),playTrack:Ie,currentTrack:Z,setGameDetails:function(e){return Se(e)},resumePlayback:function(e){return T(!0)},pausePlayback:function(e){return T(!1)},isPlaying:D,currentGameOpen:pe,openGame:function(e){return function(e){console.log(e),he(e.id),document.body.style.overflow="hidden"}(e)},closeGameWindow:Ze,addGame:function(e){return g(e)},setNotification:function(e,t){return N({status:e,message:t})},loading:Q,hoverGame:function(e){return ye(e)},hoverAway:function(){return ye(null)},currentHover:be},Object.keys(e))})),Ce&&(0,u.jsx)(B,{spotifyToken:Ce,playAudio:D,beginPlayback:function(e){return T(!0)},pausePlayback:function(e){return T(!1)},trackUri:null===Z||void 0===Z?void 0:Z.uri}),(0,u.jsx)(W,{notification:k,displayNotification:x,hideNotification:function(){N({message:"",status:""})}})]}):void 0},$=(0,a.memo)(q)},3676:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_E.c6e4123839651e70a8d1.png"},3224:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_M.4a41f5f352b1c2ff77a9.png"},1879:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_RP.57aa50a6ca1272626835.png"},1784:function(e,t,n){"use strict";e.exports=n.p+"static/media/ESRB_T.6ed5a3e7b4606d5c0824.png"},4654:function(){}}]);
//# sourceMappingURL=34.539018b1.chunk.js.map