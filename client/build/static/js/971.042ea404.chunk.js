"use strict";(self.webpackChunkgameflix=self.webpackChunkgameflix||[]).push([[971],{7055:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});var r=t(4165),a=t(5861),s=t(9439),o=t(2791),c=t(7689),u=t.p+"static/media/vg-collage.acd91def3e862094d9e0.jpg",i=t(184),l=function(e){var n,t,c,l,d=e.toLanding,p=e.authenticateUser,_=(0,o.useState)(!1),f=(0,s.Z)(_,2),m=f[0],v=f[1],g=(0,o.useState)(!1),h=(0,s.Z)(g,2),x=h[0],S=h[1],j=(0,o.useState)(null),b=(0,s.Z)(j,2),w=b[0],N=b[1],Z=(0,o.useState)(""),E=(0,s.Z)(Z,2),C=E[0],L=E[1],T=(0,o.useState)(!1),k=(0,s.Z)(T,2),D=k[0],R=k[1];document.body.style.overflow="hidden";var O=(0,o.useRef)(""),A=(0,o.useRef)(""),P=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,F=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),R(!0),t=O.current.value,a=A.current.value,O.current.blur(),A.current.blur(),N(""),e.next=9,p(t,a);case 9:(s=e.sent).data||L(s),R(!1);case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:"login__wrapper",children:[(0,i.jsx)("div",{className:"login",children:(0,i.jsx)("div",{className:"login__form_wrapper",children:(0,i.jsx)("div",{className:"login__form_container",children:(0,i.jsx)("form",{className:"login__form",onSubmit:F,children:D?(0,i.jsx)("div",{className:"login__loading",children:(0,i.jsx)("div",{className:"loading_spinner"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{children:"LOGIN"}),(0,i.jsxs)("div",{className:"login__form_actions",children:[(0,i.jsx)("label",{className:"form_label",htmlFor:"email"}),(0,i.jsx)("input",{ref:O,onFocus:function(){return N("email")},onChange:function(e){m&&v(!1);var n=e.target.value.trim().toLowerCase();P.test(n)},onBlur:function(e){var n=e.target.value.trim().toLowerCase(),t=P.test(n);v(!t),N(null)},className:"form_input ".concat(""!==(null===(n=O.current)||void 0===n?void 0:n.value)&&m?"error":""),type:"email"}),(0,i.jsx)("span",{className:"form_actions_placeholder ".concat(null!==(t=O.current)&&void 0!==t&&t.value||"email"==w?"focused":""),children:"Email"})]}),(0,i.jsxs)("div",{className:"login__form_actions",children:[(0,i.jsx)("label",{className:"form_label",htmlFor:"email"}),(0,i.jsx)("input",{ref:A,onFocus:function(){return N("password")},onChange:function(e){x&&S(!1);e.target.value.trim().toLowerCase(),e.target.value.length>0&&e.target.value.length},onBlur:function(e){var n=e.target.value.trim().toLowerCase(),t=n.length>3&&n.length<=8;S(!t),N(null)},className:"form_input ".concat(void 0!==(null===(c=A.current)||void 0===c?void 0:c.value)&&x&&A.current.value.length>0?"error":""),type:"password"}),(0,i.jsx)("span",{className:"form_actions_placeholder ".concat(null!==(l=A.current)&&void 0!==l&&l.value||"password"==w?"password_focused":""),children:"Password"}),C&&(0,i.jsx)("p",{className:"login__auth_error",children:C})]}),(0,i.jsx)("button",{className:"form__submit_btn",children:"Sign In"}),(0,i.jsxs)("p",{className:"form__create_account",children:["Don't have an account?"," ",(0,i.jsx)("span",{onClick:function(){d()},children:"Create one now"}),"."]})]})})})})}),(0,i.jsx)("div",{className:"login__background",children:(0,i.jsx)("img",{src:u})})]})},d=t(4569),p=t.n(d);var _=(0,o.lazy)((function(){return Promise.all([t.e(355),t.e(257),t.e(112),t.e(865)]).then(t.bind(t,5558))})),f=function(e){var n=e.onLogin,t=function(){var e=localStorage.getItem("twitch_auth"),n=(0,o.useState)([]),t=(0,s.Z)(n,2),c=t[0],u=t[1],i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,l=new Date;(0,o.useEffect)((function(){var n=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().get("".concat(i,"/authentication/login_banner"));case 2:if(n=e.sent,a=new Date(n.data.last_updated),!(l>a.setDate(a.getDate()+7))){e.next=9;break}return t(),e.abrupt("return");case 9:return u(n.data.popular_games_list),e.abrupt("return");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n();var t=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,p().post("".concat(i,"/app/popular_titles"),{token:e});case 5:return t=n.sent,n.abrupt("return",d(t.data));case 9:return n.prev=9,n.t0=n.catch(2),console.log(n.t0),n.abrupt("return",n.t0);case 13:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(){return n.apply(this,arguments)}}()}),[e]);var d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().post("".concat(i,"/authentication/update_login_banner"),{gameList:n,date:new Date});case 2:t=e.sent,u(t.data.popular_games_list);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return c}(),u=(0,o.useState)(!0),d=(0,s.Z)(u,2),f=(d[0],d[1]),m=(0,o.useState)(!1),v=(0,s.Z)(m,2),g=v[0],h=v[1],x=localStorage.getItem("user"),S=(0,c.s0)(),j={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL,b=(0,o.useRef)(0);(0,o.useEffect)((function(){x&&S("/")}),[]);var w=function(){b.current+=1,b.current>=t.length&&f(!1)},N=null===t||void 0===t?void 0:t.map((function(e){return(0,i.jsx)(o.Fragment,{children:(0,i.jsx)("img",{className:"login__img",src:"//images.igdb.com/igdb/image/upload/t_cover_big_2x/".concat(e.cover.image_id,".jpg"),onLoad:w})},e.id)})),Z=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,a){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p().post("".concat(j,"/authentication/signin"),{email:t,password:a});case 3:return s=e.sent,n(s.data.user),e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,t){return e.apply(this,arguments)}}();return x?(0,i.jsx)("div",{className:"auth_login__loading",children:(0,i.jsx)("div",{className:"auth_loading_spinner"})}):g?(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(i.Fragment,{children:"..."}),children:(0,i.jsx)(_,{toSignIn:function(){h(!1)},images:N})}):(0,i.jsx)(l,{toLanding:function(){return h(!0)},authenticateUser:function(e,n){return Z(e,n)}})}}}]);
//# sourceMappingURL=971.042ea404.chunk.js.map